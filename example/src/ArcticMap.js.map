{"version":3,"file":"ArcticMap.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/lib/ArcticMap.js","../../src/lib/ArcticMapButton.js","../../src/lib/ArcticMapPanel.js","../../src/lib/ArcticMapLayer.js","../../src/lib/ArcticMapEdit.js","../../src/lib/ArcticMapLLDSearch.js","../../src/lib/ArcticMapLayerPopup.js","../../src/lib/ArcticMapControlArea.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\r\nimport async from 'async';\r\nimport './ArcticMap.css';\r\n\r\nimport { Map, loadModules } from 'react-arcgis'\r\n\r\n\r\nclass ArcticMap extends React.Component {\r\n  static displayName = 'ArcticMap';\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      map: null,\r\n      view: null,\r\n      hideBasemapButton: false,\r\n      loading: false,\r\n      lat: props.lat,\r\n      lng: props.lng,\r\n      basemap: props.basemap || \"hybrid\",\r\n      sr: Number.parseInt(props.sr || \"102100\"),\r\n    }\r\n\r\n    this.handleMapLoad = this.handleMapLoad.bind(this)\r\n    this.handleMapClick = this.handleMapClick.bind(this)\r\n    this.layers = []\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    var self = this\r\n    var index = 0\r\n    this.layers = []\r\n\r\n    self.childrenElements = [];\r\n\r\n    var children = React.Children.map(this.props.children, function (child) {\r\n      if (child.type.displayName === 'ArcticMapLayer') {\r\n        return React.cloneElement(child, {\r\n          ref: (c) => { if (c) { self.layers.push(c) } }\r\n        })\r\n      } else if (child.type.displayName === 'ArcticMapEdit') {\r\n        // console.log(self.refs);\r\n        return React.cloneElement(child, {\r\n          // ref: 'editor'\r\n\r\n        })\r\n\r\n      }\r\n\r\n      // else if (child.type.name === 'ArcticMapLLDSearch') {\r\n\r\n      //   return React.cloneElement(child, {\r\n      //   })\r\n\r\n      // } \r\n\r\n      else {\r\n        return React.cloneElement(child, {\r\n          //ref: 'child-' + (index++)\r\n          ref: (c) => { if (c) { self.childrenElements.push(c); } return 'child-' + (index++) }\r\n        })\r\n      }\r\n    })\r\n\r\n    if (children) {\r\n      children = children.sort(l => l.type.displayName === 'ArcticMapEdit').reverse()\r\n    } else {\r\n      children = (<div />)\r\n    }\r\n\r\n\r\n\r\n\r\n    // console.log(this.props.children);\r\n    // this.props.children.forEach((child) =>{\r\n    //         child.ref = (c) => {this.layers.push(c) };\r\n    // });\r\n\r\n    return <Map class='full-screen-map'\r\n      mapProperties={{ basemap: this.state.basemap }} onLoad={this.handleMapLoad} onClick={this.handleMapClick} >\r\n      {children}\r\n      <div id='bottombar' style={{ position: 'absolute', right: '10px', bottom: '20px' }}>\r\n        {this.state.hideBasemapButton === false &&\r\n          <button className='action-button esri-icon-layers' id='pointButton'\r\n            type='button' title='Map Layers' onClick={this.handleShowBasemaps.bind(this)} />\r\n        }\r\n      </div>\r\n\r\n      {/*  <div id='bottomleftbar'>\r\n        {this.state.loading === true &&\r\n         <p>Loading...</p>\r\n        }\r\n      </div>\r\n      */}\r\n    </Map>\r\n  }\r\n\r\n  handleShowBasemaps(event) {\r\n    this.state.view.ui.add(this.basemapGallery, {\r\n      position: 'bottom-right'\r\n    })\r\n    this.setState({ hideBasemapButton: true })\r\n  }\r\n\r\n  handleMapClick(event) {\r\n    // console.log(event);\r\n  }\r\n\r\n  createElementFromHTML(htmlString) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = htmlString.trim();\r\n\r\n    // Change this to div.childNodes to support multiple top-level nodes\r\n    return div.firstChild;\r\n  }\r\n\r\n\r\n  setEdit(json, nofire, type) {\r\n    if (nofire === null) {\r\n      nofire = false;\r\n    }\r\n\r\n    if (type === null) {\r\n      type = \"polygon\";\r\n    }\r\n\r\n\r\n\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, nofire, type);\r\n    }\r\n  }\r\n\r\n\r\n  setJson(json) {\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, true);\r\n    }\r\n  }\r\n\r\n\r\n  handleMapLoad(map, view) {\r\n\r\n\r\n    this.setState({ map, view })\r\n\r\n    var self = this\r\n    self.state.map.amlayers = [];\r\n    var centerSplit = this.props.center.split('|');\r\n    view.center = [parseFloat(centerSplit[1]), parseFloat(centerSplit[0])];\r\n    view.zoom = parseInt(centerSplit[2]);\r\n\r\n    loadModules([\r\n      'esri/widgets/LayerList',\r\n      'esri/widgets/Locate',\r\n      'esri/widgets/BasemapGallery',\r\n      'esri/widgets/Home',\r\n      'esri/widgets/Zoom',\r\n      'esri/widgets/Search',\r\n      // 'esri/tasks/Locator',\r\n      'esri/geometry/geometryEngine',\r\n      \"esri/geometry/Polygon\",\r\n      \"esri/request\",\r\n      \"esri/geometry/Point\"\r\n    ]).then(([\r\n      LayerList,\r\n      Locate,\r\n      BasemapGallery,\r\n      Home,\r\n      Zoom,\r\n      Search,\r\n      // Locator,\r\n      geometryEngine,\r\n      Polygon,\r\n      Request,\r\n      Point\r\n    ]) => {\r\n      window._request = Request;\r\n      window._map = self;\r\n      self.request = Request;\r\n\r\n\r\n\r\n\r\n      //   self.state.view.spatialReference = {\r\n      //     wkid: self.state.sr,\r\n      //  };\r\n\r\n      var layerList = new LayerList({\r\n        view: self.state.view,\r\n        listItemCreatedFunction: function (event) {\r\n          const item = event.item\r\n          item.panel = {\r\n            content: 'legend',\r\n            open: false\r\n          }\r\n        }\r\n      })\r\n\r\n\r\n\r\n      view.popup.dockEnabled = true\r\n      view.popup.dockOptions.position = 'bottom-left'\r\n      //var layers = React.Children.toArray(this.props.children).filter((ele) => ele.type.name === \"ArcticMapLayer\");\r\n\r\n\r\n\r\n      // console.log(layers);\r\n      view.popup.watch('selectedFeature', function (graphic) {\r\n        if (graphic) {\r\n          var graphicTemplate = graphic.getEffectivePopupTemplate()\r\n          graphicTemplate.actions = [{\r\n            id: 'select-item',\r\n            title: 'Select',\r\n            image: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQyREM3RDkwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQyREM3REEwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDJEQzdENzBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDJEQzdEODBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prb3PqgAAACTSURBVHjaYvz//z8DJYCJgVJAjgsiIyMFQBjEZgQZwMjISJJmILUXynVmIdVmqGZ9qFAe0S7AonnR8uXLk5jItBmsGSUWgIriSdUMNwCoaB6QmgulidaM7AKYgjiYIcRohkdjVFQUhmIoG69mlHSAxUYGQppRAhGo6AMoYQDxRWI1Y02JSC65SEgz3IABzY0AAQYAhIhWWCl3Pj0AAAAASUVORK5CYII=\",\r\n\r\n\r\n          }]\r\n\r\n          graphicTemplate.actions.items[0].visible = self.state.map.editor !== undefined// graphic.attributes.website ? true : false;\r\n          //self.state.view.goTo(graphic);\r\n        }\r\n      })\r\n      view.popup.viewModel.on('trigger-action', function (event) {\r\n        if (event.action.id === 'select-item') {\r\n          self.state.map.editor.setEditFeature(event.target.selectedFeature);\r\n          view.popup.close();\r\n        }\r\n      })\r\n\r\n\r\n\r\n      view.on('click', (event) => {\r\n        // setTimeout(function () {\r\n\r\n        if (self.state.hideBasemapButton && self.state.hideBasemapButton === true) {\r\n          self.state.view.ui.remove(self.basemapGallery);\r\n          self.setState({ hideBasemapButton: false });\r\n          return;\r\n        }\r\n        //this.setState({ hideBasemapButton: true })\r\n\r\n        if (self.state.map.editor && self.state.map.editor.state.editing === true) {\r\n          return;\r\n        }\r\n        // console.log(event);\r\n        // need to work on identify and add to a single popup\r\n        // https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=tasks-identify\r\n\r\n        var identresults = [];\r\n        //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'wait';\r\n        self.setState({ loading: true });\r\n\r\n        var identLayers = self.layers.filter(function (layer) {\r\n          var mapzoom = view.zoom;\r\n\r\n          if (layer.props.identMaxZoom !== undefined) {\r\n            if (Number.parseInt(layer.props.identMaxZoom, 10) > mapzoom) {\r\n              return layer;\r\n            }\r\n          }\r\n\r\n          return layer;\r\n\r\n        });\r\n\r\n        identLayers = identLayers.concat(self.state.map.amlayers);\r\n\r\n        async.eachSeries(identLayers, function (layer, cb) {\r\n          layer.identify(event, function (results) {\r\n            if (results) {\r\n              results.layer = layer;\r\n              identresults.push(results);\r\n            }\r\n            cb();\r\n          });\r\n        }, function (err) {\r\n          var results = identresults.map(function (ir) {\r\n            ir.results.forEach(function (res) {\r\n              res.layer = ir.layer;\r\n              res.acres = -1;\r\n              if (res.feature.geometry) {\r\n                res.acres = geometryEngine.geodesicArea(res.feature.geometry, 'acres');\r\n              }\r\n            });\r\n            return ir.results;\r\n          }) || [].reduce(function (a, b) {\r\n            return a.concat(b);\r\n          });\r\n\r\n          results = results.flat();\r\n\r\n          results = results.sort(function (r1, r2) {\r\n            return r1.acres > r2.acres;\r\n            //r.feature.attributes.Shape_Area\r\n          });\r\n\r\n          //results = results.reverse();\r\n          var popupresults = results.map(function (result) {\r\n            var feature = result.feature;\r\n            var layerName = result.layerName;\r\n\r\n            feature.attributes.layerName = layerName;\r\n\r\n\r\n            feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n              title: layerName,\r\n              content: result.layer.renderPopup(feature, result),\r\n              actions: [{ title: \"Select\", id: \"select-action\" }]\r\n            };\r\n\r\n            return feature;\r\n          });\r\n\r\n          if (popupresults.length > 0) {\r\n            view.popup.close();\r\n            view.popup.currentSearchResultFeature = null;\r\n            self.state.view.popup.open({\r\n              features: popupresults,\r\n              location: event.mapPoint\r\n            });\r\n            popupresults[0].setCurrentPopup();\r\n\r\n            self.state.view.popup.on('trigger-action', function (e) {\r\n              if (e.action.id === 'select-action');\r\n            });\r\n          }\r\n          self.setState({ loading: false });\r\n          document.getElementsByClassName('esri-view-root')[0].style.cursor = 'auto';\r\n        });\r\n\r\n        // self.layers.forEach(layer => {\r\n        //     layer.identify(event);\r\n        // })\r\n        //}, 100);\r\n\r\n      })\r\n\r\n      // Add widget to the top right corner of the view\r\n      self.state.view.ui.add(layerList, 'top-left')\r\n\r\n\r\n      if (this.props.locate) {\r\n        var locateBtn = new Locate({\r\n          view: self.state.view\r\n        })\r\n\r\n        self.state.view.ui.add(locateBtn, {\r\n          position: 'top-right'\r\n        })\r\n      }\r\n\r\n      this.basemapGallery = new BasemapGallery({\r\n        view: self.state.view\r\n      })\r\n\r\n      this.basemapGallery.watch('activeBasemap', function (newValue, oldValue, property, object) {\r\n        self.state.view.ui.remove(self.basemapGallery)\r\n        self.setState({ hideBasemapButton: false })\r\n      });\r\n\r\n\r\n      map.on(\"basemap-change\", function (a) {\r\n        //this.basemapGallery.on('click', function () {\r\n\r\n        alert(\"BM CHanegd\")\r\n      })\r\n\r\n\r\n      // Add the widget to the top-right corner of the view\r\n\r\n      if (this.props.home) {\r\n        var homeBtn = new Home({\r\n          view: view\r\n        })\r\n\r\n        // Add the home button to the top left corner of the view\r\n        view.ui.add(homeBtn, 'top-right')\r\n      }\r\n\r\n      view.ui.remove('zoom')\r\n\r\n      var zoom = new Zoom({\r\n        view: self.state.view\r\n      })\r\n\r\n      view.ui.add(zoom, 'top-right')\r\n\r\n\r\n      if (self.props.search) {\r\n\r\n        // find search elemets\r\n        var searchitems = self.childrenElements.filter(ele => {\r\n\r\n          if (ele.constructor.name.toLowerCase().includes('search')) {\r\n            return ele;\r\n          }\r\n\r\n        });\r\n\r\n        var searchsources = searchitems.map(i => {\r\n          if (i.search) { i.search(); }\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n        var searchWidget = new Search({\r\n          view: view,\r\n          sources: searchsources,\r\n          includeDefaultSources: true\r\n        });\r\n\r\n        searchWidget.on(\"search-complete\", function (event) {\r\n\r\n        });\r\n\r\n        searchWidget.on('select-result', function (evt) {\r\n\r\n          view.popup.currentSearchResultFeature = evt.result.feature;\r\n          view.popup.close();\r\n          // view.popup.open({\r\n          //  location: evt.result.feature.geometry,  // location of the click on the view\r\n          //  feature: evt.result.feature,\r\n          //  title: \"Search Result\",  // title displayed in the popup\r\n          //  content: evt.result.name, // content displayed in the popup\r\n          // });\r\n        });\r\n\r\n        view.ui.add(searchWidget, {\r\n          position: \"top-right\",\r\n          index: 0\r\n        });\r\n\r\n      }\r\n\r\n      //       var elestring = this.createElementFromHTML( `<input type=\"text\" placeholder=\"Find address or place\" aria-label=\"Search\" autocomplete=\"off\" tabindex=\"0\" class=\"esri-input esri-search__input\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-owns=\"1687b00a338-widget-1-suggest-menu\" role=\"textbox\" data-node-ref=\"_inputNode\" title=\"Find address or place\">`);\r\n\r\n      //  view.ui.add(elestring, {\r\n      //         position: \"top-right\",\r\n      //         index: 0\r\n      //       });\r\n\r\n      this.getEditFeature = () => {\r\n        this.state.map.editor.state.tempGraphicsLayer.graphics.items[0];\r\n      }\r\n\r\n      setTimeout(() => {\r\n        var evt = new Event('mapready', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n        if (self.props.onmapready) {\r\n          self.props.onmapready(evt);\r\n        }\r\n      }, 500)\r\n\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMap\r\n","import React from 'react';\r\n\r\n\r\nvar style = {\r\n    arcticButton: {\r\n        padding: \"5px\",\r\n        height: \"32px\",\r\n        width: \"32px\",\r\n        backgroundColor: \"#fff\",\r\n        color: '#6e6e6e',\r\n        border: 'none',\r\n        display: 'flex',\r\n        flexFlow: 'row nowrap',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: \"#ccc\"\r\n        }\r\n    }\r\n}\r\n\r\nclass ArcticMapButton extends React.Component {\r\n    static displayName = 'ArcticMapButton';\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            enabled: true,\r\n            useEsriIcon: props.esriicon !== null\r\n        \r\n        }\r\n\r\n        this.fireclick = function (e) {\r\n            if (this.props.onclick) {\r\n                this.props.onclick(e);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        if (this.state.useEsriIcon) {\r\n\r\n            var esriClassName = 'esri-icon esri-icon-' + this.props.esriicon;\r\n\r\n            return(<button  style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n                <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            </button>);\r\n\r\n           \r\n        } else {\r\n            return (<div></div>);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapButton","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\nvar styles = {\r\n    rightWidgetFull: {\r\n        \"position\": \"absolute\",\r\n        \"right\": \"2px\",\r\n        \"top\": \"2px\",\r\n        \"bottom\": \"2px\",\r\n        \"zIndex\": \"100\",\r\n\r\n        \"minWidth\": '30%',\r\n        paddingTop: '30px'\r\n    },\r\n    widgetContainer: {\r\n        position: 'realative',\r\n        \"paddingRight\": \"18px\",\r\n        \"paddingLeft\": \"18px\",\r\n        \"overflowY\": 'auto',\r\n        \"maxHeight\": '100%'\r\n    }\r\n\r\n};\r\n\r\nclass ArcticMapPanel extends React.Component {\r\n  static displayName = 'ArcticMapPanel';\r\n  constructor (props) {\r\n      super(props)\r\n\r\n      this.toggle = function () {\r\n        \r\n        var currvalue = this.state.open;\r\n        this.setState({ open: !currvalue });\r\n    };\r\n\r\n    this.mapFrame = document.getElementsByClassName('esri-view-root')[0];\r\n    this.renderEle = document.createElement(\"span\");\r\n    this.mapFrame.appendChild(this.renderEle);\r\n    this.state = {\r\n        open: this.props.open || false\r\n    };\r\n\r\n  }\r\n  componentDidUpdate(){\r\n    this.renderPanel();\r\n  }\r\n\r\n  render(){\r\n     \r\n      return(<span><ArcticMapButton esriicon={this.props.esriicon} onclick={this.toggle.bind(this)} title={this.props.title} ></ArcticMapButton></span>);\r\n  }\r\n  renderPanel(){\r\n      // refactor this\r\n    if (this.state.open) {\r\n        var ele = React.createElement(\r\n            'div',\r\n            { className: 'esri-widget', style: styles.rightWidgetFull },\r\n            React.createElement(\r\n                'h2',\r\n                { style: { marginTop: '6px', position: 'absolute', left: '8px', top: '0' } },\r\n                this.props.title\r\n            ),\r\n            React.createElement(\r\n                'span',\r\n                { style: { position: 'absolute', top: '0', right: '0' } },\r\n                React.createElement(ArcticMapButton, { esriicon: 'close', onclick: this.toggle.bind(this) })\r\n            ),\r\n            React.createElement(\r\n                'div',\r\n                { style: styles.widgetContainer },\r\n                React.createElement(\r\n                    'div',\r\n                    null,\r\n                    this.props.children\r\n                )\r\n            )\r\n        );\r\n\r\n        ReactDOM.render(ele, this.renderEle);\r\n    } else {\r\n        var eleempty = React.createElement('span', null);\r\n        ReactDOM.render(eleempty, this.renderEle);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default ArcticMapPanel","import React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\nclass ArcticMapLayer extends React.Component {\r\n    static displayName = \"ArcticMapLayer\";\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            title : props.title,\r\n            blockSelect: props.blockIdentSelect !== undefined\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules(['esri/Graphic',\r\n            \"esri/layers/FeatureLayer\",\r\n            \"esri/layers/MapImageLayer\",\r\n            \"esri/layers/ImageryLayer\",\r\n\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/tasks/IdentifyTask\",\r\n            \"esri/tasks/support/IdentifyParameters\",\r\n            \"esri/geometry/Point\",\r\n            \"esri/symbols/SimpleMarkerSymbol\",\r\n            \"esri/layers/GroupLayer\"\r\n        ]).then(([\r\n            Graphic,\r\n            FeatureLayer,\r\n            MapImageLayer,\r\n            ImageryLayer,\r\n\r\n            GraphicsLayer,\r\n            IdentifyTask,\r\n            IdentifyParameters,\r\n            Point,\r\n            SimpleMarkerSymbol,\r\n            GroupLayer\r\n        ]) => {\r\n            // Create a polygon geometry\r\n\r\n\r\n            var children = React.Children.map(this.props.children, function (child) {\r\n                if (child.type.displayName === 'ArcticMapLayerPopup') {\r\n                    return child;\r\n                    // return React.cloneElement(child, {\r\n                    //     // ref: 'editor'\r\n                    //   })\r\n                }\r\n            })\r\n\r\n\r\n            self.layerRenderers = children;\r\n\r\n\r\n\r\n            // this.setState({ graphic });\r\n\r\n            if (self.props.type === \"feature\") {\r\n\r\n                var featureLayer = new FeatureLayer({\r\n                    url: self.props.src,\r\n                    outFields: [\"*\"],\r\n                });\r\n                self.layerRef = featureLayer;\r\n                self.state.map.add(featureLayer);\r\n            }\r\n\r\n            if (self.props.type === \"group\") {\r\n                var gtrans = 1;\r\n                if (self.props.transparency) {\r\n                    gtrans = Number.parseFloat(self.props.transparency);\r\n                }\r\n                var srcsplit = self.props.src.split(',');\r\n\r\n                var gmaplayer = new GroupLayer({\r\n                    //url: self.props.src,\r\n                    opacity: gtrans\r\n\r\n                });\r\n                if (self.props.title) {\r\n\r\n                    gmaplayer.title = self.props.title;\r\n                }\r\n\r\n                srcsplit.forEach(function (src) {\r\n                    var glayer = new MapImageLayer({\r\n                        url: src,\r\n                        opacity: gtrans\r\n\r\n                    });\r\n                    gmaplayer.layers.add(glayer);\r\n                });\r\n\r\n                self.layerRef = gmaplayer;\r\n                self.state.map.add(gmaplayer);\r\n            }\r\n\r\n            if (self.props.type === \"dynamic\") {\r\n\r\n                var trans = 1;\r\n                if (self.props.transparency) {\r\n                    trans = Number.parseFloat(self.props.transparency);\r\n                }\r\n\r\n                var maplayer = new MapImageLayer({\r\n                    url: self.props.src,\r\n                    opacity: trans\r\n\r\n                });\r\n\r\n                if (self.props.childsrc);\r\n\r\n                if (self.props.title) {\r\n\r\n                    maplayer.title = self.props.title;\r\n                }\r\n                maplayer.when(() => {\r\n\r\n\r\n                    var layerids = [];\r\n                    maplayer.allSublayers.items.forEach(sublayer => {\r\n                        layerids.push(sublayer.id);\r\n                    });\r\n                    layerids.reverse();\r\n\r\n                    self.identifyTask = new IdentifyTask(self.props.src);\r\n                    self.params = new IdentifyParameters();\r\n                    self.params.tolerance = 3;\r\n                    self.params.layerIds = layerids;\r\n                    self.params.layerOption = \"visible\";\r\n                    self.params.width = self.state.view.width;\r\n                    self.params.height = self.state.view.height;\r\n                    self.params.returnGeometry = true;\r\n                    self.params.returnGeometry = self.state.blockSelect;\r\n\r\n                    //  console.log(self.params);\r\n\r\n                });\r\n\r\n                self.layerRef = maplayer;\r\n                self.state.map.add(maplayer);\r\n            }\r\n\r\n\r\n            if (self.props.type === \"image\") {\r\n\r\n\r\n                var imagelayer = new ImageryLayer({\r\n                    url: self.props.src,\r\n                    format: \"jpgpng\" // server exports in either jpg or png format\r\n                });\r\n                self.layerRef = imagelayer;\r\n                self.state.map.add(imagelayer);\r\n\r\n            }\r\n\r\n            if (self.props.type === \"geojson\") {\r\n\r\n                var geojsonLayer = new GraphicsLayer({ title: 'GeoJSON Layer', listMode: \"hide\" });\r\n                // var geojsonLayer = new GeoJSONLayer({\r\n                //     //source: self.props.src,\r\n                //     //copyright: \"USGS Earthquakes\",\r\n                //     //popupTemplate: template\r\n                //   });\r\n                var dataarr = [];\r\n\r\n                if (typeof self.props.src === 'object') {\r\n                    if (self.props.src.features) {\r\n                        dataarr = self.props.src.features;\r\n                    }\r\n                    else {\r\n                        dataarr = self.props.src;\r\n                    }\r\n                }\r\n\r\n                if (self.props.title) {\r\n\r\n                    geojsonLayer.title = self.props.title;\r\n                }\r\n\r\n\r\n                dataarr.forEach(obj => {\r\n                    //var esrijson = geojsonToArcGIS(obj);\r\n                    if (obj.geometry.type === \"Point\") {\r\n\r\n                        var popupTemplate = {\r\n                            title: \"{Name}\",\r\n                            content: self.props.template,\r\n                        };\r\n\r\n\r\n                        var point = new Point({\r\n                            longitude: obj.geometry.coordinates[1],\r\n                            latitude: obj.geometry.coordinates[0],\r\n\r\n                        });\r\n\r\n                        // Create a symbol for drawing the point\r\n                        var markerSymbol = new SimpleMarkerSymbol({\r\n                            color: [226, 119, 40],\r\n                            outline: {\r\n                                color: [255, 255, 255],\r\n                                width: 1\r\n                            }\r\n                        });\r\n\r\n                        // Create a graphic and add the geometry and symbol to it\r\n                        var pointGraphic = new Graphic({\r\n                            geometry: point,\r\n                            symbol: markerSymbol,\r\n                            attributes: obj.properties,\r\n                            popupTemplate: popupTemplate,\r\n                            // extent : new Extent().centerAt(point)\r\n                        });\r\n\r\n                        // Add the graphic to the view\r\n                        geojsonLayer.graphics.add(pointGraphic);\r\n                    }\r\n\r\n\r\n                })\r\n\r\n\r\n                self.layerRef = geojsonLayer;\r\n                self.state.map.add(geojsonLayer);\r\n                // var imagelayer = new ImageryLayer({\r\n                //     url: self.props.src,\r\n                //     format: \"jpgpng\" // server exports in either jpg or png format\r\n                // });\r\n                // self.layerRef = imagelayer;\r\n                // self.state.map.add(imagelayer);\r\n\r\n            }\r\n\r\n\r\n            self.layerRef.when(function () {\r\n                setTimeout(() => {\r\n                    var evt = new Event('ready', { bubbles: true });\r\n                    Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n                    if (self.props.onready) {\r\n                        self.props.onready(evt);\r\n                    }\r\n                }, 500)\r\n            });\r\n\r\n            //this.state.view.graphics.add(graphic);\r\n        }); //.catch ((err) => console.error(err));\r\n    }\r\n\r\n    zoomto() {\r\n        if (this.layerRef.graphics) {\r\n            this.state.view.goTo(this.layerRef.graphics.items);\r\n        }\r\n\r\n    }\r\n\r\n    renderPopup(feature, result) {\r\n\r\n\r\n        if (result.layerId !== undefined && this.layerRenderers) {\r\n            var popuprender = this.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n\r\n            if (popuprender && popuprender.props.popup !== undefined) {\r\n                var ele = popuprender.props.popup(feature, result);\r\n\r\n\r\n\r\n\r\n                if (ele) {\r\n                    var workingdiv = document.createElement('div');\r\n                    ReactDOM.render(ele, workingdiv);\r\n                    return workingdiv;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        var popupText = \"\";\r\n        var atts = Object.getOwnPropertyNames(feature.attributes);\r\n        atts.forEach(att => {\r\n            if (att === 'layerName') {\r\n\r\n            }\r\n            else {\r\n                popupText += `<b>${att}</b> : ${feature.attributes[att]}<br/>`;\r\n            }\r\n        });\r\n\r\n        return popupText;\r\n\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n    identify(event, callback) {\r\n\r\n        var self = this;\r\n        if (this.props.type === \"geojson\") {\r\n\r\n            this.state.view.hitTest(event).then((htresponse) => {\r\n\r\n                // console.log(\"Identify on geojson\");\r\n                //console.log(htresponse);\r\n                var mapPoint = event.mapPoint;\r\n                var response = {\r\n                    layer: self.layerRef,\r\n                    results: htresponse.results.map(r => { return { feature: r.graphic, layerName: self.layerRef.title }; }),\r\n                }\r\n                callback(response)\r\n            });\r\n\r\n        }\r\n        else {\r\n\r\n\r\n            if (!this.params) { callback(null); return; }\r\n\r\n            this.params.geometry = event.mapPoint;\r\n            this.params.mapExtent = this.state.view.extent;\r\n            this.params.returnGeometry = true;\r\n            //document.getElementById(\"viewDiv\").style.cursor = \"wait\";\r\n            this.identifyTask.execute(this.params).then(function (response) {\r\n\r\n                callback(response);\r\n\r\n\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLayer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { arcgisToGeoJSON } from '@esri/arcgis-to-geojson-utils';\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport ArcticMapLayer from './ArcticMapLayer';\r\n//import { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\nimport './ArcticMapEdit.css'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\n\r\nclass ArcticMapEdit extends React.Component {\r\n    static displayName = 'ArcticMapEdit';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        props.map.editor = this;\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            hideEditors: false,\r\n            editing: false,\r\n            showUploading: false,\r\n        };\r\n\r\n        this.uploadPanel = React.createRef();\r\n    }\r\n\r\n\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n\r\n\r\n        var self = this;\r\n        loadModules([\"esri/Graphic\",\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/widgets/Sketch/SketchViewModel\",\r\n            \"esri/geometry/Geometry\",\r\n            \"esri/geometry/Polygon\"\r\n        ]).then(([\r\n            Graphic,\r\n            GraphicsLayer,\r\n            SketchViewModel,\r\n            Geometry,\r\n            Polygon\r\n        ]) => {\r\n            const tempGraphicsLayer = new GraphicsLayer({ title: 'Edit Layer', listMode: \"hide\" });\r\n            self.setState({ tempGraphicsLayer });\r\n\r\n            self.state.map.add(tempGraphicsLayer);\r\n\r\n\r\n            const sketchViewModel = new SketchViewModel({\r\n                view: self.state.view,\r\n                layer: tempGraphicsLayer,\r\n                pointSymbol: {\r\n                    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n                    style: \"circle\",\r\n                    color: \"yellow\",\r\n                    size: \"3px\",\r\n                    outline: { // autocasts as new SimpleLineSymbol()\r\n                        color: [255, 255, 255],\r\n                        width: 3\r\n                    }\r\n                },\r\n                polylineSymbol: {\r\n                    type: \"simple-line\", // autocasts as new SimpleLineSymbol()\r\n                    color: \"yellow\",\r\n                    width: \"3\",\r\n                    style: \"solid\"\r\n                },\r\n                polygonSymbol: {\r\n                    type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                    color: \"rgba(224, 206, 69, 0.8)\",\r\n                    style: \"solid\",\r\n                    outline: {\r\n                        color: \"yellow\",\r\n                        width: 3\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            self.setState({ tempGraphicsLayer, sketchViewModel });\r\n\r\n            self.setUpClickHandler.bind(this);\r\n\r\n            sketchViewModel.on(\"create\", (event) => {\r\n\r\n                if (event.state === 'complete') {\r\n\r\n                    tempGraphicsLayer.graphics = [event.graphic];\r\n                    if (this.props.single) {\r\n\r\n                        this.setState({ hideEditors: true });\r\n                    }\r\n\r\n\r\n\r\n                    setTimeout(() => {\r\n\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphic.geometry.toJSON()), datajson: event.graphic.toJSON(), editing: false });\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n            sketchViewModel.on(\"update\", (event) => {\r\n                self.setState({ editing: true });\r\n                if (event.state === 'complete' || event.state === 'cancel') {\r\n                    // const graphic = new Graphic({\r\n                    //     geometry: event.graphic.geometry,\r\n                    //     symbol: event.graphic.symbol\r\n                    // });\r\n                    //tempGraphicsLayer.add(event.graphic);\r\n                    // if (this.props.single) {\r\n                    //     console.log(\"Added one feature\");\r\n                    //     this.setState({ hideEditors: true });\r\n                    // }\r\n\r\n                    setTimeout(() => {\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphics[0].geometry.toJSON()), datajson: event.graphics[0].toJSON(), });\r\n                        //this.geojson = event.geometry;\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n                }\r\n            });\r\n\r\n            // Listen the sketchViewModel's update-complete and update-cancel events\r\n            sketchViewModel.on(\"update-complete\", (event) => {\r\n                event.graphic.geometry = event.geometry;\r\n                tempGraphicsLayer.graphics = [event.graphic];\r\n                //tempGraphicsLayer.add(event.graphic);\r\n\r\n                // set the editGraphic to null update is complete or cancelled.\r\n                self.state.editGraphic = null;\r\n\r\n                console.log(\"UPDATED\");\r\n\r\n            });\r\n\r\n\r\n\r\n            this.top_right_node = document.createElement(\"div\");\r\n            self.state.view.ui.add(this.top_right_node, \"top-right\");\r\n\r\n            self.setState({ loaded: true })\r\n\r\n            //self.setUpClickHandler();\r\n\r\n\r\n            // scoped methods\r\n            self.setEditFeature = (feature, nofire, type) => {\r\n                if (nofire === null) {\r\n                    nofire = false;\r\n                }\r\n\r\n                if (type === null) {\r\n                    type = \"polygon\";\r\n                }\r\n\r\n\r\n                if (!feature.geometry.type) {\r\n                    if (type === \"polygon\") {\r\n\r\n                        feature.geometry = new Polygon(feature.geometry);\r\n                        feature.geometry.type = \"polygon\";\r\n                    }\r\n                }\r\n\r\n                this.state.sketchViewModel.cancel();\r\n                this.state.tempGraphicsLayer.removeAll();\r\n                this.setState({ hideEditors: false, geojson: null });\r\n\r\n\r\n                var graphic = null;\r\n                if (!feature.geometry.toJSON && feature.symbol) {\r\n                    graphic = Graphic.fromJSON(feature);\r\n\r\n                }\r\n                else {\r\n\r\n\r\n\r\n                    graphic = new Graphic({\r\n                        geometry: feature.geometry,\r\n                        symbol: this.state.sketchViewModel.polygonSymbol\r\n                    });\r\n\r\n                }\r\n\r\n                if (graphic.geometry === null) {\r\n                    graphic.geometry = feature.geometry;\r\n                }\r\n\r\n                //console.log(feature);\r\n                //this.state.tempGraphicsLayer.add(graphic);\r\n                this.state.tempGraphicsLayer.graphics = [graphic];\r\n                if (this.props.single) {\r\n\r\n                    this.setState({ hideEditors: true });\r\n                }\r\n\r\n                self.state.view.goTo(graphic);\r\n\r\n\r\n                var geometry = feature.geometry;\r\n                if (geometry && !geometry.toJSON) {\r\n                    geometry = Geometry.fromJSON(geometry);\r\n                }\r\n\r\n                this.setState({ geojson: arcgisToGeoJSON(geometry.toJSON()), datajson: graphic.toJSON(), });\r\n\r\n                if (nofire === true) {\r\n\r\n                }\r\n                else {\r\n                    self.firenewfeature();\r\n                }\r\n\r\n            };\r\n\r\n\r\n            self.setEditFeature = self.setEditFeature.bind(self);\r\n\r\n\r\n\r\n            self.setGeoJson = (geojson) => {\r\n                //var esrijson = geojsonToArcGIS(geojson);\r\n\r\n\r\n            }\r\n            self.setGeoJson = self.setGeoJson.bind(self);\r\n\r\n\r\n        }); //.catch ((err) => console.error(err));\r\n\r\n\r\n    }\r\n\r\n\r\n    firenewfeature() {\r\n        var self = this;\r\n        var evt = new Event('newfeature', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: this, enumerable: true });\r\n        evt.data = self.state.datajson;\r\n\r\n        if (self.props.onnewfeature) {\r\n            self.props.onnewfeature(evt);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            self.setState({ editing: false });\r\n        }, 200);\r\n    }\r\n\r\n    addPointClick() {\r\n        this.state.sketchViewModel.create(\"point\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n    addLineClick() {\r\n        this.state.sketchViewModel.create(\"polyline\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addPolyClick() {\r\n        this.state.sketchViewModel.create(\"polygon\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addRecClick() {\r\n        this.state.sketchViewModel.create(\"rectangle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addCircleClick() {\r\n        this.state.sketchViewModel.create(\"circle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n\r\n\r\n    fileUploaded(evt) {\r\n        var self = this;\r\n        var fileName = evt.target.value.toLowerCase();\r\n        console.log(fileName);\r\n        if (fileName.indexOf(\".zip\" !== -1)) {\r\n            // console.log(\"addEventListener\", self);\r\n            self.processShapeFile(fileName, evt.target);\r\n        } else {\r\n            document.getElementById(\"upload-status\").innerHTML +\r\n                '<p style=\"color:red\">Add shapefile as .zip file</p>'\r\n        }\r\n\r\n\r\n    }\r\n\r\n    processShapeFile(fileName, form) {\r\n\r\n\r\n        var self = this;\r\n        self.uploadPanel.current.toggle();\r\n        console.log(\"Process Shape File\", fileName);\r\n        var name = fileName.split(\".\");\r\n        name = name[0].replace(\"c:\\\\fakepath\\\\\", \"\");\r\n\r\n        var parms = {\r\n            name: name,\r\n            targetSR: self.state.view.extent.spatialReference,\r\n            maxRecordCount: 1000,\r\n            enforceInputFileSizeLimit: true,\r\n            enforceOutputJsonSizeLimit: true,\r\n        };\r\n\r\n        parms.generalize = true;\r\n        parms.maxAllowableOffset = 10;\r\n        parms.reducePrecision = true;\r\n        parms.numberOfDigitsAfterDecimal = 0;\r\n        var myContent = {\r\n            filetype: \"shapefile\",\r\n            publishParameters: JSON.stringify(parms),\r\n            f: \"json\",\r\n            'content-type': 'multipart/form-data',\r\n        };\r\n\r\n        var portalUrl = \"https://www.arcgis.com\";\r\n\r\n        var query = Object.keys(myContent)\r\n            .map(k => escape(k) + '=' + escape(myContent[k]))\r\n            .join('&');\r\n\r\n\r\n\r\n        loadModules(['esri/request'])\r\n            .then(([request]) => {\r\n                request(portalUrl + \"/sharing/rest/content/features/generate\",\r\n                    {\r\n                        query: myContent,\r\n                        body: new FormData(form.form),\r\n                        //body: document.getElementById(\"uploadForm\"),\r\n                        responseType: \"json\"\r\n                    })\r\n                    .then(function (response) {\r\n                        var layerName = response.data.featureCollection.layers[0].layerDefinition.name;\r\n                        self.addShapefileToMap(response.data.featureCollection, layerName);\r\n                    })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    addShapefileToMap(featureCollection, layerName) {\r\n        var self = this;\r\n        loadModules(['esri/Graphic', 'esri/layers/FeatureLayer', 'esri/layers/support/Field', 'esri/PopupTemplate'])\r\n            .then(([Graphic, FeatureLayer, Field, PopupTemplate]) => {\r\n                var sourceGraphics = [];\r\n                var layers = featureCollection.layers.map(function (layer) {\r\n\r\n                    var graphics = layer.featureSet.features.map(function (feature) {\r\n                        console.log(\"layer.featureSet.feature.map\", feature);\r\n                        return Graphic.fromJSON(feature);\r\n                    });\r\n                    sourceGraphics = sourceGraphics.concat(graphics);\r\n                    var featureLayer = new FeatureLayer({\r\n                        title: \"Shape File: \" + layerName,\r\n                        //objectIDField: \"FID\",\r\n                        source: graphics,\r\n                        fields: layer.layerDefinition.fields.map(function (field) {\r\n                            return Field.fromJSON(field);\r\n                        })\r\n                    });\r\n                    return featureLayer;\r\n\r\n                });\r\n\r\n                // var popupTemplate = new PopupTemplate({\r\n                //     title: layerName,\r\n                //     content: [\r\n                //         {\r\n                //             type: \"fields\",\r\n                //             fieldInfos: [\r\n                //                 {\r\n                //                     fieldName: \"FID\",\r\n                //                     label: \"objectIDField\"\r\n                //                 }\r\n\r\n                //             ]\r\n                //         }\r\n                //     ]\r\n                // })\r\n                layers[0].title = layerName;\r\n                //layers[0].popupTemplate = popupTemplate;\r\n\r\n                self.state.map.addMany(layers);\r\n\r\n                self.state.view.goTo(sourceGraphics);\r\n\r\n                var props = {\r\n                    title: \"Shape File: \" + layerName,\r\n                    transparency: \".32\",\r\n                    identmaxzoom: \"13\",\r\n                    blockidentselect: true,\r\n                    type: \"geojson\",\r\n                    src: \"\",\r\n                    map: self.state.map,\r\n                    view: self.state.view\r\n                };\r\n\r\n                var aml = new ArcticMapLayer(props);\r\n                aml.layerRef = layers[0];\r\n                aml.context = window._map.layers[0].context;\r\n                aml.layerRef.title = props.title;\r\n                //aml.componentDidMount();\r\n                //console.log(\"aml\", aml);\r\n                self.state.map.amlayers.push(aml);\r\n                //window._map.props.childern.push(aml);\r\n              \r\n                //self.setState({ fileLayer:  aml });\r\n\r\n            });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    reset() {\r\n        this.state.sketchViewModel.cancel();\r\n        this.state.tempGraphicsLayer.removeAll();\r\n        this.setState({ hideEditors: false, geojson: null });\r\n\r\n    }\r\n\r\n    widgetRender() {\r\n        return <div id=\"topbar\">\r\n            {this.state.hideEditors === false &&\r\n                <span>\r\n                    {this.props.point &&\r\n\r\n                        <ArcticMapButton esriicon=\"blank-map-pin\" onclick={this.addPointClick.bind(this)} title=\"Draw point\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.line &&\r\n\r\n                        <ArcticMapButton esriicon=\"polyline\" onclick={this.addLineClick.bind(this)} title=\"Draw polyline\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.polygon &&\r\n\r\n                        <ArcticMapButton esriicon=\"polygon\" onclick={this.addPolyClick.bind(this)} title=\"Draw polygon\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.square &&\r\n\r\n                        <ArcticMapButton esriicon=\"checkbox-unchecked\" onclick={this.addRecClick.bind(this)} title=\"Draw rectangle\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.circle &&\r\n                        <ArcticMapButton esriicon=\"radio-unchecked\" onclick={this.addCircleClick.bind(this)} title=\"Draw circle\" ></ArcticMapButton>\r\n\r\n                    }\r\n                    {this.props.upload &&\r\n                        <ArcticMapPanel esriicon=\"upload\" title=\"Upload Polygon\" ref={this.uploadPanel}  >\r\n                            <br />\r\n                            <form encType=\"multipart/form-data\" method=\"post\" id=\"uploadForm\">\r\n                                <div className=\"field\">\r\n                                    <label className=\"file-upload\">\r\n                                        <p><strong>Select File</strong></p>\r\n                                        <input type=\"file\" name=\"file\" id=\"inFile\" onChange={this.fileUploaded.bind(this)} />\r\n                                    </label>\r\n                                </div>\r\n                            </form>\r\n                            <br />\r\n                            <span id=\"upload-status\"></span>\r\n\r\n                        </ArcticMapPanel>}\r\n                </span>\r\n            }\r\n            <ArcticMapButton esriicon=\"trash\" onclick={this.reset.bind(this)} title=\"Clear graphics\" ></ArcticMapButton>\r\n\r\n\r\n\r\n\r\n        </div>;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.top_right_node) {\r\n            ReactDOM.render(\r\n                this.widgetRender(),\r\n                this.top_right_node\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        //return (<h2>Test</h2>);\r\n\r\n\r\n        return (<span>\r\n          {this.state.fileLayer}\r\n\r\n\r\n\r\n        </span>);\r\n    }\r\n\r\n    addGraphic(event) {\r\n        // Create a new graphic and set its geometry to\r\n        // `create-complete` event geometry.\r\n        // const graphic = new Graphic({\r\n        //     geometry: event.geometry,\r\n        //     symbol: sketchViewModel.graphic.symbol\r\n        // });\r\n        // tempGraphicsLayer.add(graphic);\r\n    }\r\n\r\n    updateGraphic(event) {\r\n        // event.graphic is the graphic that user clicked on and its geometry\r\n        // has not been changed. Update its geometry and add it to the layer\r\n        // event.graphic.geometry = event.geometry;\r\n        // tempGraphicsLayer.add(event.graphic);\r\n\r\n        // // set the editGraphic to null update is complete or cancelled.\r\n        // editGraphic = null;\r\n    }\r\n\r\n    setUpClickHandler() {\r\n        var self = this;\r\n        self.state.view.on(\"click\", function (event) {\r\n            event.stopPropagation();\r\n            console.log(\"HERE!!\")\r\n            self.state.view.hitTest(event).then(function (response) {\r\n                var results = response.results;\r\n                // Found a valid graphic\r\n                if (results.length && results[results.length - 1].graphic) {\r\n                    // Check if we're already editing a graphic\r\n                    // if (!self.state.editGraphic) {\r\n                    // Save a reference to the graphic we intend to update\r\n                    self.state.editGraphic = results[results.length - 1].graphic;\r\n                    // Remove the graphic from the GraphicsLayer\r\n                    // Sketch will handle displaying the graphic while being updated\r\n                    // self.state.tempGraphicsLayer.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    // self.state.view.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    //self.state.tempGraphicsLayer.remove(self.state.editGraphic);\r\n                    self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n                    //self.state.sketchViewModel.updateGraphics = [self.state.editGraphic];\r\n\r\n                    self.state.sketchViewModel.update([self.state.editGraphic]);\r\n\r\n                    //self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n\r\n                    //}\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    setActiveButton(selectedButton) {\r\n        // focus the view to activate keyboard shortcuts for sketching\r\n        // view.focus();\r\n        // var elements = document.getElementsByClassName(\"active\");\r\n        // for (var i = 0; i < elements.length; i++) {\r\n        //     elements[i].classList.remove(\"active\");\r\n        // }\r\n        // if (selectedButton) {\r\n        //     selectedButton.classList.add(\"active\");\r\n        // }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapEdit;","// WY060140N0660W0SN180ANENE\r\n\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport style from './ArcticMapLLDSearch.css';\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\nclass ArcticMapLLDSearch extends React.Component {\r\nstatic displayName = 'ArcticMapLLDSearch';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules(['esri/Graphic',\r\n\r\n\r\n            'esri/geometry/Geometry',\r\n            'esri/geometry/Polygon',\r\n            \"esri/widgets/Search/SearchSource\",\r\n\r\n        ]).then(([\r\n            Graphic,\r\n\r\n\r\n            Geometry,\r\n            Polygon,\r\n            SearchSource,\r\n\r\n        ]) => {\r\n\r\n\r\n            //var elestring = this.createElementFromHTML( `<input type=\"text\" placeholder=\"Find address or place\" aria-label=\"Search\" autocomplete=\"off\" tabindex=\"0\" class=\"esri-input esri-search__input\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-owns=\"1687b00a338-widget-1-suggest-menu\" role=\"textbox\" data-node-ref=\"_inputNode\" title=\"Find address or place\">`);\r\n\r\n            self.top_right_node = document.createElement(\"div\");\r\n\r\n            self.Graphic = Graphic;\r\n            self.Geometry = Geometry;\r\n            self.Polygon = Polygon;\r\n\r\n            self.state.view.ui.add(self.top_right_node, {\r\n                position: \"top-right\",\r\n                index: 0\r\n            });\r\n\r\n\r\n\r\n            // ReactDOM.render(\r\n            //     self.widgetRender(),\r\n            //     self.top_right_node\r\n            // );\r\n\r\n\r\n            var url = \"https://api-adresse.data.gouv.fr/\";\r\n\r\n            self.search = () => {\r\n                return new SearchSource({\r\n                    name: 'Legal Land Description',\r\n                    placeholder: \"example: NV 21 T38N R56E SEC 10 ALIQ SESW\",\r\n                   \r\n                    getSuggestions: function (params) {\r\n                 \r\n\r\n                        return fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${params.suggestTerm.replace(/ /g, \"+\")}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n                       \r\n                            return data.features.map(function (feature) {\r\n                                return {\r\n                                    key: \"name\",\r\n                                    text: feature.attributes.landdescription,\r\n                                    sourceIndex: params.sourceIndex\r\n                                };\r\n                            });\r\n                        });\r\n\r\n\r\n                    },\r\n                \r\n                    getResults: function (params) {\r\n                     \r\n\r\n\r\n                        return fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${params.suggestResult.text.replace(/ /g, \"+\")}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n                        \r\n                            return data.features.map(function (feature) {\r\n\r\n\r\n                                var outfeature = Graphic.fromJSON(feature);\r\n                                \r\n                          \r\n\r\n                                return {\r\n                                    key: \"name\",\r\n                                    text: feature.attributes.landdescription,\r\n                                    sourceIndex: params.sourceIndex,\r\n                                    feature: outfeature,\r\n\r\n                                    name: feature.attributes.landdescription\r\n                                };\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n        });\r\n    }\r\n\r\n    searchLLD(event) {\r\n\r\n        var self = this;\r\n\r\n        fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${this.state.searchinput}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n   \r\n\r\n\r\n            var popupresults = data.features.map(function (feature) {\r\n\r\n                feature.geometry = self.Polygon.fromJSON(feature.geometry);\r\n\r\n                feature = new self.Graphic(feature);\r\n\r\n\r\n                var displayValue = feature.attributes.landdescription;\r\n\r\n\r\n                feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n                    title: 'Legal Land Description',\r\n                    content: `<b>LLD</b>: ${displayValue}`,\r\n                    actions: [{ title: \"Select\", id: \"select-action\" }]\r\n                }\r\n\r\n\r\n\r\n                return feature\r\n            })\r\n\r\n            if (popupresults.length > 0) {\r\n                self.state.view.popup.open({\r\n                    features: popupresults,\r\n                    location: event.mapPoint\r\n                })\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n\r\n        })\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({ searchinput: event.target.value });\r\n    }\r\n\r\n    widgetRender() {\r\n        return <div className={style.lldsearchbar}>\r\n\r\n\r\n            <div style={{ display: 'inline-block', height: '32px', marginTop: '0px' }}  >\r\n\r\n\r\n                <input style={{ display: 'inline-block', height: '32px', verticalAlign: 'top' }} value={this.state.searchinput} onChange={this.handleChange} type=\"text\" placeholder=\"Find legal land description\" aria-label=\"Search\" className=\"esri-input\" title=\"Find leagal land desription\" />\r\n\r\n                <div style={{ display: 'inline-block', width: '32px', height: '32px', verticalAlign: 'top' }} role=\"button\" title=\"Search\" className=\"esri-search__submit-button esri-widget--button\" onClick={this.searchLLD.bind(this)}>\r\n                    <span style={{ display: 'block', paddingTop: '8px' }} aria-hidden=\"true\" role=\"presentation\" className=\"esri-icon-search\"></span>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        </div>;\r\n    }\r\n\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLLDSearch;","import React from 'react';\r\nclass ArcticMapLayerPopup extends React.Component {\r\n    static displayName = 'ArcticMapLayerPopup';\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n        \r\n        return <span></span>;\r\n\r\n    }\r\n\r\n    renderPopup(context){\r\n        if(this.props.popup){\r\n            return this.props.popup(context);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default ArcticMapLayerPopup;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass ArcticMapControlArea extends React.Component {\r\n    static displayName = 'ArcticMapControlArea';\r\n    constructor(props) {\r\n        super(props)\r\n        this.controlNode = document.createElement(\"div\");\r\n        this.props.view.ui.add(this.controlNode, this.props.location);\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        if (this.controlNode) {\r\n            ReactDOM.render(this.widgetRender(), this.controlNode);\r\n        }\r\n    }\r\n\r\n    widgetRender() {\r\n        return (<span className='arcticmap-area'>{this.props.children}</span>)\r\n    }\r\n    render(){\r\n        return(<span></span>);\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapControlArea;"],"names":["ArcticMap","props","state","lat","lng","basemap","Number","parseInt","sr","handleMapLoad","bind","handleMapClick","layers","self","index","childrenElements","children","React","Children","map","child","type","displayName","cloneElement","c","push","sort","l","reverse","position","right","bottom","hideBasemapButton","handleShowBasemaps","event","view","ui","add","basemapGallery","setState","htmlString","div","document","createElement","innerHTML","trim","firstChild","json","nofire","editor","setEditFeature","amlayers","centerSplit","center","split","parseFloat","zoom","then","LayerList","Locate","BasemapGallery","Home","Zoom","Search","Polygon","Request","Point","_request","_map","request","layerList","item","panel","popup","dockEnabled","dockOptions","watch","graphic","graphicTemplate","getEffectivePopupTemplate","actions","items","visible","undefined","viewModel","on","action","id","target","selectedFeature","close","remove","editing","identresults","loading","identLayers","filter","layer","mapzoom","identMaxZoom","concat","eachSeries","cb","identify","results","err","ir","forEach","res","acres","feature","geometry","geometryEngine","geodesicArea","reduce","a","b","flat","r1","r2","popupresults","result","layerName","attributes","popupTemplate","renderPopup","title","length","currentSearchResultFeature","open","mapPoint","setCurrentPopup","e","getElementsByClassName","style","cursor","locate","locateBtn","newValue","oldValue","property","object","home","homeBtn","search","searchitems","ele","constructor","name","toLowerCase","includes","searchsources","i","searchWidget","evt","getEditFeature","tempGraphicsLayer","graphics","Event","bubbles","defineProperty","value","enumerable","onmapready","Component","ArcticMapButton","esriicon","fireclick","onclick","useEsriIcon","esriClassName","arcticButton","height","width","styles","ArcticMapPanel","toggle","currvalue","mapFrame","renderEle","appendChild","renderPanel","className","rightWidgetFull","marginTop","left","top","widgetContainer","render","eleempty","ArcticMapLayer","blockIdentSelect","Graphic","FeatureLayer","MapImageLayer","ImageryLayer","GraphicsLayer","IdentifyTask","IdentifyParameters","SimpleMarkerSymbol","GroupLayer","layerRenderers","featureLayer","src","layerRef","gtrans","transparency","srcsplit","gmaplayer","glayer","trans","maplayer","childsrc","when","layerids","allSublayers","sublayer","identifyTask","params","tolerance","layerIds","layerOption","returnGeometry","blockSelect","imagelayer","geojsonLayer","listMode","dataarr","babelHelpers.typeof","features","obj","template","point","coordinates","markerSymbol","pointGraphic","properties","onready","goTo","layerId","popuprender","find","layerid","toString","workingdiv","popupText","atts","Object","getOwnPropertyNames","att","callback","hitTest","htresponse","response","r","mapExtent","extent","execute","ArcticMapEdit","uploadPanel","createRef","SketchViewModel","Geometry","sketchViewModel","setUpClickHandler","single","hideEditors","geojson","arcgisToGeoJSON","toJSON","datajson","firenewfeature","editGraphic","log","top_right_node","loaded","cancel","removeAll","symbol","fromJSON","polygonSymbol","setGeoJson","data","onnewfeature","create","mode","fileName","indexOf","processShapeFile","getElementById","form","current","replace","parms","spatialReference","generalize","maxAllowableOffset","reducePrecision","numberOfDigitsAfterDecimal","myContent","JSON","stringify","portalUrl","query","keys","escape","k","join","FormData","featureCollection","layerDefinition","addShapefileToMap","Field","PopupTemplate","sourceGraphics","featureSet","fields","field","addMany","aml","context","window","addPointClick","line","addLineClick","polygon","addPolyClick","square","addRecClick","circle","addCircleClick","upload","fileUploaded","reset","widgetRender","fileLayer","stopPropagation","update","selectedButton","ArcticMapLLDSearch","handleChange","SearchSource","fetch","suggestTerm","landdescription","sourceIndex","suggestResult","text","outfeature","searchinput","displayValue","lldsearchbar","display","verticalAlign","searchLLD","paddingTop","ArcticMapLayerPopup","ArcticMapControlArea","controlNode","location"],"mappings":";;;;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;EAC7B,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;EAC/B,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;;EAE5B,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;;EAExD,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EACrE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;EAC5C,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;;EAExB,IAAI,QAAQ,KAAK,KAAK,EAAE;IACtB,IAAI,IAAI,CAAC,UAAU,EAAE;MACnB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC3C,MAAM;MACL,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KACzB;GACF,MAAM;IACL,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;GACzB;;EAED,IAAI,KAAK,CAAC,UAAU,EAAE;IACpB,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;GAChC,MAAM;IACL,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;GACjD;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IClBKA;;;qBAEQC,KAAZ,EAAmB;;;qHACXA,KADW;;UAEZC,KAAL,GAAa;WACN,IADM;YAEL,IAFK;yBAGQ,KAHR;eAIF,KAJE;WAKND,MAAME,GALA;WAMNF,MAAMG,GANA;eAOFH,MAAMI,OAAN,IAAiB,QAPf;UAQPC,OAAOC,QAAP,CAAgBN,MAAMO,EAAN,IAAY,QAA5B;KARN;;UAWKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,OAArB;UACKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,OAAtB;UACKE,MAAL,GAAc,EAAd;;;;;;6BAKO;UACHC,OAAO,IAAX;UACIC,QAAQ,CAAZ;WACKF,MAAL,GAAc,EAAd;;WAEKG,gBAAL,GAAwB,EAAxB;;UAEIC,WAAWC,MAAMC,QAAN,CAAeC,GAAf,CAAmB,KAAKlB,KAAL,CAAWe,QAA9B,EAAwC,UAAUI,KAAV,EAAiB;YAClEA,MAAMC,IAAN,CAAWC,WAAX,KAA2B,gBAA/B,EAAiD;iBACxCL,MAAMM,YAAN,CAAmBH,KAAnB,EAA0B;iBAC1B,aAACI,CAAD,EAAO;kBAAMA,CAAJ,EAAO;qBAAOZ,MAAL,CAAYa,IAAZ,CAAiBD,CAAjB;;;WADlB,CAAP;SADF,MAIO,IAAIJ,MAAMC,IAAN,CAAWC,WAAX,KAA2B,eAA/B,EAAgD;;iBAE9CL,MAAMM,YAAN,CAAmBH,KAAnB,EAA0B;;;WAA1B,CAAP;;;;;;;;;;aAcG;mBACIH,MAAMM,YAAN,CAAmBH,KAAnB,EAA0B;;mBAE1B,aAACI,CAAD,EAAO;oBAAMA,CAAJ,EAAO;uBAAOT,gBAAL,CAAsBU,IAAtB,CAA2BD,CAA3B;iBAAiC,OAAO,WAAYV,OAAnB;;aAFnD,CAAP;;OAtBW,CAAf;;UA6BIE,QAAJ,EAAc;mBACDA,SAASU,IAAT,CAAc;iBAAKC,EAAEN,IAAF,CAAOC,WAAP,KAAuB,eAA5B;SAAd,EAA2DM,OAA3D,EAAX;OADF,MAEO;mBACO,gCAAZ;;;;;;;;aAWK;uBAAA;UAAK,SAAM,iBAAX;yBACU,EAAEvB,SAAS,KAAKH,KAAL,CAAWG,OAAtB,EADV,EAC2C,QAAQ,KAAKI,aADxD,EACuE,SAAS,KAAKE,cADrF;gBAAA;;;YAGA,IAAG,WAAR,EAAoB,OAAO,EAAEkB,UAAU,UAAZ,EAAwBC,OAAO,MAA/B,EAAuCC,QAAQ,MAA/C,EAA3B;eACQ7B,KAAL,CAAW8B,iBAAX,KAAiC,KAAjC,IACC,gCAAQ,WAAU,gCAAlB,EAAmD,IAAG,aAAtD;kBACO,QADP,EACgB,OAAM,YADtB,EACmC,SAAS,KAAKC,kBAAL,CAAwBvB,IAAxB,CAA6B,IAA7B,CAD5C;;OALN;;;;uCAmBiBwB,OAAO;WACnBhC,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuB,KAAKC,cAA5B,EAA4C;kBAChC;OADZ;WAGKC,QAAL,CAAc,EAAEP,mBAAmB,IAArB,EAAd;;;;mCAGaE,OAAO;;;;;0CAIAM,YAAY;UAC5BC,MAAMC,SAASC,aAAT,CAAuB,KAAvB,CAAV;UACIC,SAAJ,GAAgBJ,WAAWK,IAAX,EAAhB;;;aAGOJ,IAAIK,UAAX;;;;4BAIMC,MAAMC,QAAQ3B,MAAM;UACtB2B,WAAW,IAAf,EAAqB;iBACV,KAAT;;;UAGE3B,SAAS,IAAb,EAAmB;eACV,SAAP;;;UAKE,KAAKnB,KAAL,CAAWiB,GAAX,CAAe8B,MAAnB,EAA2B;aACpB/C,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,CAAsBC,cAAtB,CAAqCH,IAArC,EAA2CC,MAA3C,EAAmD3B,IAAnD;;;;;4BAKI0B,MAAM;UACR,KAAK7C,KAAL,CAAWiB,GAAX,CAAe8B,MAAnB,EAA2B;aACpB/C,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,CAAsBC,cAAtB,CAAqCH,IAArC,EAA2C,IAA3C;;;;;kCAKU5B,KAAKgB,MAAM;;;WAGlBI,QAAL,CAAc,EAAEpB,QAAF,EAAOgB,UAAP,EAAd;;UAEItB,OAAO,IAAX;WACKX,KAAL,CAAWiB,GAAX,CAAegC,QAAf,GAA0B,EAA1B;UACIC,cAAc,KAAKnD,KAAL,CAAWoD,MAAX,CAAkBC,KAAlB,CAAwB,GAAxB,CAAlB;WACKD,MAAL,GAAc,CAACE,WAAWH,YAAY,CAAZ,CAAX,CAAD,EAA6BG,WAAWH,YAAY,CAAZ,CAAX,CAA7B,CAAd;WACKI,IAAL,GAAYjD,SAAS6C,YAAY,CAAZ,CAAT,CAAZ;;8BAEY,CACV,wBADU,EAEV,qBAFU,EAGV,6BAHU,EAIV,mBAJU,EAKV,mBALU,EAMV,qBANU;;oCAAA,EASV,uBATU,EAUV,cAVU,EAWV,qBAXU,CAAZ,EAYGK,IAZH,CAYQ,gBAYF;;YAXJC,SAWI;YAVJC,MAUI;YATJC,cASI;YARJC,IAQI;YAPJC,IAOI;YANJC,MAMI;;;sBAAA;YAHJC,OAGI;YAFJC,OAEI;YADJC,KACI;;eACGC,QAAP,GAAkBF,OAAlB;eACOG,IAAP,GAAcvD,IAAd;aACKwD,OAAL,GAAeJ,OAAf;;;;;;YASIK,YAAY,IAAIZ,SAAJ,CAAc;gBACtB7C,KAAKX,KAAL,CAAWiC,IADW;mCAEH,iCAAUD,KAAV,EAAiB;gBAClCqC,OAAOrC,MAAMqC,IAAnB;iBACKC,KAAL,GAAa;uBACF,QADE;oBAEL;aAFR;;SAJY,CAAhB;;aAaKC,KAAL,CAAWC,WAAX,GAAyB,IAAzB;aACKD,KAAL,CAAWE,WAAX,CAAuB9C,QAAvB,GAAkC,aAAlC;;;;;aAMK4C,KAAL,CAAWG,KAAX,CAAiB,iBAAjB,EAAoC,UAAUC,OAAV,EAAmB;cACjDA,OAAJ,EAAa;gBACPC,kBAAkBD,QAAQE,yBAAR,EAAtB;4BACgBC,OAAhB,GAA0B,CAAC;kBACrB,aADqB;qBAElB,QAFkB;qBAGlB;;aAHiB,CAA1B;;4BAQgBA,OAAhB,CAAwBC,KAAxB,CAA8B,CAA9B,EAAiCC,OAAjC,GAA2CrE,KAAKX,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,KAA0BkC,SAArE,CAVW;;;SADf;aAeKV,KAAL,CAAWW,SAAX,CAAqBC,EAArB,CAAwB,gBAAxB,EAA0C,UAAUnD,KAAV,EAAiB;cACrDA,MAAMoD,MAAN,CAAaC,EAAb,KAAoB,aAAxB,EAAuC;iBAChCrF,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,CAAsBC,cAAtB,CAAqChB,MAAMsD,MAAN,CAAaC,eAAlD;iBACKhB,KAAL,CAAWiB,KAAX;;SAHJ;;aASKL,EAAL,CAAQ,OAAR,EAAiB,UAACnD,KAAD,EAAW;;;cAGtBrB,KAAKX,KAAL,CAAW8B,iBAAX,IAAgCnB,KAAKX,KAAL,CAAW8B,iBAAX,KAAiC,IAArE,EAA2E;iBACpE9B,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBuD,MAAnB,CAA0B9E,KAAKyB,cAA/B;iBACKC,QAAL,CAAc,EAAEP,mBAAmB,KAArB,EAAd;;;;;cAKEnB,KAAKX,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,IAAyBpC,KAAKX,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,CAAsB/C,KAAtB,CAA4B0F,OAA5B,KAAwC,IAArE,EAA2E;;;;;;;cAOvEC,eAAe,EAAnB;;eAEKtD,QAAL,CAAc,EAAEuD,SAAS,IAAX,EAAd;;cAEIC,cAAclF,KAAKD,MAAL,CAAYoF,MAAZ,CAAmB,UAAUC,KAAV,EAAiB;gBAChDC,UAAU/D,KAAKqB,IAAnB;;gBAEIyC,MAAMhG,KAAN,CAAYkG,YAAZ,KAA6BhB,SAAjC,EAA4C;kBACtC7E,OAAOC,QAAP,CAAgB0F,MAAMhG,KAAN,CAAYkG,YAA5B,EAA0C,EAA1C,IAAgDD,OAApD,EAA6D;uBACpDD,KAAP;;;;mBAIGA,KAAP;WATgB,CAAlB;;wBAacF,YAAYK,MAAZ,CAAmBvF,KAAKX,KAAL,CAAWiB,GAAX,CAAegC,QAAlC,CAAd;;gBAEMkD,UAAN,CAAiBN,WAAjB,EAA8B,UAAUE,KAAV,EAAiBK,EAAjB,EAAqB;kBAC3CC,QAAN,CAAerE,KAAf,EAAsB,UAAUsE,OAAV,EAAmB;kBACnCA,OAAJ,EAAa;wBACHP,KAAR,GAAgBA,KAAhB;6BACaxE,IAAb,CAAkB+E,OAAlB;;;aAHJ;WADF,EAQG,UAAUC,GAAV,EAAe;gBACZD,UAAUX,aAAa1E,GAAb,CAAiB,UAAUuF,EAAV,EAAc;iBACxCF,OAAH,CAAWG,OAAX,CAAmB,UAAUC,GAAV,EAAe;oBAC5BX,KAAJ,GAAYS,GAAGT,KAAf;oBACIY,KAAJ,GAAY,CAAC,CAAb;oBACID,IAAIE,OAAJ,CAAYC,QAAhB,EAA0B;sBACpBF,KAAJ,GAAYG,eAAeC,YAAf,CAA4BL,IAAIE,OAAJ,CAAYC,QAAxC,EAAkD,OAAlD,CAAZ;;eAJJ;qBAOOL,GAAGF,OAAV;aARY,KASR,GAAGU,MAAH,CAAU,UAAUC,CAAV,EAAaC,CAAb,EAAgB;qBACvBD,EAAEf,MAAF,CAASgB,CAAT,CAAP;aADI,CATN;;sBAaUZ,QAAQa,IAAR,EAAV;;sBAEUb,QAAQ9E,IAAR,CAAa,UAAU4F,EAAV,EAAcC,EAAd,EAAkB;qBAChCD,GAAGT,KAAH,GAAWU,GAAGV,KAArB;;aADQ,CAAV;;;gBAMIW,eAAehB,QAAQrF,GAAR,CAAY,UAAUsG,MAAV,EAAkB;kBAC3CX,UAAUW,OAAOX,OAArB;kBACIY,YAAYD,OAAOC,SAAvB;;sBAEQC,UAAR,CAAmBD,SAAnB,GAA+BA,SAA/B;;sBAGQE,aAAR,GAAwB;uBACfF,SADe;yBAEbD,OAAOxB,KAAP,CAAa4B,WAAb,CAAyBf,OAAzB,EAAkCW,MAAlC,CAFa;yBAGb,CAAC,EAAEK,OAAO,QAAT,EAAmBvC,IAAI,eAAvB,EAAD;eAHX;;qBAMOuB,OAAP;aAbiB,CAAnB;;gBAgBIU,aAAaO,MAAb,GAAsB,CAA1B,EAA6B;mBACtBtD,KAAL,CAAWiB,KAAX;mBACKjB,KAAL,CAAWuD,0BAAX,GAAwC,IAAxC;mBACK9H,KAAL,CAAWiC,IAAX,CAAgBsC,KAAhB,CAAsBwD,IAAtB,CAA2B;0BACfT,YADe;0BAEftF,MAAMgG;eAFlB;2BAIa,CAAb,EAAgBC,eAAhB;;mBAEKjI,KAAL,CAAWiC,IAAX,CAAgBsC,KAAhB,CAAsBY,EAAtB,CAAyB,gBAAzB,EAA2C,UAAU+C,CAAV,EAAa;oBAClDA,EAAE9C,MAAF,CAASC,EAAT,KAAgB,eAApB,EAAoC;eADtC;;iBAIGhD,QAAL,CAAc,EAAEuD,SAAS,KAAX,EAAd;qBACSuC,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,EAAqDC,KAArD,CAA2DC,MAA3D,GAAoE,MAApE;WA5DF;;;;;;SApCF;;;aA2GKrI,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuBiC,SAAvB,EAAkC,UAAlC;;YAGI,OAAKrE,KAAL,CAAWuI,MAAf,EAAuB;cACjBC,YAAY,IAAI9E,MAAJ,CAAW;kBACnB9C,KAAKX,KAAL,CAAWiC;WADH,CAAhB;;eAIKjC,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuBoG,SAAvB,EAAkC;sBACtB;WADZ;;;eAKGnG,cAAL,GAAsB,IAAIsB,cAAJ,CAAmB;gBACjC/C,KAAKX,KAAL,CAAWiC;SADG,CAAtB;;eAIKG,cAAL,CAAoBsC,KAApB,CAA0B,eAA1B,EAA2C,UAAU8D,QAAV,EAAoBC,QAApB,EAA8BC,QAA9B,EAAwCC,MAAxC,EAAgD;eACpF3I,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBuD,MAAnB,CAA0B9E,KAAKyB,cAA/B;eACKC,QAAL,CAAc,EAAEP,mBAAmB,KAArB,EAAd;SAFF;;YAMIqD,EAAJ,CAAO,gBAAP,EAAyB,UAAU8B,CAAV,EAAa;;;gBAG9B,YAAN;SAHF;;;;YASI,OAAKlH,KAAL,CAAW6I,IAAf,EAAqB;cACfC,UAAU,IAAIlF,IAAJ,CAAS;kBACf1B;WADM,CAAd;;;eAKKC,EAAL,CAAQC,GAAR,CAAY0G,OAAZ,EAAqB,WAArB;;;aAGG3G,EAAL,CAAQuD,MAAR,CAAe,MAAf;;YAEInC,OAAO,IAAIM,IAAJ,CAAS;gBACZjD,KAAKX,KAAL,CAAWiC;SADR,CAAX;;aAIKC,EAAL,CAAQC,GAAR,CAAYmB,IAAZ,EAAkB,WAAlB;;YAGI3C,KAAKZ,KAAL,CAAW+I,MAAf,EAAuB;;;cAGjBC,cAAcpI,KAAKE,gBAAL,CAAsBiF,MAAtB,CAA6B,eAAO;;gBAEhDkD,IAAIC,WAAJ,CAAgBC,IAAhB,CAAqBC,WAArB,GAAmCC,QAAnC,CAA4C,QAA5C,CAAJ,EAA2D;qBAClDJ,GAAP;;WAHc,CAAlB;;cAQIK,gBAAgBN,YAAY9H,GAAZ,CAAgB,aAAK;gBACnCqI,EAAER,MAAN,EAAc;gBAAIA,MAAF;;WADE,CAApB;;cASIS,eAAe,IAAI1F,MAAJ,CAAW;kBACtB5B,IADsB;qBAEnBoH,aAFmB;mCAGL;WAHN,CAAnB;;uBAMalE,EAAb,CAAgB,iBAAhB,EAAmC,UAAUnD,KAAV,EAAiB,EAApD;;uBAIamD,EAAb,CAAgB,eAAhB,EAAiC,UAAUqE,GAAV,EAAe;;iBAEzCjF,KAAL,CAAWuD,0BAAX,GAAwC0B,IAAIjC,MAAJ,CAAWX,OAAnD;iBACKrC,KAAL,CAAWiB,KAAX;;;;;;;WAHF;;eAYKtD,EAAL,CAAQC,GAAR,CAAYoH,YAAZ,EAA0B;sBACd,WADc;mBAEjB;WAFT;;;;;;;;;;eAcGE,cAAL,GAAsB,YAAM;iBACrBzJ,KAAL,CAAWiB,GAAX,CAAe8B,MAAf,CAAsB/C,KAAtB,CAA4B0J,iBAA5B,CAA8CC,QAA9C,CAAuD5E,KAAvD,CAA6D,CAA7D;SADF;;mBAIW,YAAM;cACXyE,MAAM,IAAII,KAAJ,CAAU,UAAV,EAAsB,EAAEC,SAAS,IAAX,EAAtB,CAAV;iBACOC,cAAP,CAAsBN,GAAtB,EAA2B,QAA3B,EAAqC,EAAEO,OAAOpJ,IAAT,EAAeqJ,YAAY,IAA3B,EAArC;;cAEIrJ,KAAKZ,KAAL,CAAWkK,UAAf,EAA2B;iBACpBlK,KAAL,CAAWkK,UAAX,CAAsBT,GAAtB;;SALJ,EAOG,GAPH;OAzSF;;;;EAlJoBzI,MAAMmJ;;AAAxBpK,YACGsB,cAAc;;ACLvB,IAAIgH,QAAQ;kBACM;iBACD,KADC;gBAEF,MAFE;eAGH,MAHG;yBAIO,MAJP;eAKH,SALG;gBAMF,MANE;iBAOD,MAPC;kBAQA,YARA;wBASM,QATN;oBAUE,QAVF;gBAWF,SAXE;mBAYC;6BACU;;;CAd7B;;IAmBM+B;;;6BAGUpK,KAAZ,EAAmB;;;qIACTA,KADS;;cAEVC,KAAL,GAAa;qBACA,IADA;yBAEID,MAAMqK,QAAN,KAAmB;;SAFpC;;cAMKC,SAAL,GAAiB,UAAUnC,CAAV,EAAa;gBACtB,KAAKnI,KAAL,CAAWuK,OAAf,EAAwB;qBACfvK,KAAL,CAAWuK,OAAX,CAAmBpC,CAAnB;;SAFR;;;;;;;iCAUI;gBACA,KAAKlI,KAAL,CAAWuK,WAAf,EAA4B;;oBAEpBC,gBAAgB,yBAAyB,KAAKzK,KAAL,CAAWqK,QAAxD;;uBAEO;;sBAAS,OAAOhC,MAAMqC,YAAtB,EAAoC,SAAS,KAAKJ,SAAL,CAAe7J,IAAf,CAAoB,IAApB,CAA7C,EAAwE,OAAO,KAAKT,KAAL,CAAW6H,KAA1F;kDACG,OAAO,EAAE8C,QAAQ,MAAV,EAAkBC,OAAO,MAAzB,EAAb,EAAgD,mBAAhD,EAA4D,WAAWH,aAAvE;iBADJ;aAJJ,MASO;uBACK,gCAAR;;;;;EAhCkBzJ,MAAMmJ;;AAA9BC,gBACK/I,cAAc;;ACnBzB,IAAIwJ,SAAS;qBACQ;oBACD,UADC;iBAEJ,KAFI;eAGN,KAHM;kBAIH,KAJG;kBAKH,KALG;;oBAOD,KAPC;oBAQD;KATP;qBAWQ;kBACH,WADG;wBAEG,MAFH;uBAGE,MAHF;qBAIA,MAJA;qBAKA;;;CAhBrB;;IAqBMC;;;4BAES9K,KAAb,EAAoB;;;mIACVA,KADU;;cAGX+K,MAAL,GAAc,YAAY;;gBAEpBC,YAAY,KAAK/K,KAAL,CAAW+H,IAA3B;iBACK1F,QAAL,CAAc,EAAE0F,MAAM,CAACgD,SAAT,EAAd;SAHF;;cAMGC,QAAL,GAAgBxI,SAAS2F,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,CAAhB;cACK8C,SAAL,GAAiBzI,SAASC,aAAT,CAAuB,MAAvB,CAAjB;cACKuI,QAAL,CAAcE,WAAd,CAA0B,MAAKD,SAA/B;cACKjL,KAAL,GAAa;kBACH,MAAKD,KAAL,CAAWgI,IAAX,IAAmB;SAD7B;;;;;;;6CAKkB;iBACboD,WAAL;;;;iCAGM;;mBAEG;;;oCAAO,eAAD,IAAiB,UAAU,KAAKpL,KAAL,CAAWqK,QAAtC,EAAgD,SAAS,KAAKU,MAAL,CAAYtK,IAAZ,CAAiB,IAAjB,CAAzD,EAAiF,OAAO,KAAKT,KAAL,CAAW6H,KAAnG;aAAb;;;;sCAES;;gBAEP,KAAK5H,KAAL,CAAW+H,IAAf,EAAqB;oBACbiB,MAAMjI,MAAM0B,aAAN,CACN,KADM,EAEN,EAAE2I,WAAW,aAAb,EAA4BhD,OAAOwC,OAAOS,eAA1C,EAFM,EAGNtK,MAAM0B,aAAN,CACI,IADJ,EAEI,EAAE2F,OAAO,EAAEkD,WAAW,KAAb,EAAoB3J,UAAU,UAA9B,EAA0C4J,MAAM,KAAhD,EAAuDC,KAAK,GAA5D,EAAT,EAFJ,EAGI,KAAKzL,KAAL,CAAW6H,KAHf,CAHM,EAQN7G,MAAM0B,aAAN,CACI,MADJ,EAEI,EAAE2F,OAAO,EAAEzG,UAAU,UAAZ,EAAwB6J,KAAK,GAA7B,EAAkC5J,OAAO,GAAzC,EAAT,EAFJ,EAGIb,MAAM0B,aAAN,CAAoB0H,eAApB,EAAqC,EAAEC,UAAU,OAAZ,EAAqBE,SAAS,KAAKQ,MAAL,CAAYtK,IAAZ,CAAiB,IAAjB,CAA9B,EAArC,CAHJ,CARM,EAaNO,MAAM0B,aAAN,CACI,KADJ,EAEI,EAAE2F,OAAOwC,OAAOa,eAAhB,EAFJ,EAGI1K,MAAM0B,aAAN,CACI,KADJ,EAEI,IAFJ,EAGI,KAAK1C,KAAL,CAAWe,QAHf,CAHJ,CAbM,CAAV;;yBAwBS4K,MAAT,CAAgB1C,GAAhB,EAAqB,KAAKiC,SAA1B;aAzBJ,MA0BO;oBACCU,WAAW5K,MAAM0B,aAAN,CAAoB,MAApB,EAA4B,IAA5B,CAAf;yBACSiJ,MAAT,CAAgBC,QAAhB,EAA0B,KAAKV,SAA/B;;;;;EAzDqBlK,MAAMmJ;;AAA7BW,eACGzJ,cAAc;;IClBjBwK;;;4BAEU7L,KAAZ,EAAmB;;;mIACTA,KADS;;cAGVC,KAAL,GAAa;iBACJD,MAAMkB,GADF;kBAEHlB,MAAMkC,IAFH;qBAGA,IAHA;mBAIDlC,MAAM6H,KAJL;yBAKI7H,MAAM8L,gBAAN,KAA2B5G;SAL5C;;;;;;+CASmB;iBACdlF,KAAL,CAAWkC,IAAX,CAAgB0H,QAAhB,CAAyBlE,MAAzB,CAAgC,KAAKzF,KAAL,CAAW2E,OAA3C;;;;4CAGgB;;;gBACZhE,OAAO,IAAX;oCACY,CAAC,cAAD,EACR,0BADQ,EAER,2BAFQ,EAGR,0BAHQ,EAKR,2BALQ,EAMR,yBANQ,EAOR,uCAPQ,EAQR,qBARQ,EASR,iCATQ,EAUR,wBAVQ,CAAZ,EAWG4C,IAXH,CAWQ,gBAYF;;oBAXFuI,OAWE;oBAVFC,YAUE;oBATFC,aASE;oBARFC,YAQE;oBANFC,aAME;oBALFC,YAKE;oBAJFC,kBAIE;oBAHFpI,KAGE;oBAFFqI,kBAEE;oBADFC,UACE;;;;;oBAIExL,WAAWC,MAAMC,QAAN,CAAeC,GAAf,CAAmB,OAAKlB,KAAL,CAAWe,QAA9B,EAAwC,UAAUI,KAAV,EAAiB;wBAChEA,MAAMC,IAAN,CAAWC,WAAX,KAA2B,qBAA/B,EAAsD;+BAC3CF,KAAP;;;;;iBAFO,CAAf;;qBAUKqL,cAAL,GAAsBzL,QAAtB;;;;oBAMIH,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,SAAxB,EAAmC;;wBAE3BqL,eAAe,IAAIT,YAAJ,CAAiB;6BAC3BpL,KAAKZ,KAAL,CAAW0M,GADgB;mCAErB,CAAC,GAAD;qBAFI,CAAnB;yBAIKC,QAAL,GAAgBF,YAAhB;yBACKxM,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmBqK,YAAnB;;;oBAGA7L,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,OAAxB,EAAiC;wBACzBwL,SAAS,CAAb;wBACIhM,KAAKZ,KAAL,CAAW6M,YAAf,EAA6B;iCAChBxM,OAAOiD,UAAP,CAAkB1C,KAAKZ,KAAL,CAAW6M,YAA7B,CAAT;;wBAEAC,WAAWlM,KAAKZ,KAAL,CAAW0M,GAAX,CAAerJ,KAAf,CAAqB,GAArB,CAAf;;wBAEI0J,YAAY,IAAIR,UAAJ,CAAe;;iCAElBK;;qBAFG,CAAhB;wBAKIhM,KAAKZ,KAAL,CAAW6H,KAAf,EAAsB;;kCAERA,KAAV,GAAkBjH,KAAKZ,KAAL,CAAW6H,KAA7B;;;6BAGKnB,OAAT,CAAiB,UAAUgG,GAAV,EAAe;4BACxBM,SAAS,IAAIf,aAAJ,CAAkB;iCACtBS,GADsB;qCAElBE;;yBAFA,CAAb;kCAKUjM,MAAV,CAAiByB,GAAjB,CAAqB4K,MAArB;qBANJ;;yBASKL,QAAL,GAAgBI,SAAhB;yBACK9M,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmB2K,SAAnB;;;oBAGAnM,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,SAAxB,EAAmC;;wBAE3B6L,QAAQ,CAAZ;wBACIrM,KAAKZ,KAAL,CAAW6M,YAAf,EAA6B;gCACjBxM,OAAOiD,UAAP,CAAkB1C,KAAKZ,KAAL,CAAW6M,YAA7B,CAAR;;;wBAGAK,WAAW,IAAIjB,aAAJ,CAAkB;6BACxBrL,KAAKZ,KAAL,CAAW0M,GADa;iCAEpBO;;qBAFE,CAAf;;wBAMIrM,KAAKZ,KAAL,CAAWmN,QAAf,EAAwB;;wBAEpBvM,KAAKZ,KAAL,CAAW6H,KAAf,EAAsB;;iCAETA,KAAT,GAAiBjH,KAAKZ,KAAL,CAAW6H,KAA5B;;6BAEKuF,IAAT,CAAc,YAAM;;4BAGZC,WAAW,EAAf;iCACSC,YAAT,CAAsBtI,KAAtB,CAA4B0B,OAA5B,CAAoC,oBAAY;qCACnClF,IAAT,CAAc+L,SAASjI,EAAvB;yBADJ;iCAGS3D,OAAT;;6BAEK6L,YAAL,GAAoB,IAAIpB,YAAJ,CAAiBxL,KAAKZ,KAAL,CAAW0M,GAA5B,CAApB;6BACKe,MAAL,GAAc,IAAIpB,kBAAJ,EAAd;6BACKoB,MAAL,CAAYC,SAAZ,GAAwB,CAAxB;6BACKD,MAAL,CAAYE,QAAZ,GAAuBN,QAAvB;6BACKI,MAAL,CAAYG,WAAZ,GAA0B,SAA1B;6BACKH,MAAL,CAAY7C,KAAZ,GAAoBhK,KAAKX,KAAL,CAAWiC,IAAX,CAAgB0I,KAApC;6BACK6C,MAAL,CAAY9C,MAAZ,GAAqB/J,KAAKX,KAAL,CAAWiC,IAAX,CAAgByI,MAArC;6BACK8C,MAAL,CAAYI,cAAZ,GAA6B,IAA7B;6BACKJ,MAAL,CAAYI,cAAZ,GAA6BjN,KAAKX,KAAL,CAAW6N,WAAxC;;;qBAjBJ;;yBAuBKnB,QAAL,GAAgBO,QAAhB;yBACKjN,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmB8K,QAAnB;;;oBAIAtM,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,OAAxB,EAAiC;;wBAGzB2M,aAAa,IAAI7B,YAAJ,CAAiB;6BACzBtL,KAAKZ,KAAL,CAAW0M,GADc;gCAEtB,QAFsB;qBAAjB,CAAjB;yBAIKC,QAAL,GAAgBoB,UAAhB;yBACK9N,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmB2L,UAAnB;;;oBAIAnN,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,SAAxB,EAAmC;;wBAE3B4M,eAAe,IAAI7B,aAAJ,CAAkB,EAAEtE,OAAO,eAAT,EAA0BoG,UAAU,MAApC,EAAlB,CAAnB;;;;;;wBAMIC,UAAU,EAAd;;wBAEIC,QAAOvN,KAAKZ,KAAL,CAAW0M,GAAlB,MAA0B,QAA9B,EAAwC;4BAChC9L,KAAKZ,KAAL,CAAW0M,GAAX,CAAe0B,QAAnB,EAA6B;sCACfxN,KAAKZ,KAAL,CAAW0M,GAAX,CAAe0B,QAAzB;yBADJ,MAGK;sCACSxN,KAAKZ,KAAL,CAAW0M,GAArB;;;;wBAIJ9L,KAAKZ,KAAL,CAAW6H,KAAf,EAAsB;;qCAELA,KAAb,GAAqBjH,KAAKZ,KAAL,CAAW6H,KAAhC;;;4BAIInB,OAAR,CAAgB,eAAO;;4BAEf2H,IAAIvH,QAAJ,CAAa1F,IAAb,KAAsB,OAA1B,EAAmC;;gCAE3BuG,gBAAgB;uCACT,QADS;yCAEP/G,KAAKZ,KAAL,CAAWsO;6BAFxB;;gCAMIC,QAAQ,IAAItK,KAAJ,CAAU;2CACPoK,IAAIvH,QAAJ,CAAa0H,WAAb,CAAyB,CAAzB,CADO;0CAERH,IAAIvH,QAAJ,CAAa0H,WAAb,CAAyB,CAAzB;;6BAFF,CAAZ;;;gCAOIC,eAAe,IAAInC,kBAAJ,CAAuB;uCAC/B,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CAD+B;yCAE7B;2CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF;2CAEE;;6BAJI,CAAnB;;;gCASIoC,eAAe,IAAI3C,OAAJ,CAAY;0CACjBwC,KADiB;wCAEnBE,YAFmB;4CAGfJ,IAAIM,UAHW;+CAIZhH;;6BAJA,CAAnB;;;yCASaiC,QAAb,CAAsBxH,GAAtB,CAA0BsM,YAA1B;;qBAnCR;;yBA0CK/B,QAAL,GAAgBqB,YAAhB;yBACK/N,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmB4L,YAAnB;;;;;;;;;qBAWCrB,QAAL,CAAcS,IAAd,CAAmB,YAAY;+BAChB,YAAM;4BACT3D,MAAM,IAAII,KAAJ,CAAU,OAAV,EAAmB,EAAEC,SAAS,IAAX,EAAnB,CAAV;+BACOC,cAAP,CAAsBN,GAAtB,EAA2B,QAA3B,EAAqC,EAAEO,OAAOpJ,IAAT,EAAeqJ,YAAY,IAA3B,EAArC;;4BAEIrJ,KAAKZ,KAAL,CAAW4O,OAAf,EAAwB;iCACf5O,KAAL,CAAW4O,OAAX,CAAmBnF,GAAnB;;qBALR,EAOG,GAPH;iBADJ;;;aA7NJ,EAFgB;;;;iCA8OX;gBACD,KAAKkD,QAAL,CAAc/C,QAAlB,EAA4B;qBACnB3J,KAAL,CAAWiC,IAAX,CAAgB2M,IAAhB,CAAqB,KAAKlC,QAAL,CAAc/C,QAAd,CAAuB5E,KAA5C;;;;;oCAKI6B,SAASW,QAAQ;;gBAGrBA,OAAOsH,OAAP,KAAmB5J,SAAnB,IAAgC,KAAKsH,cAAzC,EAAyD;oBACjDuC,cAAc,KAAKvC,cAAL,CAAoBwC,IAApB,CAAyB;2BAAKtN,EAAE1B,KAAF,CAAQiP,OAAR,KAAoBzH,OAAOsH,OAAP,CAAeI,QAAf,EAAzB;iBAAzB,CAAlB;;oBAEIH,eAAeA,YAAY/O,KAAZ,CAAkBwE,KAAlB,KAA4BU,SAA/C,EAA0D;wBAClD+D,MAAM8F,YAAY/O,KAAZ,CAAkBwE,KAAlB,CAAwBqC,OAAxB,EAAiCW,MAAjC,CAAV;;wBAKIyB,GAAJ,EAAS;4BACDkG,aAAa1M,SAASC,aAAT,CAAuB,KAAvB,CAAjB;iCACSiJ,MAAT,CAAgB1C,GAAhB,EAAqBkG,UAArB;+BACOA,UAAP;;;;;gBAQRC,YAAY,EAAhB;gBACIC,OAAOC,OAAOC,mBAAP,CAA2B1I,QAAQa,UAAnC,CAAX;iBACKhB,OAAL,CAAa,eAAO;oBACZ8I,QAAQ,WAAZ,EAAyB,CAAzB,MAGK;yCACkBA,GAAnB,eAAgC3I,QAAQa,UAAR,CAAmB8H,GAAnB,CAAhC;;aALR;;mBASOJ,SAAP;;;;iCAIK;mBACE,IAAP;;;;iCAGKnN,OAAOwN,UAAU;;gBAElB7O,OAAO,IAAX;gBACI,KAAKZ,KAAL,CAAWoB,IAAX,KAAoB,SAAxB,EAAmC;;qBAE1BnB,KAAL,CAAWiC,IAAX,CAAgBwN,OAAhB,CAAwBzN,KAAxB,EAA+BuB,IAA/B,CAAoC,UAACmM,UAAD,EAAgB;;;;wBAI5C1H,WAAWhG,MAAMgG,QAArB;wBACI2H,WAAW;+BACJhP,KAAK+L,QADD;iCAEFgD,WAAWpJ,OAAX,CAAmBrF,GAAnB,CAAuB,aAAK;mCAAS,EAAE2F,SAASgJ,EAAEjL,OAAb,EAAsB6C,WAAW7G,KAAK+L,QAAL,CAAc9E,KAA/C,EAAP;yBAA9B;qBAFb;6BAIS+H,QAAT;iBATJ;aAFJ,MAeK;;oBAGG,CAAC,KAAKnC,MAAV,EAAkB;6BAAW,IAAT,EAAgB;;;qBAE/BA,MAAL,CAAY3G,QAAZ,GAAuB7E,MAAMgG,QAA7B;qBACKwF,MAAL,CAAYqC,SAAZ,GAAwB,KAAK7P,KAAL,CAAWiC,IAAX,CAAgB6N,MAAxC;qBACKtC,MAAL,CAAYI,cAAZ,GAA6B,IAA7B;;qBAEKL,YAAL,CAAkBwC,OAAlB,CAA0B,KAAKvC,MAA/B,EAAuCjK,IAAvC,CAA4C,UAAUoM,QAAV,EAAoB;;6BAEnDA,QAAT;iBAFJ;;;;;EA5UiB5O,MAAMmJ;;AAA7B0B,eACKxK,cAAc;;;;;ICWnB4O;;;2BAEUjQ,KAAZ,EAAmB;;;iIACTA,KADS;;cAGTkB,GAAN,CAAU8B,MAAV;cACK/C,KAAL,GAAa;iBACJD,MAAMkB,GADF;kBAEHlB,MAAMkC,IAFH;qBAGA,IAHA;yBAII,KAJJ;qBAKA,KALA;2BAMM;SANnB;;cASKgO,WAAL,GAAmBlP,MAAMmP,SAAN,EAAnB;;;;;;+CAKmB;iBACdnQ,KAAL,CAAWkC,IAAX,CAAgB0H,QAAhB,CAAyBlE,MAAzB,CAAgC,KAAKzF,KAAL,CAAW2E,OAA3C;;;;4CAGgB;;;gBAIZhE,OAAO,IAAX;oCACY,CAAC,cAAD,EACR,2BADQ,EAER,qCAFQ,EAGR,wBAHQ,EAIR,uBAJQ,CAAZ,EAKG4C,IALH,CAKQ,gBAMF;;oBALFuI,OAKE;oBAJFI,aAIE;oBAHFiE,eAGE;oBAFFC,QAEE;oBADFtM,OACE;;oBACI4F,oBAAoB,IAAIwC,aAAJ,CAAkB,EAAEtE,OAAO,YAAT,EAAuBoG,UAAU,MAAjC,EAAlB,CAA1B;qBACK3L,QAAL,CAAc,EAAEqH,oCAAF,EAAd;;qBAEK1J,KAAL,CAAWiB,GAAX,CAAekB,GAAf,CAAmBuH,iBAAnB;;oBAGM2G,kBAAkB,IAAIF,eAAJ,CAAoB;0BAClCxP,KAAKX,KAAL,CAAWiC,IADuB;2BAEjCyH,iBAFiC;iCAG3B;8BACH,eADG;+BAEF,QAFE;+BAGF,QAHE;8BAIH,KAJG;iCAKA;mCACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF;mCAEE;;qBAVyB;oCAaxB;8BACN,aADM;+BAEL,QAFK;+BAGL,GAHK;+BAIL;qBAjB6B;mCAmBzB;8BACL,aADK;+BAEJ,yBAFI;+BAGJ,OAHI;iCAIF;mCACE,QADF;mCAEE;;;iBAzBK,CAAxB;;qBA+BKrH,QAAL,CAAc,EAAEqH,oCAAF,EAAqB2G,gCAArB,EAAd;;qBAEKC,iBAAL,CAAuB9P,IAAvB,CAA4B,MAA5B;;gCAEgB2E,EAAhB,CAAmB,QAAnB,EAA6B,UAACnD,KAAD,EAAW;;wBAEhCA,MAAMhC,KAAN,KAAgB,UAApB,EAAgC;;0CAEV2J,QAAlB,GAA6B,CAAC3H,MAAM2C,OAAP,CAA7B;4BACI,OAAK5E,KAAL,CAAWwQ,MAAf,EAAuB;;mCAEdlO,QAAL,CAAc,EAAEmO,aAAa,IAAf,EAAd;;;mCAKO,YAAM;;iCAERnO,QAAL,CAAc,EAAEoO,SAASC,qCAAgB1O,MAAM2C,OAAN,CAAckC,QAAd,CAAuB8J,MAAvB,EAAhB,CAAX,EAA6DC,UAAU5O,MAAM2C,OAAN,CAAcgM,MAAd,EAAvE,EAA+FjL,SAAS,KAAxG,EAAd;iCACKmL,cAAL;yBAHJ,EAIG,IAJH;;iBAZR;;gCAuBgB1L,EAAhB,CAAmB,QAAnB,EAA6B,UAACnD,KAAD,EAAW;yBAC/BK,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;wBACI1D,MAAMhC,KAAN,KAAgB,UAAhB,IAA8BgC,MAAMhC,KAAN,KAAgB,QAAlD,EAA4D;;;;;;;;;;;mCAW7C,YAAM;iCACRqC,QAAL,CAAc,EAAEoO,SAASC,qCAAgB1O,MAAM2H,QAAN,CAAe,CAAf,EAAkB9C,QAAlB,CAA2B8J,MAA3B,EAAhB,CAAX,EAAiEC,UAAU5O,MAAM2H,QAAN,CAAe,CAAf,EAAkBgH,MAAlB,EAA3E,EAAd;;iCAEKE,cAAL;yBAHJ,EAIG,IAJH;;iBAbR;;;gCAuBgB1L,EAAhB,CAAmB,iBAAnB,EAAsC,UAACnD,KAAD,EAAW;0BACvC2C,OAAN,CAAckC,QAAd,GAAyB7E,MAAM6E,QAA/B;sCACkB8C,QAAlB,GAA6B,CAAC3H,MAAM2C,OAAP,CAA7B;;;;yBAIK3E,KAAL,CAAW8Q,WAAX,GAAyB,IAAzB;;4BAEQC,GAAR,CAAY,SAAZ;iBARJ;;uBAcKC,cAAL,GAAsBxO,SAASC,aAAT,CAAuB,KAAvB,CAAtB;qBACKzC,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuB,OAAK6O,cAA5B,EAA4C,WAA5C;;qBAEK3O,QAAL,CAAc,EAAE4O,QAAQ,IAAV,EAAd;;;;;;qBAMKjO,cAAL,GAAsB,UAAC4D,OAAD,EAAU9D,MAAV,EAAkB3B,IAAlB,EAA2B;wBACzC2B,WAAW,IAAf,EAAqB;iCACR,KAAT;;;wBAGA3B,SAAS,IAAb,EAAmB;+BACR,SAAP;;;wBAIA,CAACyF,QAAQC,QAAR,CAAiB1F,IAAtB,EAA4B;4BACpBA,SAAS,SAAb,EAAwB;;oCAEZ0F,QAAR,GAAmB,IAAI/C,OAAJ,CAAY8C,QAAQC,QAApB,CAAnB;oCACQA,QAAR,CAAiB1F,IAAjB,GAAwB,SAAxB;;;;2BAIHnB,KAAL,CAAWqQ,eAAX,CAA2Ba,MAA3B;2BACKlR,KAAL,CAAW0J,iBAAX,CAA6ByH,SAA7B;2BACK9O,QAAL,CAAc,EAAEmO,aAAa,KAAf,EAAsBC,SAAS,IAA/B,EAAd;;wBAGI9L,UAAU,IAAd;wBACI,CAACiC,QAAQC,QAAR,CAAiB8J,MAAlB,IAA4B/J,QAAQwK,MAAxC,EAAgD;kCAClCtF,QAAQuF,QAAR,CAAiBzK,OAAjB,CAAV;qBADJ,MAIK;;kCAIS,IAAIkF,OAAJ,CAAY;sCACRlF,QAAQC,QADA;oCAEV,OAAK7G,KAAL,CAAWqQ,eAAX,CAA2BiB;yBAF7B,CAAV;;;wBAOA3M,QAAQkC,QAAR,KAAqB,IAAzB,EAA+B;gCACnBA,QAAR,GAAmBD,QAAQC,QAA3B;;;;;2BAKC7G,KAAL,CAAW0J,iBAAX,CAA6BC,QAA7B,GAAwC,CAAChF,OAAD,CAAxC;wBACI,OAAK5E,KAAL,CAAWwQ,MAAf,EAAuB;;+BAEdlO,QAAL,CAAc,EAAEmO,aAAa,IAAf,EAAd;;;yBAGCxQ,KAAL,CAAWiC,IAAX,CAAgB2M,IAAhB,CAAqBjK,OAArB;;wBAGIkC,WAAWD,QAAQC,QAAvB;wBACIA,YAAY,CAACA,SAAS8J,MAA1B,EAAkC;mCACnBP,SAASiB,QAAT,CAAkBxK,QAAlB,CAAX;;;2BAGCxE,QAAL,CAAc,EAAEoO,SAASC,qCAAgB7J,SAAS8J,MAAT,EAAhB,CAAX,EAA+CC,UAAUjM,QAAQgM,MAAR,EAAzD,EAAd;;wBAEI7N,WAAW,IAAf,EAAqB,CAArB,MAGK;6BACI+N,cAAL;;iBAjER;;qBAuEK7N,cAAL,GAAsBrC,KAAKqC,cAAL,CAAoBxC,IAApB,CAAyBG,IAAzB,CAAtB;;qBAIK4Q,UAAL,GAAkB,UAACd,OAAD,EAAa;;;;iBAA/B;qBAKKc,UAAL,GAAkB5Q,KAAK4Q,UAAL,CAAgB/Q,IAAhB,CAAqBG,IAArB,CAAlB;aA1MJ,EALgB;;;;;yCAwNH;gBACTA,OAAO,IAAX;gBACI6I,MAAM,IAAII,KAAJ,CAAU,YAAV,EAAwB,EAAEC,SAAS,IAAX,EAAxB,CAAV;mBACOC,cAAP,CAAsBN,GAAtB,EAA2B,QAA3B,EAAqC,EAAEO,OAAO,IAAT,EAAeC,YAAY,IAA3B,EAArC;gBACIwH,IAAJ,GAAW7Q,KAAKX,KAAL,CAAW4Q,QAAtB;;gBAEIjQ,KAAKZ,KAAL,CAAW0R,YAAf,EAA6B;qBACpB1R,KAAL,CAAW0R,YAAX,CAAwBjI,GAAxB;;;uBAGO,YAAM;qBACRnH,QAAL,CAAc,EAAEqD,SAAS,KAAX,EAAd;aADJ,EAEG,GAFH;;;;wCAKY;iBACP1F,KAAL,CAAWqQ,eAAX,CAA2BqB,MAA3B,CAAkC,OAAlC,EAA2C,EAAEC,MAAM,OAAR,EAA3C;iBACKtP,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;;;;uCAGW;iBACN1F,KAAL,CAAWqQ,eAAX,CAA2BqB,MAA3B,CAAkC,UAAlC,EAA8C,EAAEC,MAAM,OAAR,EAA9C;iBACKtP,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;;;;uCAEW;iBACN1F,KAAL,CAAWqQ,eAAX,CAA2BqB,MAA3B,CAAkC,SAAlC,EAA6C,EAAEC,MAAM,OAAR,EAA7C;iBACKtP,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;;;;sCAEU;iBACL1F,KAAL,CAAWqQ,eAAX,CAA2BqB,MAA3B,CAAkC,WAAlC,EAA+C,EAAEC,MAAM,OAAR,EAA/C;iBACKtP,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;;;;yCAEa;iBACR1F,KAAL,CAAWqQ,eAAX,CAA2BqB,MAA3B,CAAkC,QAAlC,EAA4C,EAAEC,MAAM,OAAR,EAA5C;iBACKtP,QAAL,CAAc,EAAEqD,SAAS,IAAX,EAAd;;;;qCAKS8D,KAAK;gBACV7I,OAAO,IAAX;gBACIiR,WAAWpI,IAAIlE,MAAJ,CAAWyE,KAAX,CAAiBZ,WAAjB,EAAf;oBACQ4H,GAAR,CAAYa,QAAZ;gBACIA,SAASC,OAAT,CAAiB,WAAW,CAAC,CAA7B,CAAJ,EAAqC;;qBAE5BC,gBAAL,CAAsBF,QAAtB,EAAgCpI,IAAIlE,MAApC;aAFJ,MAGO;yBACMyM,cAAT,CAAwB,eAAxB,EAAyCrP,SAAzC,GACI,qDADJ;;;;;yCAOSkP,UAAUI,MAAM;;gBAGzBrR,OAAO,IAAX;iBACKsP,WAAL,CAAiBgC,OAAjB,CAAyBnH,MAAzB;oBACQiG,GAAR,CAAY,oBAAZ,EAAkCa,QAAlC;gBACI1I,OAAO0I,SAASxO,KAAT,CAAe,GAAf,CAAX;mBACO8F,KAAK,CAAL,EAAQgJ,OAAR,CAAgB,gBAAhB,EAAkC,EAAlC,CAAP;;gBAEIC,QAAQ;sBACFjJ,IADE;0BAEEvI,KAAKX,KAAL,CAAWiC,IAAX,CAAgB6N,MAAhB,CAAuBsC,gBAFzB;gCAGQ,IAHR;2CAImB,IAJnB;4CAKoB;aALhC;;kBAQMC,UAAN,GAAmB,IAAnB;kBACMC,kBAAN,GAA2B,EAA3B;kBACMC,eAAN,GAAwB,IAAxB;kBACMC,0BAAN,GAAmC,CAAnC;gBACIC,YAAY;0BACF,WADE;mCAEOC,KAAKC,SAAL,CAAeR,KAAf,CAFP;mBAGT,MAHS;gCAII;aAJpB;;gBAOIS,YAAY,wBAAhB;;gBAEIC,QAAQxD,OAAOyD,IAAP,CAAYL,SAAZ,EACPxR,GADO,CACH;uBAAK8R,OAAOC,CAAP,IAAY,GAAZ,GAAkBD,OAAON,UAAUO,CAAV,CAAP,CAAvB;aADG,EAEPC,IAFO,CAEF,GAFE,CAAZ;;oCAMY,CAAC,cAAD,CAAZ,EACK1P,IADL,CACU,iBAAe;;oBAAbY,OAAa;;wBACTyO,YAAY,yCAApB,EACI;2BACWH,SADX;0BAEU,IAAIS,QAAJ,CAAalB,KAAKA,IAAlB,CAFV;;kCAIkB;iBALtB,EAOKzO,IAPL,CAOU,UAAUoM,QAAV,EAAoB;wBAClBnI,YAAYmI,SAAS6B,IAAT,CAAc2B,iBAAd,CAAgCzS,MAAhC,CAAuC,CAAvC,EAA0C0S,eAA1C,CAA0DlK,IAA1E;yBACKmK,iBAAL,CAAuB1D,SAAS6B,IAAT,CAAc2B,iBAArC,EAAwD3L,SAAxD;iBATR;aAFR;;;;0CAkBc2L,mBAAmB3L,WAAW;gBACxC7G,OAAO,IAAX;oCACY,CAAC,cAAD,EAAiB,0BAAjB,EAA6C,2BAA7C,EAA0E,oBAA1E,CAAZ,EACK4C,IADL,CACU,iBAAmD;;oBAAjDuI,OAAiD;oBAAxCC,YAAwC;oBAA1BuH,KAA0B;oBAAnBC,aAAmB;;oBACjDC,iBAAiB,EAArB;oBACI9S,SAASyS,kBAAkBzS,MAAlB,CAAyBO,GAAzB,CAA6B,UAAU8E,KAAV,EAAiB;;wBAEnD4D,WAAW5D,MAAM0N,UAAN,CAAiBtF,QAAjB,CAA0BlN,GAA1B,CAA8B,UAAU2F,OAAV,EAAmB;gCACpDmK,GAAR,CAAY,8BAAZ,EAA4CnK,OAA5C;+BACOkF,QAAQuF,QAAR,CAAiBzK,OAAjB,CAAP;qBAFW,CAAf;qCAIiB4M,eAAetN,MAAf,CAAsByD,QAAtB,CAAjB;wBACI6C,eAAe,IAAIT,YAAJ,CAAiB;+BACzB,iBAAiBvE,SADQ;;gCAGxBmC,QAHwB;gCAIxB5D,MAAMqN,eAAN,CAAsBM,MAAtB,CAA6BzS,GAA7B,CAAiC,UAAU0S,KAAV,EAAiB;mCAC/CL,MAAMjC,QAAN,CAAesC,KAAf,CAAP;yBADI;qBAJO,CAAnB;2BAQOnH,YAAP;iBAfS,CAAb;;;;;;;;;;;;;;;;;uBAkCO,CAAP,EAAU5E,KAAV,GAAkBJ,SAAlB;;;qBAGKxH,KAAL,CAAWiB,GAAX,CAAe2S,OAAf,CAAuBlT,MAAvB;;qBAEKV,KAAL,CAAWiC,IAAX,CAAgB2M,IAAhB,CAAqB4E,cAArB;;oBAEIzT,QAAQ;2BACD,iBAAiByH,SADhB;kCAEM,KAFN;kCAGM,IAHN;sCAIU,IAJV;0BAKF,SALE;yBAMH,EANG;yBAOH7G,KAAKX,KAAL,CAAWiB,GAPR;0BAQFN,KAAKX,KAAL,CAAWiC;iBARrB;;oBAWI4R,MAAM,IAAIjI,cAAJ,CAAmB7L,KAAnB,CAAV;oBACI2M,QAAJ,GAAehM,OAAO,CAAP,CAAf;oBACIoT,OAAJ,GAAcC,OAAO7P,IAAP,CAAYxD,MAAZ,CAAmB,CAAnB,EAAsBoT,OAApC;oBACIpH,QAAJ,CAAa9E,KAAb,GAAqB7H,MAAM6H,KAA3B;;;qBAGK5H,KAAL,CAAWiB,GAAX,CAAegC,QAAf,CAAwB1B,IAAxB,CAA6BsS,GAA7B;;;;aA7DR;;;;gCAyEI;iBACC7T,KAAL,CAAWqQ,eAAX,CAA2Ba,MAA3B;iBACKlR,KAAL,CAAW0J,iBAAX,CAA6ByH,SAA7B;iBACK9O,QAAL,CAAc,EAAEmO,aAAa,KAAf,EAAsBC,SAAS,IAA/B,EAAd;;;;uCAIW;mBACJ;;kBAAK,IAAG,QAAR;qBACGzQ,KAAL,CAAWwQ,WAAX,KAA2B,KAA3B,IACG;;;yBACUzQ,KAAL,CAAWuO,KAAX,IAEG,oBAAC,eAAD,IAAiB,UAAS,eAA1B,EAA0C,SAAS,KAAK0F,aAAL,CAAmBxT,IAAnB,CAAwB,IAAxB,CAAnD,EAAkF,OAAM,YAAxF,GAHR;yBAKUT,KAAL,CAAWkU,IAAX,IAEG,oBAAC,eAAD,IAAiB,UAAS,UAA1B,EAAqC,SAAS,KAAKC,YAAL,CAAkB1T,IAAlB,CAAuB,IAAvB,CAA9C,EAA4E,OAAM,eAAlF,GAPR;yBASUT,KAAL,CAAWoU,OAAX,IAEG,oBAAC,eAAD,IAAiB,UAAS,SAA1B,EAAoC,SAAS,KAAKC,YAAL,CAAkB5T,IAAlB,CAAuB,IAAvB,CAA7C,EAA2E,OAAM,cAAjF,GAXR;yBAaUT,KAAL,CAAWsU,MAAX,IAEG,oBAAC,eAAD,IAAiB,UAAS,oBAA1B,EAA+C,SAAS,KAAKC,WAAL,CAAiB9T,IAAjB,CAAsB,IAAtB,CAAxD,EAAqF,OAAM,gBAA3F,GAfR;yBAiBUT,KAAL,CAAWwU,MAAX,IACG,oBAAC,eAAD,IAAiB,UAAS,iBAA1B,EAA4C,SAAS,KAAKC,cAAL,CAAoBhU,IAApB,CAAyB,IAAzB,CAArD,EAAqF,OAAM,aAA3F,GAlBR;yBAqBUT,KAAL,CAAW0U,MAAX,IACG;sCAAA;0BAAgB,UAAS,QAAzB,EAAkC,OAAM,gBAAxC,EAAyD,KAAK,KAAKxE,WAAnE;uDAAA;;;8BAEU,SAAQ,qBAAd,EAAoC,QAAO,MAA3C,EAAkD,IAAG,YAArD;;;kCACS,WAAU,OAAf;;;sCACW,WAAU,aAAjB;;;;;;;;;qCAAA;mEAEW,MAAK,MAAZ,EAAmB,MAAK,MAAxB,EAA+B,IAAG,QAAlC,EAA2C,UAAU,KAAKyE,YAAL,CAAkBlU,IAAlB,CAAuB,IAAvB,CAArD;;;yBANhB;uDAAA;sDAWU,IAAG,eAAT;;iBAnCb;oCAwCF,eAAD,IAAiB,UAAS,OAA1B,EAAkC,SAAS,KAAKmU,KAAL,CAAWnU,IAAX,CAAgB,IAAhB,CAA3C,EAAkE,OAAM,gBAAxE;aAxCJ;;;;6CAgDiB;gBACb,KAAKwQ,cAAT,EAAyB;yBACZtF,MAAT,CACI,KAAKkJ,YAAL,EADJ,EAEI,KAAK5D,cAFT;;;;;iCAQC;;;;;mBAKG;;;qBACAhR,KAAL,CAAW6U;aADd;;;;mCAQO7S,OAAO;;;;;;;;;;;sCAUJA,OAAO;;;;;;;;;;;4CAUD;gBACZrB,OAAO,IAAX;iBACKX,KAAL,CAAWiC,IAAX,CAAgBkD,EAAhB,CAAmB,OAAnB,EAA4B,UAAUnD,KAAV,EAAiB;sBACnC8S,eAAN;wBACQ/D,GAAR,CAAY,QAAZ;qBACK/Q,KAAL,CAAWiC,IAAX,CAAgBwN,OAAhB,CAAwBzN,KAAxB,EAA+BuB,IAA/B,CAAoC,UAAUoM,QAAV,EAAoB;wBAChDrJ,UAAUqJ,SAASrJ,OAAvB;;wBAEIA,QAAQuB,MAAR,IAAkBvB,QAAQA,QAAQuB,MAAR,GAAiB,CAAzB,EAA4BlD,OAAlD,EAA2D;;;;6BAIlD3E,KAAL,CAAW8Q,WAAX,GAAyBxK,QAAQA,QAAQuB,MAAR,GAAiB,CAAzB,EAA4BlD,OAArD;;;;;;6BAMK3E,KAAL,CAAW0J,iBAAX,CAA6BC,QAA7B,GAAwC,CAAChJ,KAAKX,KAAL,CAAW8Q,WAAZ,CAAxC;;;6BAGK9Q,KAAL,CAAWqQ,eAAX,CAA2B0E,MAA3B,CAAkC,CAACpU,KAAKX,KAAL,CAAW8Q,WAAZ,CAAlC;;;;;;iBAhBR;aAHJ;;;;wCA6BYkE,gBAAgB;;;;;;;;;;;;;EAziBRjU,MAAMmJ;;AAA5B8F,gBACK5O,cAAc;;;;;;ACrBzB;;IAYM6T;;;gCAEUlV,KAAZ,EAAmB;;;2IACTA,KADS;;cAGVC,KAAL,GAAa;iBACJD,MAAMkB,GADF;kBAEHlB,MAAMkC,IAFH;qBAGA;SAHb;;cAMKiT,YAAL,GAAoB,MAAKA,YAAL,CAAkB1U,IAAlB,OAApB;;;;;;4CAOgB;gBACZG,OAAO,IAAX;oCACY,CAAC,cAAD,EAGR,wBAHQ,EAIR,uBAJQ,EAKR,kCALQ,CAAZ,EAOG4C,IAPH,CAOQ,gBAQF;;oBAPFuI,OAOE;oBAJFsE,QAIE;oBAHFtM,OAGE;oBAFFqR,YAEE;;;;qBAKGnE,cAAL,GAAsBxO,SAASC,aAAT,CAAuB,KAAvB,CAAtB;;qBAEKqJ,OAAL,GAAeA,OAAf;qBACKsE,QAAL,GAAgBA,QAAhB;qBACKtM,OAAL,GAAeA,OAAf;;qBAEK9D,KAAL,CAAWiC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuBxB,KAAKqQ,cAA5B,EAA4C;8BAC9B,WAD8B;2BAEjC;iBAFX;;qBAeKlI,MAAL,GAAc,YAAM;2BACT,IAAIqM,YAAJ,CAAiB;8BACd,wBADc;qCAEP,2CAFO;;wCAIJ,wBAAU3H,MAAV,EAAkB;;mCAGvB4H,oJAAkJ5H,OAAO6H,WAAP,CAAmBnD,OAAnB,CAA2B,IAA3B,EAAiC,GAAjC,CAAlJ,gCAAoN3O,IAApN,CAAyN;uCAAKqM,EAAE/M,IAAF,EAAL;6BAAzN,EAAwOU,IAAxO,CAA6O,gBAAQ;;uCAEjPiO,KAAKrD,QAAL,CAAclN,GAAd,CAAkB,UAAU2F,OAAV,EAAmB;2CACjC;6CACE,MADF;8CAEGA,QAAQa,UAAR,CAAmB6N,eAFtB;qDAGU9H,OAAO+H;qCAHxB;iCADG,CAAP;6BAFG,CAAP;yBAPgB;;oCAqBR,oBAAU/H,MAAV,EAAkB;;mCAInB4H,oJAAkJ5H,OAAOgI,aAAP,CAAqBC,IAArB,CAA0BvD,OAA1B,CAAkC,IAAlC,EAAwC,GAAxC,CAAlJ,gCAA2N3O,IAA3N,CAAgO;uCAAKqM,EAAE/M,IAAF,EAAL;6BAAhO,EAA+OU,IAA/O,CAAoP,gBAAQ;;uCAExPiO,KAAKrD,QAAL,CAAclN,GAAd,CAAkB,UAAU2F,OAAV,EAAmB;;wCAGpC8O,aAAa5J,QAAQuF,QAAR,CAAiBzK,OAAjB,CAAjB;;2CAIO;6CACE,MADF;8CAEGA,QAAQa,UAAR,CAAmB6N,eAFtB;qDAGU9H,OAAO+H,WAHjB;iDAIMG,UAJN;;8CAMG9O,QAAQa,UAAR,CAAmB6N;qCAN7B;iCAPG,CAAP;6BAFG,CAAP;;qBAzBD,CAAP;iBADJ;aAzCJ;;;;kCA8FMtT,OAAO;;gBAETrB,OAAO,IAAX;;gKAEkJ,KAAKX,KAAL,CAAW2V,WAA7J,gCAAqMpS,IAArM,CAA0M;uBAAKqM,EAAE/M,IAAF,EAAL;aAA1M,EAAyNU,IAAzN,CAA8N,gBAAQ;;oBAI9N+D,eAAekK,KAAKrD,QAAL,CAAclN,GAAd,CAAkB,UAAU2F,OAAV,EAAmB;;4BAE5CC,QAAR,GAAmBlG,KAAKmD,OAAL,CAAauN,QAAb,CAAsBzK,QAAQC,QAA9B,CAAnB;;8BAEU,IAAIlG,KAAKmL,OAAT,CAAiBlF,OAAjB,CAAV;;wBAGIgP,eAAehP,QAAQa,UAAR,CAAmB6N,eAAtC;;4BAGQ5N,aAAR,GAAwB;+BACb,wBADa;kDAEIkO,YAFJ;iCAGX,CAAC,EAAEhO,OAAO,QAAT,EAAmBvC,IAAI,eAAvB,EAAD;qBAHb;;2BAQOuB,OAAP;iBAlBe,CAAnB;;oBAqBIU,aAAaO,MAAb,GAAsB,CAA1B,EAA6B;yBACpB7H,KAAL,CAAWiC,IAAX,CAAgBsC,KAAhB,CAAsBwD,IAAtB,CAA2B;kCACbT,YADa;kCAEbtF,MAAMgG;qBAFpB;;aA1BR;;;;qCAyCShG,OAAO;iBACXK,QAAL,CAAc,EAAEsT,aAAa3T,MAAMsD,MAAN,CAAayE,KAA5B,EAAd;;;;uCAGW;mBACJ;;kBAAK,WAAW3B,QAAMyN,YAAtB;;;sBAGE,OAAO,EAAEC,SAAS,cAAX,EAA2BpL,QAAQ,MAAnC,EAA2CY,WAAW,KAAtD,EAAZ;mDAGW,OAAO,EAAEwK,SAAS,cAAX,EAA2BpL,QAAQ,MAAnC,EAA2CqL,eAAe,KAA1D,EAAd,EAAiF,OAAO,KAAK/V,KAAL,CAAW2V,WAAnG,EAAgH,UAAU,KAAKT,YAA/H,EAA6I,MAAK,MAAlJ,EAAyJ,aAAY,6BAArK,EAAmM,cAAW,QAA9M,EAAuN,WAAU,YAAjO,EAA8O,OAAM,6BAApP,GAHJ;;;0BAKS,OAAO,EAAEY,SAAS,cAAX,EAA2BnL,OAAO,MAAlC,EAA0CD,QAAQ,MAAlD,EAA0DqL,eAAe,KAAzE,EAAZ,EAA8F,MAAK,QAAnG,EAA4G,OAAM,QAAlH,EAA2H,WAAU,gDAArI,EAAsL,SAAS,KAAKC,SAAL,CAAexV,IAAf,CAAoB,IAApB,CAA/L;sDACU,OAAO,EAAEsV,SAAS,OAAX,EAAoBG,YAAY,KAAhC,EAAb,EAAsD,eAAY,MAAlE,EAAyE,MAAK,cAA9E,EAA6F,WAAU,kBAAvG;;;aATZ;;;;iCAoBK;mBACE,IAAP;;;;EAzLyBlV,MAAMmJ;;AAAjC+K,mBACC7T,cAAc;;ICZf8U;;;iCAEUnW,KAAZ,EAAmB;;wIACTA,KADS;;;;;iCAIV;;mBAEE,iCAAP;;;;oCAIQ+T,SAAQ;gBACb,KAAK/T,KAAL,CAAWwE,KAAd,EAAoB;uBACT,KAAKxE,KAAL,CAAWwE,KAAX,CAAiBuP,OAAjB,CAAP;;;;;EAdsB/S,MAAMmJ;;AAAlCgM,oBACK9U,cAAc;;ICCnB+U;;;kCAEUpW,KAAZ,EAAmB;;;+IACTA,KADS;;cAEVqW,WAAL,GAAmB5T,SAASC,aAAT,CAAuB,KAAvB,CAAnB;cACK1C,KAAL,CAAWkC,IAAX,CAAgBC,EAAhB,CAAmBC,GAAnB,CAAuB,MAAKiU,WAA5B,EAAyC,MAAKrW,KAAL,CAAWsW,QAApD;;;;;;6CAGgB;gBACZ,KAAKD,WAAT,EAAsB;yBACT1K,MAAT,CAAgB,KAAKkJ,YAAL,EAAhB,EAAqC,KAAKwB,WAA1C;;;;;uCAIO;mBACH;;kBAAM,WAAU,gBAAhB;qBAAuCrW,KAAL,CAAWe;aAArD;;;;iCAEI;mBACG,iCAAP;;;;EAlB2BC,MAAMmJ;;AAAnCiM,qBACK/U,cAAc;;;;;;;;;;;"}