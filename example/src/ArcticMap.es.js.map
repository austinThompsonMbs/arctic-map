{"version":3,"file":"ArcticMap.es.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/lib/ArcticMapButton.js","../../src/lib/ArcticMapLoader.js","../../src/lib/ArcticMapPanel.js","../../src/lib/ArcticMap.js","../../src/lib/ArcticMapLayer.js","../../src/lib/ArcticMapEdit.js","../../src/lib/ArcticMapLLDSearch.js","../../src/lib/ArcticMapLayerPopup.js","../../src/lib/ArcticMapControlArea.js","../../src/lib/ArcticMapIdentify.js","../../src/lib/ArcticMapBaseControl.js","../../src/lib/ArcticMapLayerRenderer.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\r\n\r\n\r\n\r\n\r\nclass ArcticMapButton extends React.Component {\r\n    static displayName = 'ArcticMapButton';\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            enabled: true,\r\n            useEsriIcon: props.esriicon !== null,\r\n            active: props.showactive !== undefined && props.showactive === true\r\n\r\n        }\r\n\r\n       \r\n\r\n        this.fireclick = function (e) {\r\n            if (this.props.onclick) {\r\n                this.props.onclick(e);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        var style = {\r\n            arcticButton: {\r\n                padding: \"5px\",\r\n                height: \"32px\",\r\n                width: \"32px\",\r\n                backgroundColor: \"#fff\",\r\n                color: '#6e6e6e',\r\n                border: 'none',\r\n                display: 'flex',\r\n                flexFlow: 'row nowrap',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                cursor: 'pointer',\r\n                '&:hover': {\r\n                    backgroundColor: \"#ccc\"\r\n                }\r\n            }\r\n        };\r\n\r\n        if(this.props.padtop){\r\n            style.arcticButton.marginTop = '10px';\r\n        }\r\n        if(this.props.padbottom){\r\n            style.arcticButton.marginBOttom = '10px';\r\n        }\r\n        \r\n\r\n        if (this.state.useEsriIcon) {\r\n            if (this.props.showactive && this.props.showactive === true) {\r\n                style.arcticButton.backgroundColor = \"#d4d1d1\";\r\n            }\r\n            else{\r\n                style.arcticButton.backgroundColor = \"#fff\";\r\n            }\r\n\r\n            var esriClassName = 'esri-icon esri-icon-' + this.props.esriicon;\r\n\r\n            return (<button style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n                <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            </button>);\r\n\r\n\r\n        } else {\r\n            return (<div></div>);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapButton","import React from 'react';\r\nimport { transform } from 'async';\r\n\r\nvar style = {\r\n    bg: {\r\n        zIndex: \"100\",\r\n        position: \"absolute\",\r\n        top: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: '#5856569e'\r\n\r\n    },\r\n\r\n}\r\nvar loadingtext = {\r\n    position: \"absolute\",\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    color: 'white'\r\n};\r\n\r\nclass ArcticMapLoader extends React.Component {\r\n    static displayName = 'ArcticMapLoader';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n    \r\n        if (this.props.loading === true) {\r\n\r\n\r\n            return (\r\n\r\n                <div style={style.bg}>\r\n                    <h1 style={loadingtext}>Working...</h1>\r\n                </div>\r\n\r\n\r\n            )\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapLoader;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\nvar styles = {\r\n    rightWidgetFull: {\r\n        \"position\": \"absolute\",\r\n        \"right\": \"2px\",\r\n        \"top\": \"2px\",\r\n        \"bottom\": \"2px\",\r\n        \"zIndex\": \"100\",\r\n\r\n        \"minWidth\": '30%',\r\n        paddingTop: '20px'\r\n    },\r\n    widgetContainer: {\r\n        position: 'realative',\r\n        \"paddingRight\": \"20px\",\r\n        \"paddingLeft\": \"20px\",\r\n       \r\n        \"overflowY\": 'auto',\r\n        \"maxHeight\": '100%'\r\n    }\r\n\r\n};\r\n\r\nclass ArcticMapPanel extends React.Component {\r\n    static displayName = 'ArcticMapPanel';\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.toggle = function () {\r\n\r\n            var currvalue = this.state.open;\r\n            this.setState({ open: !currvalue });\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n\r\n        this.mapFrame = document.getElementsByClassName('esri-view-root')[0];\r\n        this.renderEle = document.createElement(\"span\");\r\n        this.mapFrame.appendChild(this.renderEle);\r\n        this.state = {\r\n            open: this.props.open || false\r\n        };\r\n     \r\n        if(props.map){\r\n            this.map = props.map;\r\n        }\r\n        if(props.view){\r\n            this.view = props.view;\r\n            this.view.on('click', (e) => {\r\n                this.setState({ open: false });\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        \r\n        // console.log(self.props);\r\n        // self.props.view.on('click', (event) => {\r\n\r\n        //     self.setState({ open: false });\r\n\r\n        // });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.renderPanel();\r\n    }\r\n\r\n    render() {\r\n\r\n        return (<span><ArcticMapButton padtop={this.props.padtop} padbottom={this.props.padbottom} esriicon={this.props.esriicon} onclick={this.toggle.bind(this)} title={this.props.title} ></ArcticMapButton></span>);\r\n    }\r\n    renderPanel() {\r\n        // refactor this\r\n        if (this.state.open) {\r\n            var ele = React.createElement(\r\n                'div',\r\n                { className: 'esri-widget', style: styles.rightWidgetFull },\r\n                React.createElement(\r\n                    'h2',\r\n                    { style: { \"paddingLeft\": \"20px\", marginTop: '6px',  fontSize: '28px', marginBottom : '10px' } },\r\n                    this.props.title\r\n                ),\r\n                React.createElement(\r\n                    'span',\r\n                    { style: { position: 'absolute', top: '20px', right: '20px' } },\r\n                    React.createElement(\r\n                        'button',\r\n                        {\r\n                            onClick : this.toggle,\r\n                            title : 'Close',\r\n                            style : { border : 'none', background : 'transparent', cursor : 'pointer'}\r\n                        },\r\n                        React.createElement(\r\n                            'span',\r\n                            {\r\n                               style : { fontSize: '28px' },\r\n                               'aria-hidden' : true,\r\n                               className : 'esri-icon esri-icon-close'\r\n                            },\r\n                            \r\n                        )\r\n                    )\r\n                    //React.createElement(ArcticMapButton, { esriicon: 'close', onclick: this.toggle, style : { fontSize : '28px'} })\r\n                ),\r\n                React.createElement(\r\n                    'div',\r\n                    { style: styles.widgetContainer },\r\n                    React.createElement(\r\n                        'div',\r\n                        null,\r\n                        this.props.children\r\n                    )\r\n                )\r\n            );\r\n\r\n            // <button style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n            //     <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            // </button>\r\n\r\n            ReactDOM.render(ele, this.renderEle);\r\n        } else {\r\n            var eleempty = React.createElement('span', null);\r\n            ReactDOM.render(eleempty, this.renderEle);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapPanel","import React from 'react';\r\nimport async from 'async';\r\nimport './ArcticMap.css';\r\n\r\nimport { Map, loadModules } from 'react-arcgis'\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapLoader from './ArcticMapLoader';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\n\r\nvar style = document.createElement('style');\r\nstyle.id = \"esri-overrides\"\r\nstyle.innerHTML =\r\n  '.esri-ui-bottom-right {' +\r\n  'flex-flow: column;' +\r\n  '}' +\r\n  '.esri-ui-bottom-right .esri-component {' +\r\n  'margin-top: 10px;' +\r\n  '}' +\r\n  '.esri-layer-list { background-color: transparent; padding: 1px; }' +\r\n  '.esri-layer-list__item--has-children .esri-layer-list__item { box-shadow: none; }' +\r\n  '.esri-layer-list__item--has-children { border-bottom: none; box-shadow: 0px 0px 3px 0px black; border-radius: 4px; margin-bottom: 10px;  }' +\r\n  '.esri-basemap-gallery { position: absolute; bottom: 0; right: 0; }'\r\n  ;\r\ndocument.head.appendChild(style);\r\n\r\n\r\nclass ArcticMap extends React.Component {\r\n  static displayName = 'ArcticMap';\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      map: null,\r\n      view: null,\r\n      hideBasemapButton: false,\r\n      loading: false,\r\n      lat: props.lat,\r\n      lng: props.lng,\r\n      mode: props.mode || \"view\",\r\n      basemap: props.basemap || \"hybrid\",\r\n      sr: Number.parseInt(props.sr || \"102100\"),\r\n    }\r\n\r\n    this.handleMapLoad = this.handleMapLoad.bind(this)\r\n    this.handleMapClick = this.handleMapClick.bind(this)\r\n    this.layers = []\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    var self = this\r\n    var index = 0\r\n    this.layers = []\r\n\r\n    self.childrenElements = [];\r\n\r\n\r\n\r\n\r\n\r\n\r\n    var children = React.Children.map(this.props.children, function (child) {\r\n      if (child.type.displayName === 'ArcticMapLayer') {\r\n        return React.cloneElement(child, {\r\n          ref: (c) => { if (c) { self.layers.push(c) } }\r\n        })\r\n      } else if (child.type.displayName === 'ArcticMapEdit') {\r\n        // console.log(self.refs);\r\n        return React.cloneElement(child, {\r\n          am: self,\r\n          // ref: 'editor'\r\n\r\n        })\r\n\r\n      }\r\n\r\n      // else if (child.type.name === 'ArcticMapLLDSearch') {\r\n\r\n      //   return React.cloneElement(child, {\r\n      //   })\r\n\r\n      // } \r\n\r\n      else {\r\n        return React.cloneElement(child, {\r\n          am: self,\r\n\r\n          map: self.state.map,\r\n          view: self.state.view,\r\n          //ref: 'child-' + (index++)\r\n          ref: (c) => { if (c) { self.childrenElements.push(c); } return 'child-' + (index++) }\r\n        })\r\n      }\r\n    })\r\n\r\n    if (children) {\r\n      children = children.sort(l => l.type.displayName === 'ArcticMapEdit').reverse()\r\n\r\n    } else {\r\n      children = (<div />)\r\n    }\r\n\r\n\r\n\r\n\r\n    // console.log(this.props.children);\r\n    // this.props.children.forEach((child) =>{\r\n    //         child.ref = (c) => {this.layers.push(c) };\r\n    // });\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n      <Map class='full-screen-map'\r\n        mapProperties={{ basemap: this.state.basemap }} onLoad={this.handleMapLoad} onClick={this.handleMapClick} >\r\n        {children}\r\n\r\n        <div id='bottombar' style={{ position: 'absolute', right: '10px', bottom: '20px' }}>\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <ArcticMapLoader loading={this.state.loading} />\r\n\r\n\r\n\r\n        {/*  <div id='bottomleftbar'>\r\n        {this.state.loading === true &&\r\n         <p>Loading...</p>\r\n        }\r\n      </div>\r\n      */}\r\n      </Map>\r\n\r\n    );\r\n  }\r\n\r\n  handleShowBasemaps(event) {\r\n    this.state.view.ui.add(this.basemapGallery, {\r\n      position: 'bottom-right'\r\n    })\r\n\r\n    this.setState({ hideBasemapButton: true })\r\n  }\r\n\r\n  handleMapClick(event) {\r\n    // console.log(event);\r\n  }\r\n\r\n  createElementFromHTML(htmlString) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = htmlString.trim();\r\n\r\n    // Change this to div.childNodes to support multiple top-level nodes\r\n    return div.firstChild;\r\n  }\r\n\r\n\r\n  setEdit(json, nofire, type) {\r\n    if (nofire === null) {\r\n      nofire = false;\r\n    }\r\n\r\n    if (type === null) {\r\n      type = \"polygon\";\r\n    }\r\n\r\n\r\n\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, nofire, type);\r\n    }\r\n  }\r\n\r\n  setMode(val) {\r\n    this.setState({ mode: val });\r\n    if (val === \"identify\") {\r\n      this.state.view.cursor = \"help\";\r\n    }\r\n    if (val === \"view\") {\r\n      this.state.view.cursor = \"grab\";\r\n    }\r\n    if (val === \"select\") {\r\n      this.state.view.cursor = \"auto\";\r\n    }\r\n    if (val === \"edit\") {\r\n      this.state.view.cursor = \"crosshairs\";\r\n    }\r\n  }\r\n\r\n  setJson(json) {\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, true);\r\n    }\r\n  }\r\n\r\n\r\n  handleMapLoad(map, view) {\r\n\r\n\r\n    this.setState({ map, view })\r\n\r\n    var self = this\r\n    self.state.map.amlayers = [];\r\n    var centerSplit = this.props.center.split('|');\r\n    view.center = [parseFloat(centerSplit[1]), parseFloat(centerSplit[0])];\r\n    view.zoom = parseInt(centerSplit[2]);\r\n    self.cntrlIsPressed = false;\r\n\r\n    loadModules([\r\n\r\n      'esri/widgets/Locate',\r\n      'esri/widgets/BasemapGallery',\r\n      'esri/widgets/Home',\r\n\r\n      'esri/widgets/Search',\r\n      // 'esri/tasks/Locator',\r\n      'esri/geometry/geometryEngine',\r\n\r\n      \"esri/request\",\r\n\r\n    ]).then(([\r\n\r\n      Locate,\r\n      BasemapGallery,\r\n      Home,\r\n\r\n      Search,\r\n      // Locator,\r\n      geometryEngine,\r\n\r\n      Request,\r\n\r\n    ]) => {\r\n      window._request = Request;\r\n      window._map = self;\r\n      self.request = Request;\r\n\r\n\r\n\r\n\r\n\r\n      if (self.state.mode === \"identify\") {\r\n        self.state.view.cursor = \"help\";\r\n      }\r\n      if (self.state.mode === \"view\") {\r\n        self.state.view.cursor = \"grab\";\r\n      }\r\n      if (self.state.mode === \"edit\") {\r\n        self.state.view.cursor = \"crosshairs\";\r\n      }\r\n\r\n      if (self.state.mode === \"select\") {\r\n        self.state.view.cursor = \"auto\";\r\n      }\r\n\r\n\r\n      //   self.state.view.spatialReference = {\r\n      //     wkid: self.state.sr,\r\n      //  };\r\n\r\n      // var layerList = new LayerList({\r\n      //   view: self.state.view,\r\n      //   listItemCreatedFunction: function (event) {\r\n      //     const item = event.item\r\n      //     item.panel = {\r\n      //       content: 'legend',\r\n      //       open: false\r\n      //     }\r\n      //   }\r\n      // })\r\n\r\n\r\n\r\n      view.popup.dockEnabled = true\r\n      view.popup.dockOptions.position = 'bottom-left'\r\n      //var layers = React.Children.toArray(this.props.children).filter((ele) => ele.type.name === \"ArcticMapLayer\");\r\n\r\n\r\n\r\n      // console.log(layers);\r\n      view.popup.watch('selectedFeature', function (graphic) {\r\n        if (graphic) {\r\n          var graphicTemplate = graphic.getEffectivePopupTemplate()\r\n          graphicTemplate.actions = [{\r\n            id: 'select-item',\r\n            title: 'Select',\r\n            image: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQyREM3RDkwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQyREM3REEwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDJEQzdENzBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDJEQzdEODBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prb3PqgAAACTSURBVHjaYvz//z8DJYCJgVJAjgsiIyMFQBjEZgQZwMjISJJmILUXynVmIdVmqGZ9qFAe0S7AonnR8uXLk5jItBmsGSUWgIriSdUMNwCoaB6QmgulidaM7AKYgjiYIcRohkdjVFQUhmIoG69mlHSAxUYGQppRAhGo6AMoYQDxRWI1Y02JSC65SEgz3IABzY0AAQYAhIhWWCl3Pj0AAAAASUVORK5CYII=\",\r\n\r\n\r\n          }]\r\n\r\n          graphicTemplate.actions.items[0].visible = self.state.map.editor !== undefined// graphic.attributes.website ? true : false;\r\n          //self.state.view.goTo(graphic);\r\n        }\r\n      })\r\n      view.popup.viewModel.on('trigger-action', function (event) {\r\n        if (event.action.id === 'select-item') {\r\n          self.state.map.editor.setEditFeature(event.target.selectedFeature, null, null, false, true);\r\n          view.popup.close();\r\n        }\r\n      })\r\n\r\n      window.addEventListener(\"keydown\",function (event) {\r\n        if (event.which == \"17\") self.cntrlIsPressed = true;\r\n      });\r\n\r\n      window.addEventListener(\"keyup\",function (event) {\r\n        self.cntrlIsPressed = false;\r\n      });\r\n\r\n      view.on('click', (event) => {\r\n\r\n        console.log(event);\r\n\r\n        //hide stuff\r\n\r\n\r\n        if (self.state.hideBasemapButton && self.state.hideBasemapButton === true) {\r\n          self.state.view.ui.remove(self.basemapGallery);\r\n          self.setState({ hideBasemapButton: false });\r\n          return;\r\n        }\r\n\r\n\r\n        if (self.state.mode === \"view\") { return; }\r\n\r\n        if (self.state.map.editor && self.state.map.editor.state.editing === true) {\r\n          return;\r\n        }\r\n\r\n        var currentmode = self.state.mode;\r\n        if (currentmode !== 'select') {\r\n          self.setMode(\"view\");\r\n        }\r\n\r\n\r\n\r\n        // console.log(event);\r\n        // need to work on identify and add to a single popup\r\n        // https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=tasks-identify\r\n\r\n        var identresults = [];\r\n        //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'wait';\r\n        self.setState({ loading: true });\r\n\r\n        var identLayers = self.layers.filter(function (layer) {\r\n          var mapzoom = view.zoom;\r\n\r\n          if (layer.props.identMaxZoom !== undefined) {\r\n            if (Number.parseInt(layer.props.identMaxZoom, 10) > mapzoom) {\r\n              return layer;\r\n            }\r\n            else {\r\n              return;\r\n            }\r\n          }\r\n\r\n          return layer;\r\n\r\n        });\r\n\r\n        identLayers = identLayers.concat(self.state.map.amlayers);\r\n\r\n        async.eachSeries(identLayers, function (layer, cb) {\r\n          layer.identify(event, function (results) {\r\n            if (results) {\r\n              results.layer = layer;\r\n              identresults.push(results);\r\n            }\r\n            cb();\r\n          });\r\n        }, function (err) {\r\n          var results = identresults.map(function (ir) {\r\n            ir.results.forEach(function (res) {\r\n              res.layer = ir.layer;\r\n              res.acres = -1;\r\n              if (res.feature.geometry) {\r\n                res.acres = geometryEngine.geodesicArea(res.feature.geometry, 'acres');\r\n              }\r\n            });\r\n            return ir.results;\r\n          }) || [].reduce(function (a, b) {\r\n            return a.concat(b);\r\n          });\r\n          self.setState({ loading: false });\r\n\r\n\r\n\r\n          results = results.flat();\r\n\r\n          results = results.sort(function (r1, r2) {\r\n            if (r1.acres > r2.acres) {\r\n              return 1;\r\n            }\r\n            return -1\r\n            //r.feature.attributes.Shape_Area\r\n          });\r\n\r\n\r\n          if (currentmode === \"identify\") {\r\n\r\n            //results = results.reverse();\r\n            var popupresults = results.map(function (result) {\r\n              var feature = result.feature;\r\n              var layerName = result.layerName;\r\n\r\n              feature.attributes.layerName = layerName;\r\n\r\n\r\n              feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n                title: layerName,\r\n                content: result.layer.renderPopup(feature, result),\r\n                actions: [{ title: \"Select\", id: \"select-action\" }]\r\n              };\r\n\r\n              return feature;\r\n            });\r\n\r\n            if (popupresults.length > 0) {\r\n              view.popup.close();\r\n              view.popup.currentSearchResultFeature = null;\r\n              self.state.view.popup.open({\r\n                features: popupresults,\r\n                location: event.mapPoint\r\n              });\r\n              popupresults[0].setCurrentPopup();\r\n\r\n              self.state.view.popup.on('trigger-action', function (e) {\r\n                if (e.action.id === 'select-action');\r\n              });\r\n            }\r\n            self.setState({ loading: false });\r\n          }\r\n\r\n          if (currentmode === \"select\") {\r\n            if (self.cntrlIsPressed === true) {\r\n              console.log(results);\r\n              console.log(\"Trim Smallest Result\");\r\n              self.state.map.editor.setEditFeature(results[0].feature, null, null, false, true, true);\r\n            }\r\n            else {\r\n              console.log(results);\r\n              self.state.map.editor.setEditFeature(results[0].feature, null, null, false, true);\r\n            }\r\n          }\r\n\r\n\r\n          //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'auto';\r\n        });\r\n\r\n        // self.layers.forEach(layer => {\r\n        //     layer.identify(event);\r\n        // })\r\n        //}, 100);\r\n\r\n      })\r\n\r\n      // Add widget to the top right corner of the view\r\n      // self.state.view.ui.add(layerList, 'top-left')\r\n\r\n\r\n      if (this.props.locate) {\r\n        var locateBtn = new Locate({\r\n          view: self.state.view\r\n        })\r\n\r\n        self.state.view.ui.add(locateBtn, {\r\n          position: 'top-right'\r\n        })\r\n      }\r\n\r\n      this.basemapGallery = new BasemapGallery({\r\n        view: self.state.view\r\n      })\r\n\r\n      this.basemapGallery.watch('activeBasemap', function (newValue, oldValue, property, object) {\r\n        self.state.view.ui.remove(self.basemapGallery)\r\n        self.setState({ hideBasemapButton: false })\r\n      });\r\n\r\n\r\n      map.on(\"basemap-change\", function (a) {\r\n        //this.basemapGallery.on('click', function () {\r\n\r\n        alert(\"BM CHanegd\")\r\n      })\r\n\r\n\r\n      // Add the widget to the top-right corner of the view\r\n\r\n      if (this.props.home) {\r\n        var homeBtn = new Home({\r\n          view: view\r\n        })\r\n\r\n        // Add the home button to the top left corner of the view\r\n        view.ui.add(homeBtn, 'top-right')\r\n      }\r\n\r\n      view.ui.remove('zoom')\r\n\r\n      // var zoom = new Zoom({\r\n      //   view: self.state.view\r\n      // })\r\n\r\n      // view.ui.add(zoom, 'bottom-right')\r\n\r\n\r\n      if (self.props.search) {\r\n\r\n        // find search elemets\r\n        var searchitems = self.childrenElements.filter(ele => {\r\n\r\n          if (ele.constructor.name.toLowerCase().includes('search')) {\r\n            return ele;\r\n          }\r\n\r\n        });\r\n\r\n        var searchsources = searchitems.map(i => {\r\n          if (i.search) { i.search(); }\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n        var searchWidget = new Search({\r\n          view: view,\r\n          sources: searchsources,\r\n          includeDefaultSources: true\r\n        });\r\n\r\n        searchWidget.on(\"search-complete\", function (event) {\r\n\r\n        });\r\n\r\n        searchWidget.on('select-result', function (evt) {\r\n\r\n          view.popup.currentSearchResultFeature = evt.result.feature;\r\n          view.popup.close();\r\n          // view.popup.open({\r\n          //  location: evt.result.feature.geometry,  // location of the click on the view\r\n          //  feature: evt.result.feature,\r\n          //  title: \"Search Result\",  // title displayed in the popup\r\n          //  content: evt.result.name, // content displayed in the popup\r\n          // });\r\n        });\r\n\r\n        view.ui.add(searchWidget, {\r\n          position: \"top-right\",\r\n          index: 0\r\n        });\r\n\r\n      }\r\n\r\n      //       var elestring = this.createElementFromHTML( `<input type=\"text\" placeholder=\"Find address or place\" aria-label=\"Search\" autocomplete=\"off\" tabindex=\"0\" class=\"esri-input esri-search__input\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-owns=\"1687b00a338-widget-1-suggest-menu\" role=\"textbox\" data-node-ref=\"_inputNode\" title=\"Find address or place\">`);\r\n\r\n      //  view.ui.add(elestring, {\r\n      //         position: \"top-right\",\r\n      //         index: 0\r\n      //       });\r\n\r\n      this.getEditFeature = () => {\r\n        this.state.map.editor.state.tempGraphicsLayer.graphics.items[0];\r\n      }\r\n\r\n      setTimeout(() => {\r\n        var evt = new Event('mapready', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n        if (self.props.onmapready) {\r\n          self.props.onmapready(evt);\r\n        }\r\n      }, 500)\r\n\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMap\r\n","import React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\nclass ArcticMapLayer extends React.Component {\r\n    static displayName = \"ArcticMapLayer\";\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            title: props.title,\r\n            blockSelect: props.blockIdentSelect !== undefined\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules(['esri/Graphic',\r\n            \"esri/layers/FeatureLayer\",\r\n            \"esri/layers/MapImageLayer\",\r\n            \"esri/layers/ImageryLayer\",\r\n\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/tasks/IdentifyTask\",\r\n            \"esri/tasks/support/IdentifyParameters\",\r\n            \"esri/geometry/Point\",\r\n            \"esri/symbols/SimpleMarkerSymbol\",\r\n            \"esri/layers/GroupLayer\",\r\n            \"esri/renderers/Renderer\"\r\n        ]).then(([\r\n            Graphic,\r\n            FeatureLayer,\r\n            MapImageLayer,\r\n            ImageryLayer,\r\n\r\n            GraphicsLayer,\r\n            IdentifyTask,\r\n            IdentifyParameters,\r\n            Point,\r\n            SimpleMarkerSymbol,\r\n            GroupLayer,\r\n            Renderer\r\n        ]) => {\r\n            // Create a polygon geometry\r\n\r\n\r\n            var children = React.Children.map(this.props.children, function (child) {\r\n                if (child.type.displayName === 'ArcticMapLayerPopup') {\r\n                    return child;\r\n                    // return React.cloneElement(child, {\r\n                    //     // ref: 'editor'\r\n                    //   })\r\n                }\r\n            })\r\n\r\n\r\n            self.layerRenderers = children;\r\n\r\n\r\n\r\n\r\n            var childrenEles = [];\r\n            if (self.props.children) {\r\n                if (Array.isArray(self.props.children)) {\r\n                    childrenEles = self.props.children;\r\n                }\r\n                else {\r\n                    childrenEles.push(self.props.children);\r\n                }\r\n            }\r\n\r\n            var renderers = childrenEles.filter(child => {\r\n                if (child.type.displayName === 'ArcticMapLayerRenderer') {\r\n                    return child;\r\n                }\r\n            });\r\n\r\n\r\n\r\n\r\n            // this.setState({ graphic });\r\n\r\n            if (self.props.type === \"feature\") {\r\n\r\n                var featureLayer = new FeatureLayer({\r\n                    url: self.props.src,\r\n                    outFields: [\"*\"],\r\n                });\r\n                self.layerRef = featureLayer;\r\n                self.state.map.add(featureLayer);\r\n            }\r\n\r\n            if (self.props.type === \"group\") {\r\n                var gtrans = 1;\r\n                if (self.props.transparency) {\r\n                    gtrans = Number.parseFloat(self.props.transparency);\r\n                }\r\n                var srcsplit = self.props.src.split(',');\r\n\r\n                var gmaplayer = new GroupLayer({\r\n                    //url: self.props.src,\r\n                    opacity: gtrans\r\n\r\n                });\r\n                if (self.props.title) {\r\n\r\n                    gmaplayer.title = self.props.title;\r\n                }\r\n\r\n                srcsplit.forEach(function (src) {\r\n                    var glayer = new MapImageLayer({\r\n                        url: src,\r\n                        opacity: gtrans\r\n\r\n                    });\r\n                    gmaplayer.layers.add(glayer);\r\n\r\n\r\n                    glayer.when(() => {\r\n\r\n\r\n                        var layerids = [];\r\n                        //console.log(\"Maplayer: \", maplayer);\r\n                        glayer.allSublayers.items.forEach(sublayer => {\r\n                            layerids.push(sublayer.id);\r\n                            //console.log(\"Sublayer:\", sublayer);\r\n\r\n                            var renderer = renderers.find(r => {\r\n                                if (r.props.layer === sublayer.title || r.props.layer === `${sublayer.id}`) {\r\n                                    return r;\r\n                                }\r\n                            });\r\n                            if (renderer !== undefined) {\r\n                                //console.log(\"Sublayer renderer:\", renderer.props.style);\r\n                                sublayer.renderer = renderer.props.style;\r\n                            }\r\n                            //sublayer.renderer = Renderer.fromJSON(renderer);\r\n\r\n                        });\r\n                        layerids.reverse();\r\n\r\n                        self.identifyTask = new IdentifyTask(self.props.src);\r\n                        self.params = new IdentifyParameters();\r\n                        self.params.tolerance = 3;\r\n                        self.params.layerIds = layerids;\r\n                        self.params.layerOption = \"visible\";\r\n                        self.params.width = self.state.view.width;\r\n                        self.params.height = self.state.view.height;\r\n                        self.params.returnGeometry = true;\r\n                        self.params.returnGeometry = self.state.blockSelect;\r\n\r\n                        //  console.log(self.params);\r\n\r\n                    });\r\n\r\n                });\r\n\r\n                self.layerRef = gmaplayer;\r\n                self.state.map.add(gmaplayer);\r\n            }\r\n\r\n            if (self.props.type === \"dynamic\") {\r\n\r\n                var trans = 1;\r\n                if (self.props.transparency) {\r\n                    trans = Number.parseFloat(self.props.transparency);\r\n                }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                var maplayer = new MapImageLayer({\r\n                    url: self.props.src,\r\n                    opacity: trans\r\n\r\n                });\r\n\r\n                if (self.props.childsrc);\r\n\r\n                if (self.props.title) {\r\n\r\n                    maplayer.title = self.props.title;\r\n                }\r\n\r\n                maplayer.on(\"layerview-create\", function (event) {\r\n                    // console.lof(\"Layerview:\" , event)\r\n                });\r\n\r\n                maplayer.when(() => {\r\n\r\n\r\n                    var layerids = [];\r\n                    //console.log(\"Maplayer: \", maplayer);\r\n                    maplayer.allSublayers.items.forEach(sublayer => {\r\n                        layerids.push(sublayer.id);\r\n                        //console.log(\"Sublayer:\", sublayer);\r\n\r\n                        var renderer = renderers.find(r => {\r\n                            if (r.props.layer === sublayer.title || r.props.layer === `${sublayer.id}`) {\r\n                                return r;\r\n                            }\r\n                        });\r\n                        if (renderer !== undefined) {\r\n                            //console.log(\"Sublayer renderer:\", renderer.props.style);\r\n                            sublayer.renderer = renderer.props.style;\r\n                        }\r\n                        //sublayer.renderer = Renderer.fromJSON(renderer);\r\n\r\n                    });\r\n                    layerids.reverse();\r\n\r\n                    self.identifyTask = new IdentifyTask(self.props.src);\r\n                    self.params = new IdentifyParameters();\r\n                    self.params.tolerance = 3;\r\n                    self.params.layerIds = layerids;\r\n                    self.params.layerOption = \"visible\";\r\n                    self.params.width = self.state.view.width;\r\n                    self.params.height = self.state.view.height;\r\n                    self.params.returnGeometry = true;\r\n                    self.params.returnGeometry = self.state.blockSelect;\r\n\r\n                    //  console.log(self.params);\r\n\r\n                });\r\n\r\n                self.layerRef = maplayer;\r\n                self.state.map.add(maplayer);\r\n            }\r\n\r\n\r\n            if (self.props.type === \"image\") {\r\n\r\n\r\n                var imagelayer = new ImageryLayer({\r\n                    url: self.props.src,\r\n                    format: \"jpgpng\" // server exports in either jpg or png format\r\n                });\r\n                self.layerRef = imagelayer;\r\n                self.state.map.add(imagelayer);\r\n\r\n            }\r\n\r\n            if (self.props.type === \"geojson\") {\r\n\r\n                var geojsonLayer = new GraphicsLayer({ title: 'GeoJSON Layer', listMode: \"hide\" });\r\n                // var geojsonLayer = new GeoJSONLayer({\r\n                //     //source: self.props.src,\r\n                //     //copyright: \"USGS Earthquakes\",\r\n                //     //popupTemplate: template\r\n                //   });\r\n                var dataarr = [];\r\n\r\n                if (typeof self.props.src === 'object') {\r\n                    if (self.props.src.features) {\r\n                        dataarr = self.props.src.features;\r\n                    }\r\n                    else {\r\n                        dataarr = self.props.src;\r\n                    }\r\n                }\r\n\r\n                if (self.props.title) {\r\n\r\n                    geojsonLayer.title = self.props.title;\r\n                }\r\n\r\n\r\n                dataarr.forEach(obj => {\r\n                    //var esrijson = geojsonToArcGIS(obj);\r\n                    if (obj.geometry.type === \"Point\") {\r\n\r\n                        var popupTemplate = {\r\n                            title: \"{Name}\",\r\n                            content: self.props.template,\r\n                        };\r\n\r\n\r\n                        var point = new Point({\r\n                            longitude: obj.geometry.coordinates[1],\r\n                            latitude: obj.geometry.coordinates[0],\r\n\r\n                        });\r\n\r\n                        // Create a symbol for drawing the point\r\n                        var markerSymbol = new SimpleMarkerSymbol({\r\n                            color: [226, 119, 40],\r\n                            outline: {\r\n                                color: [255, 255, 255],\r\n                                width: 1\r\n                            }\r\n                        });\r\n\r\n                        // Create a graphic and add the geometry and symbol to it\r\n                        var pointGraphic = new Graphic({\r\n                            geometry: point,\r\n                            symbol: markerSymbol,\r\n                            attributes: obj.properties,\r\n                            popupTemplate: popupTemplate,\r\n                            // extent : new Extent().centerAt(point)\r\n                        });\r\n\r\n                        // Add the graphic to the view\r\n                        geojsonLayer.graphics.add(pointGraphic);\r\n                    }\r\n\r\n\r\n                })\r\n\r\n\r\n                self.layerRef = geojsonLayer;\r\n                self.state.map.add(geojsonLayer);\r\n                // var imagelayer = new ImageryLayer({\r\n                //     url: self.props.src,\r\n                //     format: \"jpgpng\" // server exports in either jpg or png format\r\n                // });\r\n                // self.layerRef = imagelayer;\r\n                // self.state.map.add(imagelayer);\r\n\r\n            }\r\n\r\n\r\n            self.layerRef.when(function () {\r\n                setTimeout(() => {\r\n                    var evt = new Event('ready', { bubbles: true });\r\n                    Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n                    if (self.props.onready) {\r\n                        self.props.onready(evt);\r\n                    }\r\n                }, 500)\r\n            });\r\n\r\n            //this.state.view.graphics.add(graphic);\r\n        }); //.catch ((err) => console.error(err));\r\n    }\r\n\r\n    zoomto() {\r\n        if (this.layerRef.graphics) {\r\n            this.state.view.goTo(this.layerRef.graphics.items);\r\n        }\r\n\r\n    }\r\n\r\n    renderPopup(feature, result) {\r\n\r\n\r\n        if (result.layerId !== undefined && this.layerRenderers) {\r\n            var popuprender = this.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n\r\n            if (popuprender && popuprender.props.popup !== undefined) {\r\n                var ele = popuprender.props.popup(feature, result);\r\n\r\n\r\n\r\n\r\n                if (ele) {\r\n                    var workingdiv = document.createElement('div');\r\n                    ReactDOM.render(ele, workingdiv);\r\n                    return workingdiv;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        var popupText = \"\";\r\n        var atts = Object.getOwnPropertyNames(feature.attributes);\r\n        atts.forEach(att => {\r\n            if (att === 'layerName') {\r\n\r\n            }\r\n            else {\r\n                popupText += `<b>${att}</b> : ${feature.attributes[att]}<br/>`;\r\n            }\r\n        });\r\n\r\n        return popupText;\r\n\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n    identify(event, callback) {\r\n\r\n        var self = this;\r\n        if (this.props.type === \"geojson\") {\r\n\r\n            this.state.view.hitTest(event).then((htresponse) => {\r\n\r\n                // console.log(\"Identify on geojson\");\r\n                //console.log(htresponse);\r\n                var mapPoint = event.mapPoint;\r\n                var response = {\r\n                    layer: self.layerRef,\r\n                    results: htresponse.results.map(r => { return { feature: r.graphic, layerName: self.layerRef.title }; }),\r\n                }\r\n                callback(response)\r\n            });\r\n\r\n        }\r\n        else {\r\n\r\n\r\n            if (!this.params) { callback(null); return; }\r\n\r\n            this.params.geometry = event.mapPoint;\r\n            this.params.mapExtent = this.state.view.extent;\r\n            this.params.returnGeometry = true;\r\n            //document.getElementById(\"viewDiv\").style.cursor = \"wait\";\r\n            this.identifyTask.execute(this.params).then(function (response) {\r\n\r\n                callback(response);\r\n\r\n\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLayer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { arcgisToGeoJSON } from '@esri/arcgis-to-geojson-utils';\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport ArcticMapLayer from './ArcticMapLayer';\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\nimport './ArcticMapEdit.css'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\n\r\nclass ArcticMapEdit extends React.Component {\r\n    static displayName = 'ArcticMapEdit';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        props.map.editor = this;\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            hideEditors: false,\r\n            editing: false,\r\n            showUploading: false,\r\n            hidden: !this.props.hidden ? false : true,\r\n        };\r\n\r\n        this.uploadPanel = React.createRef();\r\n    }\r\n\r\n\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n\r\n\r\n        var self = this;\r\n        loadModules([\"esri/Graphic\",\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/widgets/Sketch/SketchViewModel\",\r\n            \"esri/geometry/Geometry\",\r\n            \"esri/geometry/Polygon\",\r\n            \"esri/geometry/geometryEngine\"\r\n        ]).then(([\r\n            Graphic,\r\n            GraphicsLayer,\r\n            SketchViewModel,\r\n            Geometry,\r\n            Polygon,\r\n            geometryEngine\r\n        ]) => {\r\n            const tempGraphicsLayer = new GraphicsLayer({ title: 'Edit Layer', listMode: \"hide\" });\r\n            self.setState({ tempGraphicsLayer });\r\n\r\n            self.state.map.add(tempGraphicsLayer);\r\n\r\n\r\n            const sketchViewModel = new SketchViewModel({\r\n                view: self.state.view,\r\n                layer: tempGraphicsLayer,\r\n                defaultUpdateOptions :{\r\n                   // toggleToolOnClick : false\r\n                },\r\n                pointSymbol: {\r\n                    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n                    style: \"circle\",\r\n                    color: \"yellow\",\r\n                    size: \"3px\",\r\n                    outline: { // autocasts as new SimpleLineSymbol()\r\n                        color: [255, 255, 255],\r\n                        width: 3\r\n                    }\r\n                },\r\n                polylineSymbol: {\r\n                    type: \"simple-line\", // autocasts as new SimpleLineSymbol()\r\n                    color: \"yellow\",\r\n                    width: \"3\",\r\n                    style: \"solid\"\r\n                },\r\n                polygonSymbol: {\r\n                    type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                    color: \"rgba(224, 206, 69, 0.8)\",\r\n                    style: \"solid\",\r\n                    outline: {\r\n                        color: \"yellow\",\r\n                        width: 3\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            self.setState({ tempGraphicsLayer, sketchViewModel });\r\n\r\n            self.setUpClickHandler.bind(this);\r\n\r\n            sketchViewModel.on(\"create\", (event) => {\r\n\r\n                if (event.state === 'complete') {\r\n\r\n                    tempGraphicsLayer.graphics = [event.graphic];\r\n                    if (this.props.single) {\r\n\r\n                        this.setState({ hideEditors: true });\r\n                    }\r\n\r\n\r\n\r\n                    setTimeout(() => {\r\n\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphic.geometry.toJSON()), datajson: event.graphic.toJSON(), editing: false });\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n            sketchViewModel.on(\"update\", (event) => {\r\n                self.setState({ editing: true });\r\n                if(event.state === 'start' && self.state.mode === 'select'){\r\n                    return false;\r\n                }\r\n                if (event.state === 'complete' || event.state === 'cancel') {\r\n                    // const graphic = new Graphic({\r\n                    //     geometry: event.graphic.geometry,\r\n                    //     symbol: event.graphic.symbol\r\n                    // });\r\n                    //tempGraphicsLayer.add(event.graphic);\r\n                    // if (this.props.single) {\r\n                    //     console.log(\"Added one feature\");\r\n                    //     this.setState({ hideEditors: true });\r\n                    // }\r\n\r\n                    setTimeout(() => {\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphics[0].geometry.toJSON()), datajson: event.graphics[0].toJSON(), });\r\n                        //this.geojson = event.geometry;\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n                }\r\n            });\r\n\r\n            // Listen the sketchViewModel's update-complete and update-cancel events\r\n            sketchViewModel.on(\"update-complete\", (event) => {\r\n                event.graphic.geometry = event.geometry;\r\n                tempGraphicsLayer.graphics = [event.graphic];\r\n                //tempGraphicsLayer.add(event.graphic);\r\n\r\n                // set the editGraphic to null update is complete or cancelled.\r\n                self.state.editGraphic = null;\r\n\r\n\r\n\r\n            });\r\n\r\n\r\n\r\n            this.top_right_node = document.createElement(\"div\");\r\n            self.state.view.ui.add(this.top_right_node, \"top-right\");\r\n\r\n            self.setState({ loaded: true })\r\n\r\n            //self.setUpClickHandler();\r\n\r\n\r\n            // scoped methods\r\n            self.setEditFeature = (feature, nofire, type, zoomto, addto, trim) => {\r\n                if (nofire === null) {\r\n                    nofire = false;\r\n                }\r\n\r\n                if (type === null) {\r\n                    type = \"polygon\";\r\n                }\r\n\r\n                if (zoomto === null) {\r\n                    zoomto = true;\r\n                }\r\n\r\n                if (addto === null) {\r\n                    addto = false;\r\n                }\r\n                if (trim === null) {\r\n                    trim = false;\r\n                }\r\n\r\n                if (!feature.geometry.type) {\r\n                    if (type === \"polygon\") {\r\n\r\n                        feature.geometry = new Polygon(feature.geometry);\r\n                        feature.geometry.type = \"polygon\";\r\n                    }\r\n                }\r\n\r\n                this.state.sketchViewModel.cancel();\r\n                if (!addto) {\r\n                    this.state.tempGraphicsLayer.removeAll();\r\n                }\r\n                this.setState({ hideEditors: false, geojson: null });\r\n\r\n\r\n                var graphic = null;\r\n                if (!feature.geometry.toJSON && feature.symbol) {\r\n                    graphic = Graphic.fromJSON(feature);\r\n\r\n                }\r\n                else {\r\n\r\n\r\n\r\n                    graphic = new Graphic({\r\n                        geometry: feature.geometry,\r\n                        symbol: this.state.sketchViewModel.polygonSymbol\r\n                    });\r\n\r\n                }\r\n\r\n                if (graphic.geometry === null) {\r\n                    graphic.geometry = feature.geometry;\r\n                }\r\n\r\n\r\n                if (trim) {\r\n                    if (this.state.tempGraphicsLayer.graphics.items.length > 0) {\r\n\r\n                        var geometrys = this.state.tempGraphicsLayer.graphics.items.map(i => i.geometry);\r\n\r\n                        var merge = geometryEngine.union(geometrys);\r\n                        merge = geometryEngine.difference(merge, graphic.geometry);\r\n                        graphic = new Graphic({\r\n                            geometry: merge,\r\n                            symbol: this.state.sketchViewModel.polygonSymbol\r\n                        })\r\n                        this.state.tempGraphicsLayer.graphics = [graphic]\r\n\r\n                    }\r\n                }\r\n                else {\r\n                    this.state.tempGraphicsLayer.add(graphic);\r\n\r\n                    if (this.state.tempGraphicsLayer.graphics.items.length > 0) {\r\n\r\n                        var geometrys = this.state.tempGraphicsLayer.graphics.items.map(i => i.geometry);\r\n\r\n\r\n                        var merge = geometryEngine.union(geometrys);\r\n\r\n                        graphic = new Graphic({\r\n                            geometry: merge,\r\n                            symbol: this.state.sketchViewModel.polygonSymbol\r\n                        })\r\n                        this.state.tempGraphicsLayer.graphics = [graphic]\r\n                    }\r\n                }\r\n                //this.state.tempGraphicsLayer.graphics = [graphic];\r\n                if (this.props.single) {\r\n\r\n                    this.setState({ hideEditors: true });\r\n                }\r\n\r\n                if (zoomto) {\r\n\r\n                    self.state.view.goTo(graphic);\r\n                }\r\n\r\n\r\n                var geometry = feature.geometry;\r\n                if (geometry && !geometry.toJSON) {\r\n                    geometry = Geometry.fromJSON(geometry);\r\n                }\r\n\r\n                this.setState({ geojson: arcgisToGeoJSON(geometry.toJSON()), datajson: graphic.toJSON(), });\r\n\r\n                if (nofire === true) {\r\n\r\n                }\r\n                else {\r\n                    self.firenewfeature();\r\n                }\r\n\r\n            };\r\n\r\n\r\n            self.setEditFeature = self.setEditFeature.bind(self);\r\n\r\n\r\n\r\n            self.setGeoJson = (geojson) => {\r\n                //var esrijson = geojsonToArcGIS(geojson);\r\n\r\n\r\n            }\r\n            self.setGeoJson = self.setGeoJson.bind(self);\r\n\r\n\r\n        }); //.catch ((err) => console.error(err));\r\n\r\n\r\n    }\r\n\r\n\r\n    firenewfeature() {\r\n        var self = this;\r\n        var evt = new Event('newfeature', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: this, enumerable: true });\r\n        evt.data = self.state.datajson;\r\n\r\n        if (self.props.onnewfeature) {\r\n            self.props.onnewfeature(evt);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            self.setState({ editing: false });\r\n        }, 200);\r\n    }\r\n\r\n    addPointClick() {\r\n        this.state.sketchViewModel.create(\"point\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n    addLineClick() {\r\n        this.state.sketchViewModel.create(\"polyline\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addPolyClick() {\r\n        this.state.sketchViewModel.create(\"polygon\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addRecClick() {\r\n        this.state.sketchViewModel.create(\"rectangle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addCircleClick() {\r\n        this.state.sketchViewModel.create(\"circle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n\r\n\r\n    fileUploaded(evt) {\r\n        var self = this;\r\n        var fileName = evt.target.value.toLowerCase();\r\n        if (fileName.indexOf(\".zip\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n            self.processShapeFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".kml\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n            self.processKMLFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".geojson\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n\r\n            self.processGeojsonFile(fileName, evt.target);\r\n        }\r\n\r\n        else {\r\n            document.getElementById(\"upload-status\").innerHTML =\r\n                '<p style=\"color:red\">Only shapefile(.zip), .kml, or .geojson are supported</p>'\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    readTextFile(file) {\r\n        return new Promise((res, rej) => {\r\n            var fr = new FileReader();\r\n            fr.onload = (evt) => {\r\n                res(evt.target.result);\r\n            }\r\n            fr.readAsText(file);\r\n        });\r\n    }\r\n\r\n    kmlColor(v) {\r\n        var color, opacity;\r\n        v = v || '';\r\n        if (v.substr(0, 1) === '#') { v = v.substr(1); }\r\n        if (v.length === 6 || v.length === 3) { color = v; }\r\n        if (v.length === 8) {\r\n            opacity = parseInt(v.substr(0, 2), 16) / 255;\r\n            color = '#' + v.substr(6, 2) +\r\n                v.substr(4, 2) +\r\n                v.substr(2, 2);\r\n        }\r\n        return [color, isNaN(opacity) ? undefined : opacity];\r\n    }\r\n\r\n    processKMLFile(fileName, form) {\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '')\r\n        var self = this;\r\n\r\n\r\n\r\n        this.readTextFile(form.files[0]).then(text => {\r\n            var parser = new DOMParser();\r\n            var gj = self.fc()\r\n            var xmlDoc = parser.parseFromString(text, \"text/xml\");\r\n            var placemarks = self.get(xmlDoc, \"Placemark\");\r\n            var styles = self.get(xmlDoc, \"Style\");\r\n            var styleMaps = self.get(xmlDoc, \"StyleMap\");\r\n            var styleIndex = {};\r\n            var styleByHash = {};\r\n            var styleMapIndex = {};\r\n            for (var k = 0; k < styles.length; k++) {\r\n                var hash = self.okhash(self.xml2str(styles[k])).toString(16);\r\n                styleIndex['#' + self.attr(styles[k], 'id')] = hash;\r\n                styleByHash[hash] = styles[k];\r\n            }\r\n            for (var l = 0; l < styleMaps.length; l++) {\r\n                styleIndex['#' + self.attr(styleMaps[l], 'id')] = self.okhash(self.xml2str(styleMaps[l])).toString(16);\r\n                var pairs = self.get(styleMaps[l], 'Pair');\r\n                var pairsMap = {};\r\n                for (var m = 0; m < pairs.length; m++) {\r\n                    pairsMap[self.nodeVal(self.get1(pairs[m], 'key'))] = self.nodeVal(self.get1(pairs[m], 'styleUrl'));\r\n                }\r\n                styleMapIndex['#' + self.attr(styleMaps[l], 'id')] = pairsMap;\r\n\r\n            }\r\n            for (var j = 0; j < placemarks.length; j++) {\r\n                gj.features = gj.features.concat(self.getPlacemark(placemarks[j]));\r\n            }\r\n            \r\n            var features = [];\r\n\r\n            gj.features.forEach(f=> {\r\n                var esrijson = geojsonToArcGIS(f);\r\n            \r\n             \r\n                features.push(esrijson);\r\n            });\r\n            self.addGeojsonToMap(features, file);\r\n            self.uploadPanel.current.toggle();\r\n\r\n        });\r\n\r\n\r\n    }\r\n    getPlacemark(root) {\r\n        var geomsAndTimes = this.getGeometry(root), i, properties = {},\r\n            name = this.nodeVal(this.get1(root, 'name')),\r\n            address = this.nodeVal(this.get1(root, 'address')),\r\n            styleUrl = this.nodeVal(this.get1(root, 'styleUrl')),\r\n            styleIndex = {},\r\n            styleMapIndex = {},\r\n            styleByHash = {},\r\n            description = this.nodeVal(this.get1(root, 'description')),\r\n            timeSpan = this.get1(root, 'TimeSpan'),\r\n            timeStamp = this.get1(root, 'TimeStamp'),\r\n            extendedData = this.get1(root, 'ExtendedData'),\r\n            lineStyle = this.get1(root, 'LineStyle'),\r\n            polyStyle = this.get1(root, 'PolyStyle'),\r\n            visibility = this.get1(root, 'visibility');\r\n\r\n        if (!geomsAndTimes.geoms.length) return [];\r\n        if (name) properties.name = name;\r\n        if (address) properties.address = address;\r\n\r\n        if (styleUrl) {\r\n            if (styleUrl[0] !== '#') {\r\n                styleUrl = '#' + styleUrl;\r\n            }\r\n            properties.styleUrl = styleUrl;\r\n            if (styleIndex[styleUrl]) {\r\n                properties.styleHash = styleIndex[styleUrl];\r\n            }\r\n            if (styleMapIndex[styleUrl]) {\r\n                properties.styleMapHash = styleMapIndex[styleUrl];\r\n                properties.styleHash = styleIndex[styleMapIndex[styleUrl].normal];\r\n            }\r\n            var style = styleByHash[properties.styleHash];\r\n            if (style) {\r\n                if (!lineStyle) lineStyle = this.get1(style, 'LineStyle');\r\n                if (!polyStyle) polyStyle = this.get1(style, 'PolyStyle');\r\n                var iconStyle = this.get1(style, 'IconStyle');\r\n                if (iconStyle) {\r\n                    var icon = this.get1(iconStyle, 'Icon');\r\n                    if (icon) {\r\n                        var href = this.nodeVal(this.get1(icon, 'href'));\r\n                        if (href) properties.icon = href;\r\n                    }\r\n                }\r\n            }\r\n            if (description) properties.description = description;\r\n            if (timeSpan) {\r\n                var begin = this.nodeVal(this.get1(timeSpan, 'begin'));\r\n                var end = this.nodeVal(this.get1(timeSpan, 'end'));\r\n                properties.timespan = { begin: begin, end: end };\r\n            }\r\n            if (timeStamp) {\r\n                properties.timestamp = this.nodeVal(this.get1(timeStamp, 'when'));\r\n            }\r\n            if (lineStyle) {\r\n                var linestyles = this.kmlColor(this.nodeVal(this.get1(lineStyle, 'color'))),\r\n                    color = linestyles[0],\r\n                    opacity = linestyles[1],\r\n                    width = parseFloat(this.nodeVal(this.get1(lineStyle, 'width')));\r\n                if (color) properties.stroke = color;\r\n                if (!isNaN(opacity)) properties['stroke-opacity'] = opacity;\r\n                if (!isNaN(width)) properties['stroke-width'] = width;\r\n            }\r\n            if (polyStyle) {\r\n                var polystyles = this.kmlColor(this.nodeVal(this.get1(polyStyle, 'color'))),\r\n                    pcolor = polystyles[0],\r\n                    popacity = polystyles[1],\r\n                    fill = this.nodeVal(this.get1(polyStyle, 'fill')),\r\n                    outline = this.nodeVal(this.get1(polyStyle, 'outline'));\r\n                if (pcolor) properties.fill = pcolor;\r\n                if (!isNaN(popacity)) properties['fill-opacity'] = popacity;\r\n                if (fill) properties['fill-opacity'] = fill === '1' ? properties['fill-opacity'] || 1 : 0;\r\n                if (outline) properties['stroke-opacity'] = outline === '1' ? properties['stroke-opacity'] || 1 : 0;\r\n            }\r\n            if (extendedData) {\r\n                var datas = this.get(extendedData, 'Data'),\r\n                    simpleDatas = this.get(extendedData, 'SimpleData');\r\n\r\n                for (i = 0; i < datas.length; i++) {\r\n                    properties[datas[i].getAttribute('name')] = this.nodeVal(this.get1(datas[i], 'value'));\r\n                }\r\n                for (i = 0; i < simpleDatas.length; i++) {\r\n                    properties[simpleDatas[i].getAttribute('name')] = this.nodeVal(simpleDatas[i]);\r\n                }\r\n            }\r\n\r\n            if (visibility) {\r\n                properties.visibility = this.nodeVal(visibility);\r\n            }\r\n\r\n            if (geomsAndTimes.coordTimes.length) {\r\n                properties.coordTimes = (geomsAndTimes.coordTimes.length === 1) ?\r\n                    geomsAndTimes.coordTimes[0] : geomsAndTimes.coordTimes;\r\n            }\r\n\r\n            var feature = {\r\n                type: 'Feature',\r\n                geometry: (geomsAndTimes.geoms.length === 1) ? geomsAndTimes.geoms[0] : {\r\n                    type: 'GeometryCollection',\r\n                    geometries: geomsAndTimes.geoms\r\n                },\r\n                properties: properties\r\n            };\r\n            if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n            return [feature];\r\n\r\n        } else {\r\n\r\n            var feature = {\r\n                type: 'Feature',\r\n                geometry: (geomsAndTimes.geoms.length === 1) ? geomsAndTimes.geoms[0] : {\r\n                    type: 'GeometryCollection',\r\n                    geometries: geomsAndTimes.geoms\r\n                },\r\n                properties: properties\r\n            };\r\n            if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n            return [feature];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getGeometry(root) {\r\n\r\n        var geotypes = ['Polygon', 'LineString', 'Point', 'Track', 'gx:Track'];\r\n        var geomNode, geomNodes, i, j, k, geoms = [], coordTimes = [];\r\n        if (this.get1(root, 'MultiGeometry')) { return this.getGeometry(this.get1(root, 'MultiGeometry')); }\r\n        if (this.get1(root, 'MultiTrack')) { return this.getGeometry(this.get1(root, 'MultiTrack')); }\r\n        if (this.get1(root, 'gx:MultiTrack')) { return this.getGeometry(this.get1(root, 'gx:MultiTrack')); }\r\n        for (i = 0; i < geotypes.length; i++) {\r\n            geomNodes = this.get(root, geotypes[i]);\r\n            if (geomNodes) {\r\n                for (j = 0; j < geomNodes.length; j++) {\r\n                    geomNode = geomNodes[j];\r\n                    if (geotypes[i] === 'Point') {\r\n                        geoms.push({\r\n                            type: 'Point',\r\n                            coordinates: this.coord1(this.nodeVal(this.get1(geomNode, 'coordinates')))\r\n                        });\r\n                    } else if (geotypes[i] === 'LineString') {\r\n                        geoms.push({\r\n                            type: 'LineString',\r\n                            coordinates: this.coord(this.nodeVal(this.get1(geomNode, 'coordinates')))\r\n                        });\r\n                    } else if (geotypes[i] === 'Polygon') {\r\n                        var rings = this.get(geomNode, 'LinearRing'),\r\n                            coords = [];\r\n                        for (k = 0; k < rings.length; k++) {\r\n                            coords.push(this.coord(this.nodeVal(this.get1(rings[k], 'coordinates'))));\r\n                        }\r\n                        geoms.push({\r\n                            type: 'Polygon',\r\n                            coordinates: coords\r\n                        });\r\n                    } else if (geotypes[i] === 'Track' ||\r\n                        geotypes[i] === 'gx:Track') {\r\n                        var track = this.gxCoords(geomNode);\r\n                        geoms.push({\r\n                            type: 'LineString',\r\n                            coordinates: track.coords\r\n                        });\r\n                        if (track.times.length) coordTimes.push(track.times);\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                geoms: geoms,\r\n                coordTimes: coordTimes\r\n            };\r\n        }\r\n    }\r\n\r\n    nodeVal(x) {\r\n        if (x) { this.norm(x); }\r\n        return (x && x.textContent) || '';\r\n    }\r\n\r\n    fc() {\r\n        return {\r\n            type: 'FeatureCollection',\r\n            features: []\r\n        }\r\n    }\r\n    xml2str(str) {\r\n        var serializer;\r\n        if (typeof XMLSerializer !== 'undefined') {\r\n            /* istanbul ignore next */\r\n            serializer = new XMLSerializer();\r\n        }\r\n        if (str.xml !== undefined) return str.xml;\r\n        return serializer.serializeToString(str);\r\n    }\r\n\r\n    okhash(x) {\r\n        if (!x || !x.length) return 0;\r\n        for (var i = 0, h = 0; i < x.length; i++) {\r\n            h = ((h << 5) - h) + x.charCodeAt(i) | 0;\r\n        } return h;\r\n    }\r\n\r\n\r\n    get(x, y) { return x.getElementsByTagName(y); }\r\n    attr(x, y) { return x.getAttribute(y); }\r\n    attrf(x, y) { return parseFloat(this.attr(x, y)); }\r\n    get1(x, y) {\r\n        var n = this.get(x, y);\r\n        return n.length ? n[0] : null;\r\n    }\r\n    norm(el) { if (el.normalize) { el.normalize(); } return el; }\r\n    coord1(v) {\r\n        var removeSpace = /\\s*/g;\r\n        return this.numarray(v.replace(removeSpace, '').split(','));\r\n    }\r\n    coord(v) {\r\n        var trimSpace = /^\\s*|\\s*$/g;\r\n        var splitSpace = /\\s+/;\r\n        var coords = v.replace(trimSpace, '').split(splitSpace), o = [];\r\n\r\n        for (var i = 0; i < coords.length; i++) {\r\n            o.push(this.coord1(coords[i]));\r\n        }\r\n\r\n        return o;\r\n    }\r\n    gxCoord(v) { return this.numarray(v.split(' ')); }\r\n    numarray(x) {\r\n        for (var j = 0, o = []; j < x.length; j++) { o[j] = parseFloat(x[j]); }\r\n        return o;\r\n    }\r\n    gxCoords(root) {\r\n        var elems = this.get(root, 'coord', 'gx'), coords = [], times = [];\r\n        if (elems.length === 0) elems = this.get(root, 'gx:coord');\r\n        for (var i = 0; i < elems.length; i++) coords.push(this.gxCoord(this.nodeVal(elems[i])));\r\n        var timeElems = this.get(root, 'when');\r\n        for (var j = 0; j < timeElems.length; j++) times.push(this.nodeVal(timeElems[j]));\r\n        return {\r\n            coords: coords,\r\n            times: times\r\n        };\r\n    }\r\n\r\n    processGeojsonFile(fileName, form) {\r\n\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '')\r\n        var self = this;\r\n        this.readTextFile(form.files[0]).then(text => {\r\n\r\n            var geojson = JSON.parse(text);\r\n            var features = [];\r\n\r\n            geojson.features.forEach(f => {\r\n                var esrijson = geojsonToArcGIS(f);\r\n\r\n\r\n                features.push(esrijson);\r\n            });\r\n\r\n            self.addGeojsonToMap(features, file);\r\n            self.uploadPanel.current.toggle();\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    processShapeFile(fileName, form) {\r\n\r\n\r\n        var self = this;\r\n        self.uploadPanel.current.toggle();\r\n        var name = fileName.split(\".\");\r\n        name = name[0].replace(\"c:\\\\fakepath\\\\\", \"\");\r\n\r\n        var parms = {\r\n            name: name,\r\n            targetSR: self.state.view.extent.spatialReference,\r\n            maxRecordCount: 1000,\r\n            enforceInputFileSizeLimit: true,\r\n            enforceOutputJsonSizeLimit: true,\r\n        };\r\n\r\n        parms.generalize = true;\r\n        parms.maxAllowableOffset = 10;\r\n        parms.reducePrecision = true;\r\n        parms.numberOfDigitsAfterDecimal = 0;\r\n        var myContent = {\r\n            filetype: \"shapefile\",\r\n            publishParameters: JSON.stringify(parms),\r\n            f: \"json\",\r\n            'content-type': 'multipart/form-data',\r\n        };\r\n\r\n        var portalUrl = \"https://www.arcgis.com\";\r\n\r\n        var query = Object.keys(myContent)\r\n            .map(k => escape(k) + '=' + escape(myContent[k]))\r\n            .join('&');\r\n\r\n\r\n\r\n        loadModules(['esri/request'])\r\n            .then(([request]) => {\r\n                request(portalUrl + \"/sharing/rest/content/features/generate\",\r\n                    {\r\n                        query: myContent,\r\n                        body: new FormData(form.form),\r\n                        //body: document.getElementById(\"uploadForm\"),\r\n                        responseType: \"json\"\r\n                    })\r\n                    .then(function (response) {\r\n                        var layerName = response.data.featureCollection.layers[0].layerDefinition.name;\r\n                        self.addShapefileToMap(response.data.featureCollection, layerName);\r\n                    })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    addShapefileToMap(featureCollection, layerName) {\r\n        var self = this;\r\n        loadModules(['esri/Graphic', 'esri/layers/FeatureLayer', 'esri/layers/support/Field', 'esri/PopupTemplate'])\r\n            .then(([Graphic, FeatureLayer, Field, PopupTemplate]) => {\r\n                var sourceGraphics = [];\r\n                var layers = featureCollection.layers.map(function (layer) {\r\n\r\n                    var graphics = layer.featureSet.features.map(function (feature) {\r\n                        var gfx = Graphic.fromJSON(feature);\r\n                        gfx.symbol = {\r\n                            type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                            color: \"rgba(224, 206, 69, 0.8)\",\r\n                            style: \"solid\",\r\n                            outline: {\r\n                                color: \"yellow\",\r\n                                width: 3\r\n                            }\r\n                        };\r\n                        return gfx;\r\n                    });\r\n                    sourceGraphics = sourceGraphics.concat(graphics);\r\n                    var featureLayer = new FeatureLayer({\r\n                        title: \"Shape File: \" + layerName,\r\n                        //objectIDField: \"FID\",\r\n                        source: graphics,\r\n                        fields: layer.layerDefinition.fields.map(function (field) {\r\n                            return Field.fromJSON(field);\r\n                        })\r\n                    });\r\n                    return featureLayer;\r\n\r\n                });\r\n\r\n\r\n                layers[0].title = layerName;\r\n\r\n\r\n                self.state.map.addMany(layers);\r\n\r\n                self.state.view.goTo(sourceGraphics);\r\n\r\n                var props = {\r\n                    title: \"Shape File: \" + layerName,\r\n                    transparency: \".32\",\r\n                    identmaxzoom: \"13\",\r\n                    blockidentselect: true,\r\n                    type: \"geojson\",\r\n                    src: \"\",\r\n                    map: self.state.map,\r\n                    view: self.state.view\r\n                };\r\n\r\n                var aml = new ArcticMapLayer(props);\r\n                aml.layerRef = layers[0];\r\n                aml.context = window._map.layers[0].context;\r\n                aml.layerRef.title = props.title;\r\n                //aml.componentDidMount();\r\n                //console.log(\"aml\", aml);\r\n                self.state.map.amlayers.push(aml);\r\n                //window._map.props.childern.push(aml);\r\n\r\n                //self.setState({ fileLayer:  aml });\r\n\r\n            });\r\n    }\r\n\r\n\r\n    addGeojsonToMap(featureCollection, layerName) {\r\n        var self = this;\r\n        loadModules(['esri/Graphic', 'esri/layers/FeatureLayer', 'esri/layers/support/Field', 'esri/PopupTemplate', \"esri/renderers/SimpleRenderer\"])\r\n            .then(([Graphic, FeatureLayer, Field, PopupTemplate, SimpleRenderer]) => {\r\n                var sourceGraphics = [];\r\n                var symbol = {\r\n                    type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                    color: \"rgba(224, 206, 69, 0.8)\",\r\n                    style: \"solid\",\r\n                    outline: {\r\n                        color: \"red\",\r\n                        width: 2\r\n                    }\r\n                };\r\n\r\n                var i = 0;\r\n                var graphics = featureCollection.map(feature => {\r\n\r\n                    feature.attributes[\"OBJECTID\"] = i++;\r\n                    var gfx = Graphic.fromJSON(feature);\r\n\r\n                    gfx.symbol = symbol;\r\n                    return gfx;\r\n\r\n                });\r\n\r\n\r\n                var featureLayer = new FeatureLayer({\r\n                    title: \"GEOJSON File: \" + layerName,\r\n                    objectIdField: \"OBJECTID\",\r\n                    //renderer : SimpleRenderer.fromJSON(symbol) ,\r\n                    source: graphics,\r\n                    // fields: layer.layerDefinition.fields.map(function (field) {\r\n                    //     return Field.fromJSON(field);\r\n                    // })\r\n\r\n                });\r\n\r\n\r\n                self.state.map.add(featureLayer);\r\n                self.state.view.goTo(graphics);\r\n\r\n\r\n\r\n\r\n                var props = {\r\n                    title: \"GEOJSON File: \" + layerName,\r\n                    transparency: \".32\",\r\n                    identmaxzoom: \"13\",\r\n                    blockidentselect: true,\r\n                    type: \"geojson\",\r\n                    src: \"\",\r\n                    map: self.state.map,\r\n                    view: self.state.view\r\n                };\r\n\r\n                var aml = new ArcticMapLayer(props);\r\n                aml.layerRef = featureLayer;\r\n                aml.context = window._map.layers[0].context;\r\n                aml.layerRef.title = props.title;\r\n\r\n                self.state.map.amlayers.push(aml);\r\n\r\n\r\n\r\n\r\n\r\n            });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    reset() {\r\n        this.state.sketchViewModel.cancel();\r\n        this.state.tempGraphicsLayer.removeAll();\r\n        this.setState({ hideEditors: false, geojson: null });\r\n\r\n    }\r\n\r\n    setmaptoselect() {\r\n\r\n        if (this.props.am.state.mode === \"select\") {\r\n            this.props.am.setMode(\"view\");\r\n            this.setState({ mode: \"view\" });\r\n        }\r\n        else {\r\n\r\n            this.props.am.setMode(\"select\");\r\n            this.setState({ mode: \"select\" });\r\n        }\r\n    }\r\n\r\n    widgetRender() {\r\n\r\n        var self = this;\r\n        var children = React.Children.map(this.props.children, function (child) {\r\n\r\n            return React.cloneElement(child, {\r\n\r\n\r\n                map: self.state.map,\r\n                view: self.state.view,\r\n                //ref: 'child-' + (index++)\r\n\r\n            })\r\n\r\n        })\r\n\r\n        if (this.state.hidden === true) {\r\n            return <div id=\"topbar\"></div>;\r\n        }\r\n\r\n        return <div id=\"topbar\">\r\n\r\n            {this.state.hideEditors === false &&\r\n                <span>\r\n                    {children}\r\n                    <ArcticMapButton showactive={this.props.am.state.mode === \"select\"} esriicon='cursor' title='Select' onclick={this.setmaptoselect.bind(this)} />\r\n                    {this.props.point &&\r\n\r\n                        <ArcticMapButton esriicon=\"blank-map-pin\" onclick={this.addPointClick.bind(this)} title=\"Draw point\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.line &&\r\n\r\n                        <ArcticMapButton esriicon=\"polyline\" onclick={this.addLineClick.bind(this)} title=\"Draw polyline\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.polygon &&\r\n\r\n                        <ArcticMapButton esriicon=\"polygon\" onclick={this.addPolyClick.bind(this)} title=\"Draw polygon\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.square &&\r\n\r\n                        <ArcticMapButton esriicon=\"checkbox-unchecked\" onclick={this.addRecClick.bind(this)} title=\"Draw rectangle\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.circle &&\r\n                        <ArcticMapButton esriicon=\"radio-unchecked\" onclick={this.addCircleClick.bind(this)} title=\"Draw circle\" ></ArcticMapButton>\r\n\r\n                    }\r\n                    {this.props.upload &&\r\n                        <ArcticMapPanel esriicon=\"upload\" title=\"Upload Polygon\" ref={this.uploadPanel}  >\r\n                            <br />\r\n                            <form encType=\"multipart/form-data\" method=\"post\" id=\"uploadForm\">\r\n                                <div className=\"field\">\r\n                                    <label className=\"file-upload\">\r\n                                        <p><strong>Select File</strong></p>\r\n                                        <input type=\"file\" name=\"file\" id=\"inFile\" onChange={this.fileUploaded.bind(this)} />\r\n                                    </label>\r\n                                </div>\r\n                            </form>\r\n                            <br />\r\n                            <span id=\"upload-status\"></span>\r\n\r\n                        </ArcticMapPanel>}\r\n                </span>\r\n            }\r\n            <ArcticMapButton esriicon=\"refresh\" onclick={this.reset.bind(this)} title=\"Clear graphics\" ></ArcticMapButton>\r\n\r\n\r\n\r\n        </div>;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.top_right_node) {\r\n            ReactDOM.render(\r\n                this.widgetRender(),\r\n                this.top_right_node\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        //return (<h2>Test</h2>);\r\n\r\n\r\n        return (<span>\r\n            {this.state.fileLayer}\r\n\r\n\r\n\r\n        </span>);\r\n    }\r\n\r\n    addGraphic(event) {\r\n        // Create a new graphic and set its geometry to\r\n        // `create-complete` event geometry.\r\n        // const graphic = new Graphic({\r\n        //     geometry: event.geometry,\r\n        //     symbol: sketchViewModel.graphic.symbol\r\n        // });\r\n        // tempGraphicsLayer.add(graphic);\r\n    }\r\n\r\n    updateGraphic(event) {\r\n        // event.graphic is the graphic that user clicked on and its geometry\r\n        // has not been changed. Update its geometry and add it to the layer\r\n        // event.graphic.geometry = event.geometry;\r\n        // tempGraphicsLayer.add(event.graphic);\r\n\r\n        // // set the editGraphic to null update is complete or cancelled.\r\n        // editGraphic = null;\r\n    }\r\n\r\n    setUpClickHandler() {\r\n        var self = this;\r\n        self.state.view.on(\"click\", function (event) {\r\n            event.stopPropagation();\r\n\r\n            self.state.view.hitTest(event).then(function (response) {\r\n                var results = response.results;\r\n                // Found a valid graphic\r\n                if (results.length && results[results.length - 1].graphic && self.map.mode != 'identify') {\r\n                    // Check if we're already editing a graphic\r\n                    // if (!self.state.editGraphic) {\r\n                    // Save a reference to the graphic we intend to update\r\n                    self.state.editGraphic = results[results.length - 1].graphic;\r\n                    // Remove the graphic from the GraphicsLayer\r\n                    // Sketch will handle displaying the graphic while being updated\r\n                    // self.state.tempGraphicsLayer.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    // self.state.view.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    //self.state.tempGraphicsLayer.remove(self.state.editGraphic);\r\n                    self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n                    //self.state.sketchViewModel.updateGraphics = [self.state.editGraphic];\r\n\r\n                    self.state.sketchViewModel.update([self.state.editGraphic]);\r\n\r\n                    //self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n\r\n                    //}\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    setActiveButton(selectedButton) {\r\n        // focus the view to activate keyboard shortcuts for sketching\r\n        // view.focus();\r\n        // var elements = document.getElementsByClassName(\"active\");\r\n        // for (var i = 0; i < elements.length; i++) {\r\n        //     elements[i].classList.remove(\"active\");\r\n        // }\r\n        // if (selectedButton) {\r\n        //     selectedButton.classList.add(\"active\");\r\n        // }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapEdit;","// WY060140N0660W0SN180ANENE\r\n\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport style from './ArcticMapLLDSearch.css';\r\n\r\nimport {\r\n    loadModules\r\n} from 'react-arcgis';\r\n\r\nclass ArcticMapLLDSearch extends React.Component {\r\nstatic displayName = 'ArcticMapLLDSearch';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules(['esri/Graphic',\r\n\r\n\r\n            'esri/geometry/Geometry',\r\n            'esri/geometry/Polygon',\r\n            \"esri/widgets/Search/SearchSource\",\r\n\r\n        ]).then(([\r\n            Graphic,\r\n\r\n\r\n            Geometry,\r\n            Polygon,\r\n            SearchSource,\r\n\r\n        ]) => {\r\n\r\n\r\n            //var elestring = this.createElementFromHTML( `<input type=\"text\" placeholder=\"Find address or place\" aria-label=\"Search\" autocomplete=\"off\" tabindex=\"0\" class=\"esri-input esri-search__input\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-owns=\"1687b00a338-widget-1-suggest-menu\" role=\"textbox\" data-node-ref=\"_inputNode\" title=\"Find address or place\">`);\r\n\r\n            self.top_right_node = document.createElement(\"div\");\r\n\r\n            self.Graphic = Graphic;\r\n            self.Geometry = Geometry;\r\n            self.Polygon = Polygon;\r\n\r\n            self.state.view.ui.add(self.top_right_node, {\r\n                position: \"top-right\",\r\n                index: 0\r\n            });\r\n\r\n\r\n\r\n            // ReactDOM.render(\r\n            //     self.widgetRender(),\r\n            //     self.top_right_node\r\n            // );\r\n\r\n\r\n            var url = \"https://api-adresse.data.gouv.fr/\";\r\n\r\n            self.search = () => {\r\n                return new SearchSource({\r\n                    name: 'Legal Land Description',\r\n                    placeholder: \"example: NV 21 T38N R56E SEC 10 ALIQ SESW\",\r\n                   \r\n                    getSuggestions: function (params) {\r\n                 \r\n\r\n                        return fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${params.suggestTerm.replace(/ /g, \"+\")}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n                       \r\n                            return data.features.map(function (feature) {\r\n                                return {\r\n                                    key: \"name\",\r\n                                    text: feature.attributes.landdescription,\r\n                                    sourceIndex: params.sourceIndex\r\n                                };\r\n                            });\r\n                        });\r\n\r\n\r\n                    },\r\n                \r\n                    getResults: function (params) {\r\n                     \r\n\r\n\r\n                        return fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${params.suggestResult.text.replace(/ /g, \"+\")}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n                        \r\n                            return data.features.map(function (feature) {\r\n\r\n\r\n                                var outfeature = Graphic.fromJSON(feature);\r\n                                \r\n                          \r\n\r\n                                return {\r\n                                    key: \"name\",\r\n                                    text: feature.attributes.landdescription,\r\n                                    sourceIndex: params.sourceIndex,\r\n                                    feature: outfeature,\r\n\r\n                                    name: feature.attributes.landdescription\r\n                                };\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n        });\r\n    }\r\n\r\n    searchLLD(event) {\r\n\r\n        var self = this;\r\n\r\n        fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${this.state.searchinput}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n   \r\n\r\n\r\n            var popupresults = data.features.map(function (feature) {\r\n\r\n                feature.geometry = self.Polygon.fromJSON(feature.geometry);\r\n\r\n                feature = new self.Graphic(feature);\r\n\r\n\r\n                var displayValue = feature.attributes.landdescription;\r\n\r\n\r\n                feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n                    title: 'Legal Land Description',\r\n                    content: `<b>LLD</b>: ${displayValue}`,\r\n                    actions: [{ title: \"Select\", id: \"select-action\" }]\r\n                }\r\n\r\n\r\n\r\n                return feature\r\n            })\r\n\r\n            if (popupresults.length > 0) {\r\n                self.state.view.popup.open({\r\n                    features: popupresults,\r\n                    location: event.mapPoint\r\n                })\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n\r\n        })\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({ searchinput: event.target.value });\r\n    }\r\n\r\n    widgetRender() {\r\n        return <div className={style.lldsearchbar}>\r\n\r\n\r\n            <div style={{ display: 'inline-block', height: '32px', marginTop: '0px' }}  >\r\n\r\n\r\n                <input style={{ display: 'inline-block', height: '32px', verticalAlign: 'top' }} value={this.state.searchinput} onChange={this.handleChange} type=\"text\" placeholder=\"Find legal land description\" aria-label=\"Search\" className=\"esri-input\" title=\"Find leagal land desription\" />\r\n\r\n                <div style={{ display: 'inline-block', width: '32px', height: '32px', verticalAlign: 'top' }} role=\"button\" title=\"Search\" className=\"esri-search__submit-button esri-widget--button\" onClick={this.searchLLD.bind(this)}>\r\n                    <span style={{ display: 'block', paddingTop: '8px' }} aria-hidden=\"true\" role=\"presentation\" className=\"esri-icon-search\"></span>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        </div>;\r\n    }\r\n\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLLDSearch;","import React from 'react';\r\nclass ArcticMapLayerPopup extends React.Component {\r\n    static displayName = 'ArcticMapLayerPopup';\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n        \r\n        return <span></span>;\r\n\r\n    }\r\n\r\n    renderPopup(context){\r\n        if(this.props.popup){\r\n            return this.props.popup(context);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default ArcticMapLayerPopup;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass ArcticMapControlArea extends React.Component {\r\n    static displayName = 'ArcticMapControlArea';\r\n    constructor(props) {\r\n        super(props)\r\n        \r\n        this.controlNode = document.createElement(\"div\");\r\n        this.props.view.ui.add(this.controlNode, this.props.location);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.controlNode) {\r\n            ReactDOM.render(this.widgetRender(), this.controlNode, ()=>{\r\n             \r\n            });\r\n        }\r\n    }\r\n\r\n    append(ele){\r\n        this.props.children.push(ele);\r\n    }\r\n\r\n    widgetRender() {\r\n\r\n        var self = this;\r\n        var index = 0\r\n     \r\n\r\n        var children = React.Children.map(this.props.children, function (child) {\r\n          \r\n      \r\n            // else if (child.type.name === 'ArcticMapLLDSearch') {\r\n      \r\n            //   return React.cloneElement(child, {\r\n            //   })\r\n      \r\n            // } \r\n      \r\n            \r\n              return React.cloneElement(child, {\r\n                am : self.props.am,\r\n                map : self.props.am.state.map,\r\n                view : self.props.am.state.view,\r\n                //hostDiv : self.controlNode\r\n                //ref: 'child-' + (index++)\r\n                //ref: (c) => { if (c) { self.childrenElements.push(c); } return 'child-' + (index++) }\r\n              })\r\n            \r\n          });\r\n\r\n        \r\n\r\n        return (<span className='arcticmap-area'>{children}</span>)\r\n    }\r\n    render() {\r\n        return (<span></span>);\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapControlArea;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\n\r\n\r\nclass ArcticMapIdentify extends React.Component {\r\n  static displayName = 'ArcticMapIdentify';\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { mode: 1 };\r\n\r\n  }\r\n\r\n  setmaptoidentify() {\r\n    this.props.am.setMode(\"identify\");\r\n    this.setState({ mode: \"identify\" });\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    //cursor\r\n\r\n    return (\r\n      <span>\r\n\r\n        <ArcticMapButton showactive={this.props.am.state.mode === \"identify\"} esriicon='question' title='Identify' onclick={this.setmaptoidentify.bind(this)} />\r\n          </span>\r\n\r\n\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default ArcticMapIdentify;","import React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport ArcticMapControlArea from './ArcticMapControlArea';\r\nimport { loadModules } from 'react-arcgis'\r\n\r\n\r\nclass ArcticMapBaseControl extends React.Component {\r\n    static displayName = \"ArcticMapBaseControl\";\r\n    constructor(props) {\r\n        super(props)\r\n\r\n       \r\n        this.state = {\r\n            zoomControl: null,\r\n            renderElements: [],\r\n            canReset: this.props.reset !== undefined,\r\n\r\n        }\r\n        var self = this;\r\n        this.zoomControlDiv = document.createElement(\"div\");\r\n        this.layersDiv = document.createElement(\"div\");\r\n\r\n        loadModules([\r\n            'esri/widgets/Zoom',\r\n            'esri/widgets/LayerList',\r\n            'esri/widgets/BasemapGallery',\r\n        ]).then(([\r\n            Zoom,\r\n            LayerList,\r\n            BasemapGallery\r\n        ]) => {\r\n\r\n            self.props.view.on('click', (event) => {\r\n\r\n                self.props.view.ui.remove(self.basemapGallery);\r\n\r\n            });\r\n\r\n            self.basemapGallery = new BasemapGallery({\r\n                view: props.view\r\n            })\r\n            self.basemapGallery.watch('activeBasemap', function (newValue, oldValue, property, object) {\r\n                self.props.view.ui.remove(self.basemapGallery);\r\n\r\n            });\r\n\r\n            var zoom = new Zoom({\r\n                view: props.view,\r\n                container: self.zoomControlDiv\r\n            })\r\n            self.state.zoomControl = zoom;\r\n            //this.props.hostDiv.appendChild(zoom);\r\n            //props.view.ui.add(zoom, props.hostDiv);\r\n            //self.state.children.push(self.zoomControlDiv);\r\n\r\n\r\n\r\n            var layerList = new LayerList({\r\n                view: props.view,\r\n                container: self.layersDiv,\r\n                listItemCreatedFunction: function (event) {\r\n                    const item = event.item\r\n                    item.panel = {\r\n                        content: 'legend',\r\n                        open: false\r\n                    }\r\n                }\r\n            });\r\n            //self.state.view.ui.add(layerList, 'top-left')\r\n\r\n\r\n            //var joined = self.state.renderElements.concat(self.zoomControlDiv);\r\n            this.setState({ renderElements: self.state.renderElements.concat(self.zoomControlDiv) })\r\n        })\r\n\r\n    }\r\n\r\n\r\n    handleShowBasemaps() {\r\n\r\n    }\r\n\r\n    renderZoomcontrol() {\r\n\r\n        return this.zoomControlDiv;\r\n    }\r\n\r\n    basemapclick() {\r\n        this.props.view.ui.add(this.basemapGallery, {\r\n            position: 'bottom-right'\r\n        })\r\n\r\n        //this.setState({ hideBasemapButton: true })\r\n        // self.state.view.ui.remove(self.basemapGallery);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div >\r\n\r\n                <ArcticMapControlArea am={this.props.am} view={this.props.view} location=\"bottom-right\">\r\n                    <div ref={(e) => { e && e.appendChild(this.zoomControlDiv) }} />\r\n\r\n\r\n                </ArcticMapControlArea>\r\n\r\n                <ArcticMapControlArea am={this.props.am} view={this.props.view} location=\"bottom-right\" >\r\n                    <ArcticMapPanel esriicon='layers' title='Data Layers' >\r\n                        <p>Toggle visibility of each data layer.</p>\r\n                        {this.state.canReset &&\r\n                            <p><a href=\"#\" style={{ color: '#71A3AF', textDecoration: 'none' }} onClick={this.props.reset}>\r\n                                <span style={{ height: \"10px\", width: \"10px\", marginRight: '10px', color: 'black' }} aria-hidden className=\"esri-icon esri-icon-trash\" ></span>\r\n                                Reset to Default Data Visibility</a></p>\r\n                        }\r\n                        <div ref={(e) => { e && e.appendChild(this.layersDiv) }} />\r\n                    </ArcticMapPanel>\r\n                </ArcticMapControlArea>\r\n\r\n               \r\n\r\n                <ArcticMapControlArea am={this.props.am} view={this.props.view} location=\"bottom-right\" >\r\n                    <ArcticMapButton esriicon='basemap' title='Basemaps' onclick={this.basemapclick.bind(this)} />\r\n                </ArcticMapControlArea>\r\n\r\n\r\n\r\n\r\n            </div>\r\n\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default ArcticMapBaseControl;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass ArcticMapLayerRenderer extends React.Component {\r\n    static displayName = 'ArcticMapLayerRenderer';\r\n    constructor(props) {\r\n        super(props)\r\n        if(props.style === undefined){\r\n            console.log(\"Missing style: Build Styles @ https://developers.arcgis.com/javascript/latest/sample-code/playground/live/index.html\")\r\n        }\r\n      \r\n    }\r\n\r\n   \r\n    render() {\r\n        return (<span></span>);\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapLayerRenderer;"],"names":["ArcticMapButton","props","state","esriicon","showactive","undefined","fireclick","e","onclick","style","padtop","arcticButton","marginTop","padbottom","marginBOttom","useEsriIcon","backgroundColor","esriClassName","bind","title","height","width","React","Component","displayName","loadingtext","ArcticMapLoader","loading","bg","styles","ArcticMapPanel","toggle","currvalue","open","setState","mapFrame","document","getElementsByClassName","renderEle","createElement","appendChild","map","view","on","renderPanel","ele","className","rightWidgetFull","fontSize","marginBottom","position","top","right","border","background","cursor","widgetContainer","children","render","eleempty","id","innerHTML","head","ArcticMap","lat","lng","mode","basemap","Number","parseInt","sr","handleMapLoad","handleMapClick","layers","self","index","childrenElements","Children","child","type","cloneElement","c","push","sort","l","reverse","bottom","event","ui","add","basemapGallery","hideBasemapButton","htmlString","div","trim","firstChild","json","nofire","editor","setEditFeature","val","amlayers","centerSplit","center","split","parseFloat","zoom","cntrlIsPressed","then","Locate","BasemapGallery","Home","Search","Request","_request","_map","request","popup","dockEnabled","dockOptions","watch","graphic","graphicTemplate","getEffectivePopupTemplate","actions","items","visible","viewModel","action","target","selectedFeature","close","addEventListener","which","log","remove","editing","currentmode","setMode","identresults","identLayers","filter","layer","mapzoom","identMaxZoom","concat","eachSeries","cb","identify","results","err","ir","forEach","res","acres","feature","geometry","geometryEngine","geodesicArea","reduce","a","b","flat","r1","r2","popupresults","result","layerName","attributes","popupTemplate","renderPopup","length","currentSearchResultFeature","mapPoint","setCurrentPopup","locate","locateBtn","newValue","oldValue","property","object","home","homeBtn","search","searchitems","constructor","name","toLowerCase","includes","searchsources","i","searchWidget","evt","getEditFeature","tempGraphicsLayer","graphics","Event","bubbles","defineProperty","value","enumerable","onmapready","ArcticMapLayer","blockIdentSelect","Graphic","FeatureLayer","MapImageLayer","ImageryLayer","GraphicsLayer","IdentifyTask","IdentifyParameters","Point","SimpleMarkerSymbol","GroupLayer","Renderer","layerRenderers","childrenEles","Array","isArray","renderers","featureLayer","src","layerRef","gtrans","transparency","srcsplit","gmaplayer","glayer","when","layerids","allSublayers","sublayer","renderer","find","r","identifyTask","params","tolerance","layerIds","layerOption","returnGeometry","blockSelect","trans","maplayer","childsrc","imagelayer","geojsonLayer","listMode","dataarr","babelHelpers.typeof","features","obj","template","point","coordinates","markerSymbol","pointGraphic","properties","onready","goTo","layerId","popuprender","layerid","toString","workingdiv","popupText","atts","Object","getOwnPropertyNames","att","callback","hitTest","htresponse","response","mapExtent","extent","execute","ArcticMapEdit","hidden","uploadPanel","createRef","SketchViewModel","Geometry","Polygon","sketchViewModel","setUpClickHandler","single","hideEditors","geojson","arcgisToGeoJSON","toJSON","datajson","firenewfeature","editGraphic","top_right_node","loaded","zoomto","addto","cancel","removeAll","symbol","fromJSON","polygonSymbol","geometrys","merge","union","difference","setGeoJson","data","onnewfeature","create","fileName","indexOf","processShapeFile","processKMLFile","processGeojsonFile","getElementById","file","Promise","rej","fr","FileReader","onload","readAsText","v","color","opacity","substr","isNaN","form","replace","readTextFile","files","parser","DOMParser","gj","fc","xmlDoc","parseFromString","text","placemarks","get","styleMaps","styleIndex","styleByHash","styleMapIndex","k","hash","okhash","xml2str","attr","pairs","pairsMap","m","nodeVal","get1","j","getPlacemark","esrijson","geojsonToArcGIS","f","addGeojsonToMap","current","root","geomsAndTimes","getGeometry","address","styleUrl","description","timeSpan","timeStamp","extendedData","lineStyle","polyStyle","visibility","geoms","styleHash","styleMapHash","normal","iconStyle","icon","href","begin","end","timespan","timestamp","linestyles","kmlColor","stroke","polystyles","pcolor","popacity","fill","outline","datas","simpleDatas","getAttribute","coordTimes","geotypes","geomNode","geomNodes","coord1","coord","rings","coords","track","gxCoords","times","x","norm","textContent","str","serializer","XMLSerializer","xml","serializeToString","h","charCodeAt","y","getElementsByTagName","n","el","normalize","removeSpace","numarray","trimSpace","splitSpace","o","elems","gxCoord","timeElems","JSON","parse","parms","spatialReference","generalize","maxAllowableOffset","reducePrecision","numberOfDigitsAfterDecimal","myContent","stringify","portalUrl","query","keys","escape","join","FormData","featureCollection","layerDefinition","addShapefileToMap","Field","PopupTemplate","sourceGraphics","featureSet","gfx","fields","field","addMany","aml","context","window","SimpleRenderer","am","setmaptoselect","addPointClick","line","addLineClick","polygon","addPolyClick","square","addRecClick","circle","addCircleClick","upload","fileUploaded","reset","widgetRender","fileLayer","stopPropagation","update","selectedButton","ArcticMapLLDSearch","handleChange","SearchSource","fetch","suggestTerm","landdescription","sourceIndex","suggestResult","outfeature","searchinput","displayValue","lldsearchbar","display","verticalAlign","searchLLD","paddingTop","ArcticMapLayerPopup","ArcticMapControlArea","controlNode","location","ArcticMapIdentify","setmaptoidentify","ArcticMapBaseControl","zoomControlDiv","layersDiv","Zoom","LayerList","zoomControl","layerList","item","panel","renderElements","canReset","textDecoration","marginRight","basemapclick","ArcticMapLayerRenderer"],"mappings":"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"}